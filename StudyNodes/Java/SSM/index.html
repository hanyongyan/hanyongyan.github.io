
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="韩永琰的个人网站">
      
      
        <meta name="author" content="韩永琰">
      
      
        <link rel="canonical" href="https://hanyongyan.github.io/StudyNodes/Java/SSM/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>SSM - 韩永琰的个人网站</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../mkdocs/css/no-footer.css">
    
      <link rel="stylesheet" href="../../../mkdocs/css/unordered-list-symbols.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ssm" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="韩永琰的个人网站" class="md-header__button md-logo" aria-label="韩永琰的个人网站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            韩永琰的个人网站
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SSM
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="切换至夜间模式"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="切换至夜间模式" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="切换至日间模式"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="切换至日间模式" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hanyongyan/hanyongyan.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    hanyongyan.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        学习笔记
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="韩永琰的个人网站" class="md-nav__button md-logo" aria-label="韩永琰的个人网站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    韩永琰的个人网站
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hanyongyan/hanyongyan.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    hanyongyan.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">学习笔记</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="学习笔记" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          学习笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/Linux/" class="md-nav__link">
        Linux入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/Vim/" class="md-nav__link">
        Vim
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_3">
          MySql
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MySql" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          MySql
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../MySql/MySQL%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        Mysql
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_4">
          js
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="js" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          js
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JS/Ajax/" class="md-nav__link">
        Ajax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JS/jQuery/" class="md-nav__link">
        jQuery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JS/JS/" class="md-nav__link">
        javaScript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JS/TypeScript%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        TypeScript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JS/Node.js/" class="md-nav__link">
        nodejs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_5">
          java
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="java" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          java
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../JavaWeb/" class="md-nav__link">
        JavaWeb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Maven/" class="md-nav__link">
        Maven
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MyBatis%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        MyBatis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MyBatisPlus/" class="md-nav__link">
        MyBatisPlus
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          SSM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        SSM
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#spring" class="md-nav__link">
    Spring
  </a>
  
    <nav class="md-nav" aria-label="Spring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    核心容器
  </a>
  
    <nav class="md-nav" aria-label="核心容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iocdi" class="md-nav__link">
    核心概念（IoC/DI）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#di-dependency-injection" class="md-nav__link">
    DI （Dependency Injection）依赖注入
  </a>
  
    <nav class="md-nav" aria-label="DI （Dependency Injection）依赖注入">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ioc" class="md-nav__link">
    IoC入门案例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#di" class="md-nav__link">
    DI入门案例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    基础配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    依赖注入
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    依赖自动装配
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    集合注入
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properties" class="md-nav__link">
    加载properties文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    容器基本操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    注解开发（建议使用）
  </a>
  
    <nav class="md-nav" aria-label="注解开发（建议使用）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bean" class="md-nav__link">
    注解开发定义bean
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    纯注解开发
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    作用范围和生命周期
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    依赖注入
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xml" class="md-nav__link">
    XML配置比对注解配置
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    
  </a>
  
    <nav class="md-nav" aria-label="">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mybatis" class="md-nav__link">
    整合数据层技术MyBatis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    整合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#junit" class="md-nav__link">
    整合JUnit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jdbc" class="md-nav__link">
    整合JDBC
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aop" class="md-nav__link">
    AOP
  </a>
  
    <nav class="md-nav" aria-label="AOP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    核心概念
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aop_1" class="md-nav__link">
    AOP入门操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aop_2" class="md-nav__link">
    AOP切入点表达式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aop_3" class="md-nav__link">
    AOP通知类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aop_4" class="md-nav__link">
    AOP通知获取数据
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    事务
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#springmvc" class="md-nav__link">
    SpringMvc
  </a>
  
    <nav class="md-nav" aria-label="SpringMvc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    入门案例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest" class="md-nav__link">
    REST风格
  </a>
  
    <nav class="md-nav" aria-label="REST风格">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requestparam-requestbody-pathvariable" class="md-nav__link">
    @RequestParam  @RequestBody   @PathVariable
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    请求参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web" class="md-nav__link">
    web端页面解除过滤
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    表现层数据封装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    异常处理器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    拦截器
  </a>
  
    <nav class="md-nav" aria-label="拦截器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    入门案例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#springboot" class="md-nav__link">
    SpringBoot
  </a>
  
    <nav class="md-nav" aria-label="SpringBoot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    起步依赖
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    辅助功能
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    基础配置
  </a>
  
    <nav class="md-nav" aria-label="基础配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mavenspringboot" class="md-nav__link">
    Maven与SpringBoot关联操作（多环境配置
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#springbootjunit" class="md-nav__link">
    SpringBoot整合JUnit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sprintbootmybatis" class="md-nav__link">
    SprintBoot整合Mybatis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#springbootmybatisplus" class="md-nav__link">
    SpringBoot整合MybatisPlus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#springbootdruid" class="md-nav__link">
    SpringBoot整合Druid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    整合任意第三方技术
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#springboot_1" class="md-nav__link">
    SpringBoot运维实用篇
  </a>
  
    <nav class="md-nav" aria-label="SpringBoot运维实用篇">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    打包与运行
  </a>
  
    <nav class="md-nav" aria-label="打包与运行">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    程序打包与运行（Windows版
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    程序运行（Linux版
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    配置高级
  </a>
  
    <nav class="md-nav" aria-label="配置高级">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    临时属性设置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    配置文件分类
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    多环境开发
  </a>
  
    <nav class="md-nav" aria-label="多环境开发">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    多环境开发控制
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    日志
  </a>
  
    <nav class="md-nav" aria-label="日志">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    日志基础
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    日志输出格式控制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    日志文件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#springboot_2" class="md-nav__link">
    SpringBoot开发实用篇
  </a>
  
    <nav class="md-nav" aria-label="SpringBoot开发实用篇">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    热部署
  </a>
  
    <nav class="md-nav" aria-label="热部署">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    热部署配置范围
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    关闭热部署
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    配置高级
  </a>
  
    <nav class="md-nav" aria-label="配置高级">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bean_1" class="md-nav__link">
    第三方bean属性绑定
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    宽松绑定/松散绑定
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    常用时间与空间计量单位
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bean_2" class="md-nav__link">
    Bean属性校验
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    进制数据转换规则
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    测试
  </a>
  
    <nav class="md-nav" aria-label="测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    加载测试专用属性
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    加载测试专用配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web_1" class="md-nav__link">
    Web环境模拟测试
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    业务层测试回滚
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    测试用例设置随机数据
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    数据层解决方案
  </a>
  
    <nav class="md-nav" aria-label="数据层解决方案">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sql" class="md-nav__link">
    SQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nosql" class="md-nav__link">
    NoSQL
  </a>
  
    <nav class="md-nav" aria-label="NoSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    Redis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb" class="md-nav__link">
    Mongodb
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    整合第三方技术
  </a>
  
    <nav class="md-nav" aria-label="整合第三方技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    缓存
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#springboot_3" class="md-nav__link">
    SpringBoot缓存使用方法
  </a>
  
    <nav class="md-nav" aria-label="SpringBoot缓存使用方法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ehcache" class="md-nav__link">
    Ehcache缓存技术
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jetcache" class="md-nav__link">
    jetCache远程缓存
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#j2cache" class="md-nav__link">
    j2Cache
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    任务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    邮件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    消息
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    监控
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ymlyaml" class="md-nav__link">
    yml/yaml
  </a>
  
    <nav class="md-nav" aria-label="yml/yaml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaml" class="md-nav__link">
    yaml文件怎么读取
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yamlxml" class="md-nav__link">
    yaml文件读取xml文件内容
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mybatisplus" class="md-nav__link">
    MybatisPlus
  </a>
  
    <nav class="md-nav" aria-label="MybatisPlus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dql" class="md-nav__link">
    DQL编程控制
  </a>
  
    <nav class="md-nav" aria-label="DQL编程控制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#null" class="md-nav__link">
    关于null值处理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    查询投影
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    查询条件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    字段映射与表名映射
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dml" class="md-nav__link">
    DML编程控制
  </a>
  
    <nav class="md-nav" aria-label="DML编程控制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    多记录操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    逻辑删除
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    乐观锁
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    快速开发数据层
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    快速开发业务层
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    快速开发（前期自己开发不建议使用
  </a>
  
    <nav class="md-nav" aria-label="快速开发（前期自己开发不建议使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    代码生成器
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    开发顺序
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        瑞吉外卖笔记
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/" class="md-nav__link">
        Nacos
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_6">
          Git
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Git" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/Git/" class="md-nav__link">
        git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.1-Git%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97%28%E4%B8%8A%29/" class="md-nav__link">
        1.1Git简易指南
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.2-%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93/" class="md-nav__link">
        1.2创建代码仓库
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.3-%E4%BF%9D%E5%AD%98%E4%BD%A0%E7%9A%84%E6%9B%B4%E6%94%B9/" class="md-nav__link">
        1.3保存更改
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.4-%E6%9F%A5%E7%9C%8B%E4%BB%93%E5%BA%93%E7%8A%B6%E6%80%81/" class="md-nav__link">
        1.4查看仓库状态
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.5-检查以前的提交.md" class="md-nav__link">
        1.5检查以前的提交
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.6-%E5%9B%9E%E6%BB%9A%E9%94%99%E8%AF%AF%E7%9A%84%E4%BF%AE%E6%94%B9/" class="md-nav__link">
        1.6回滚错误的修改
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.7-%E9%87%8D%E5%86%99%E9%A1%B9%E7%9B%AE%E5%8E%86%E5%8F%B2/" class="md-nav__link">
        1.7重写项目历史
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/3.2-%E4%BF%9D%E6%8C%81%E4%BB%A3%E7%A0%81%E5%90%8C%E6%AD%A5/" class="md-nav__link">
        2.1保持代码同步
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/3.3-%E5%88%9B%E5%BB%BAPullRequest/" class="md-nav__link">
        2.2创建PullRequest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/3.4-%E4%BD%BF%E7%94%A8%E5%88%86%E6%94%AF/" class="md-nav__link">
        2.3使用分支
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/常见工作流比较.md" class="md-nav__link">
        2.4常见工作流比较
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/4-Git%E5%9B%BE%E8%A7%A3/" class="md-nav__link">
        3Git图解
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6Merge%E8%BF%98%E6%98%AFRebase/" class="md-nav__link">
        4.1代码合并Merge还是Rebase
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.2-%E5%9B%9E%E6%BB%9A%E5%91%BD%E4%BB%A4Reset%E3%80%81Checkout%E3%80%81Revert%E8%BE%A8%E6%9E%90/" class="md-nav__link">
        4.2回滚命令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.3-Git_log%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/" class="md-nav__link">
        4.3Git_log高级用法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.4-Git%E9%92%A9%E5%AD%90/" class="md-nav__link">
        4.4Git钩子
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.5-Git%E6%8F%90%E4%BA%A4%E5%BC%95%E7%94%A8/" class="md-nav__link">
        4.5Git提交引用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#spring" class="md-nav__link">
    Spring
  </a>
  
    <nav class="md-nav" aria-label="Spring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    核心容器
  </a>
  
    <nav class="md-nav" aria-label="核心容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iocdi" class="md-nav__link">
    核心概念（IoC/DI）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#di-dependency-injection" class="md-nav__link">
    DI （Dependency Injection）依赖注入
  </a>
  
    <nav class="md-nav" aria-label="DI （Dependency Injection）依赖注入">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ioc" class="md-nav__link">
    IoC入门案例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#di" class="md-nav__link">
    DI入门案例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    基础配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    依赖注入
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    依赖自动装配
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    集合注入
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properties" class="md-nav__link">
    加载properties文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    容器基本操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    注解开发（建议使用）
  </a>
  
    <nav class="md-nav" aria-label="注解开发（建议使用）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bean" class="md-nav__link">
    注解开发定义bean
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    纯注解开发
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    作用范围和生命周期
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    依赖注入
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xml" class="md-nav__link">
    XML配置比对注解配置
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    
  </a>
  
    <nav class="md-nav" aria-label="">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mybatis" class="md-nav__link">
    整合数据层技术MyBatis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    整合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#junit" class="md-nav__link">
    整合JUnit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jdbc" class="md-nav__link">
    整合JDBC
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aop" class="md-nav__link">
    AOP
  </a>
  
    <nav class="md-nav" aria-label="AOP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    核心概念
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aop_1" class="md-nav__link">
    AOP入门操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aop_2" class="md-nav__link">
    AOP切入点表达式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aop_3" class="md-nav__link">
    AOP通知类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aop_4" class="md-nav__link">
    AOP通知获取数据
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    事务
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#springmvc" class="md-nav__link">
    SpringMvc
  </a>
  
    <nav class="md-nav" aria-label="SpringMvc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    入门案例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest" class="md-nav__link">
    REST风格
  </a>
  
    <nav class="md-nav" aria-label="REST风格">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requestparam-requestbody-pathvariable" class="md-nav__link">
    @RequestParam  @RequestBody   @PathVariable
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    请求参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web" class="md-nav__link">
    web端页面解除过滤
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    表现层数据封装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    异常处理器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    拦截器
  </a>
  
    <nav class="md-nav" aria-label="拦截器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    入门案例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#springboot" class="md-nav__link">
    SpringBoot
  </a>
  
    <nav class="md-nav" aria-label="SpringBoot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    起步依赖
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    辅助功能
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    基础配置
  </a>
  
    <nav class="md-nav" aria-label="基础配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mavenspringboot" class="md-nav__link">
    Maven与SpringBoot关联操作（多环境配置
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#springbootjunit" class="md-nav__link">
    SpringBoot整合JUnit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sprintbootmybatis" class="md-nav__link">
    SprintBoot整合Mybatis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#springbootmybatisplus" class="md-nav__link">
    SpringBoot整合MybatisPlus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#springbootdruid" class="md-nav__link">
    SpringBoot整合Druid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    整合任意第三方技术
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#springboot_1" class="md-nav__link">
    SpringBoot运维实用篇
  </a>
  
    <nav class="md-nav" aria-label="SpringBoot运维实用篇">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    打包与运行
  </a>
  
    <nav class="md-nav" aria-label="打包与运行">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    程序打包与运行（Windows版
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    程序运行（Linux版
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    配置高级
  </a>
  
    <nav class="md-nav" aria-label="配置高级">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    临时属性设置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    配置文件分类
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    多环境开发
  </a>
  
    <nav class="md-nav" aria-label="多环境开发">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    多环境开发控制
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    日志
  </a>
  
    <nav class="md-nav" aria-label="日志">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    日志基础
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    日志输出格式控制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    日志文件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#springboot_2" class="md-nav__link">
    SpringBoot开发实用篇
  </a>
  
    <nav class="md-nav" aria-label="SpringBoot开发实用篇">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    热部署
  </a>
  
    <nav class="md-nav" aria-label="热部署">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    热部署配置范围
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    关闭热部署
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    配置高级
  </a>
  
    <nav class="md-nav" aria-label="配置高级">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bean_1" class="md-nav__link">
    第三方bean属性绑定
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    宽松绑定/松散绑定
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    常用时间与空间计量单位
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bean_2" class="md-nav__link">
    Bean属性校验
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    进制数据转换规则
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    测试
  </a>
  
    <nav class="md-nav" aria-label="测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    加载测试专用属性
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    加载测试专用配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web_1" class="md-nav__link">
    Web环境模拟测试
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    业务层测试回滚
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    测试用例设置随机数据
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    数据层解决方案
  </a>
  
    <nav class="md-nav" aria-label="数据层解决方案">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sql" class="md-nav__link">
    SQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nosql" class="md-nav__link">
    NoSQL
  </a>
  
    <nav class="md-nav" aria-label="NoSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    Redis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb" class="md-nav__link">
    Mongodb
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    整合第三方技术
  </a>
  
    <nav class="md-nav" aria-label="整合第三方技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    缓存
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#springboot_3" class="md-nav__link">
    SpringBoot缓存使用方法
  </a>
  
    <nav class="md-nav" aria-label="SpringBoot缓存使用方法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ehcache" class="md-nav__link">
    Ehcache缓存技术
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jetcache" class="md-nav__link">
    jetCache远程缓存
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#j2cache" class="md-nav__link">
    j2Cache
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    任务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    邮件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    消息
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    监控
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ymlyaml" class="md-nav__link">
    yml/yaml
  </a>
  
    <nav class="md-nav" aria-label="yml/yaml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaml" class="md-nav__link">
    yaml文件怎么读取
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yamlxml" class="md-nav__link">
    yaml文件读取xml文件内容
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mybatisplus" class="md-nav__link">
    MybatisPlus
  </a>
  
    <nav class="md-nav" aria-label="MybatisPlus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dql" class="md-nav__link">
    DQL编程控制
  </a>
  
    <nav class="md-nav" aria-label="DQL编程控制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#null" class="md-nav__link">
    关于null值处理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    查询投影
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    查询条件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    字段映射与表名映射
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dml" class="md-nav__link">
    DML编程控制
  </a>
  
    <nav class="md-nav" aria-label="DML编程控制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    多记录操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    逻辑删除
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    乐观锁
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    快速开发数据层
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    快速开发业务层
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    快速开发（前期自己开发不建议使用
  </a>
  
    <nav class="md-nav" aria-label="快速开发（前期自己开发不建议使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    代码生成器
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    开发顺序
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  



  <a href="https://github.com/hanyongyan/hanyongyan.github.io/edit/main/docs/StudyNodes/Java/SSM.md" title="编辑此页" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="ssm">SSM<a class="headerlink" href="#ssm" title="Permanent link">&para;</a></h1>
<h2 id="spring">Spring<a class="headerlink" href="#spring" title="Permanent link">&para;</a></h2>
<p>Spring Framework系统架构
<img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220709181318065.png" alt="image-20220709181318065" style="zoom: 33%;" /></p>
<p>学习路线
<img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220709182629452.png" alt="image-20220709182629452" style="zoom: 33%;" /></p>
<h3 id="_1">核心容器<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<h4 id="iocdi">核心概念（IoC/DI）<a class="headerlink" href="#iocdi" title="Permanent link">&para;</a></h4>
<ul>
<li>IOC ( Inversion of Control )</li>
<li>使用对象时，由主动 new 产生对象转换为由<strong><code>外部</code></strong>提供对象，此过程中对象创建控制权由程序转移到外部，此思想称为控制反转</li>
<li>Spring 技术对 IoC 思想进行了实现</li>
<li>Spring 提供了一个容器，成为 IoC 容器，用来充当 IoC 思想中的 <code>外部</code></li>
<li>IoC 容器负责对象的创建、初始化等一系列工作，被创建或被管理的对象在 IoC 容器中统称为 <code>Bean</code></li>
<li>
<h2 id="di-dependency-injection">DI （Dependency Injection）依赖注入<a class="headerlink" href="#di-dependency-injection" title="Permanent link">&para;</a></h2>
</li>
<li>
<p>在容器中建立 Bean 与 Bean 之间的依赖关系的整个过程，成为依赖注入</p>
</li>
</ul>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220709201149199.png" alt="image-20220709201149199" style="zoom:50%;" /></p>
<p>​           service 依赖 dao 层 形成了依赖关系</p>
<ul>
<li>目标：<strong>充分解耦</strong></li>
<li>使用 IoC 容器管理 Bean （IoC）</li>
<li>在 IoC 容器内将有依赖关系的 Bean 进行关系绑定 （DI）</li>
<li>最终效果</li>
<li>使用对象时不仅可以直接从 IoC 容器中获取，并且获取到的 bean 已经绑定了所有的依赖关系</li>
</ul>
<h5 id="ioc">IoC入门案例<a class="headerlink" href="#ioc" title="Permanent link">&para;</a></h5>
<ol>
<li>导入Spring坐标</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
 <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-context<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>自己选择<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<ol>
<li>
<p>定义Spring管理的类（接口）</p>
</li>
<li>
<p>在<code>resources目录内</code>创建Spring配置文件，配置对应类作为Spring管理的bean</p>
</li>
</ol>
<p>IDEA中新建时会有spring xml的选项创建 一般命名为  <code>ApplicationContext</code></p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--创建好spring xml 文件以后  在里面添加下面--&gt;</span>   
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;自己定义名字&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的实现类&quot;</span><span class="nt">&gt;&lt;/bean&gt;</span>
<span class="cm">&lt;!--可添加多个对应多个实现类--&gt;</span>
</code></pre></div>
<ol>
<li>初始化IoC容器，通过容器获取Bean</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">a</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="c1">//下面的ApplicationContext.xml 就是创建的spring xml 文件</span><span class="w"></span>
<span class="w">        </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">ac</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">&quot;ApplicationContext.xml&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">//获取对象</span><span class="w"></span>
<span class="w">          </span><span class="n">对象名</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">对象名</span><span class="p">)</span><span class="w"> </span><span class="n">ac</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">&quot;id名字&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h5 id="di">DI入门案例<a class="headerlink" href="#di" title="Permanent link">&para;</a></h5>
<ol>
<li>提供依赖对象对应的 setter 方法</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">xxService</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//此时的a是空指针</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">xxDao</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setXxDao</span><span class="p">(</span><span class="n">xxDao</span><span class="w"> </span><span class="n">a</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">a</span><span class="o">=</span><span class="n">a</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>配置service与mapper/dao之间的关系 （依赖注入）也可以使用多个依赖
   设置依赖：service依赖于mapper/dao </li>
</ol>
<div class="highlight"><pre><span></span><code> <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxxService&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的service类&quot;</span><span class="nt">&gt;</span>
        <span class="cm">&lt;!--name 对应是你现在的属性的名称 此处的a对应1中的a  ref对应的Dao的bean的名称--&gt;</span>
     <span class="nt">&lt;propetry</span> <span class="na">name=</span><span class="s">&quot;a&quot;</span> <span class="na">ref=</span><span class="s">&quot;xxxDao&quot;</span><span class="nt">&gt;&lt;/propetry&gt;</span>
 <span class="nt">&lt;/bean&gt;</span>

 <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxxDao&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的dao类&quot;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</code></pre></div>
<h5 id="_2">基础配置<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h5>
<p>Bean别名 </p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxx&quot;</span> <span class="na">name=</span><span class="s">&quot;别名&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的实现类&quot;</span><span class="nt">&gt;&lt;/bean&gt;</span>
<span class="cm">&lt;!--可以定义多个别名 中间使用 逗号 分号 空格 来进行分割都可以--&gt;</span>
<span class="cm">&lt;!--获取bean可以通过id和name均可--&gt;</span>
</code></pre></div>
<p>Bean作用范围配置  （单例多例</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxx&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的实现类&quot;</span> <span class="na">scope=</span><span class="s">&quot;&quot;</span> <span class="nt">&gt;&lt;/bean&gt;</span> 
<span class="cm">&lt;!--scope有两个值 singleton(默认值)  prototype--&gt;</span>
<span class="cm">&lt;!--使用singleton每次创建的对象都是同一个 prototype创建一个是一个--&gt;</span>
<span class="cm">&lt;!--表现层对象，业务层对象，数据层对象，工具对象适合使用默认值--&gt;</span>
</code></pre></div>
<p>Bean实例化</p>
<p>构造方法（常用,不可传参的方式 ，传参的方式在 <a href="# 依赖注入">依赖注入构造器注入内</a></p>
<div class="highlight"><pre><span></span><code>    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxx&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的类&quot;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</code></pre></div>
<p>静态工厂实例化（了解</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 由一个类中的方法来提供对象的实例化</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">xxxFactory</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//注意是静态的</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">xxx</span><span class="w"> </span><span class="nf">GetXxx</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">xxxIml</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;自定义&quot;</span> <span class="na">factory-method=</span><span class="s">&quot;类中提供实例化的方法&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的类即上面这一个&quot;</span><span class="nt">&gt;&lt;/bean&gt;</span>
<span class="cm">&lt;!--不添加 factory-method 对应实现的就是 class中的类的实例化--&gt;</span>
</code></pre></div>
<p>实例工厂实例化（了解</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">xxxFactory</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//此处不是静态</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">xxx</span><span class="w"> </span><span class="nf">getXxx</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">xxxImpl</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--第一个为了配合第二个的使用--&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxxFactory&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的类即上面这一个&quot;</span><span class="nt">&gt;&lt;/bean&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxx&quot;</span> <span class="na">factory-method=</span><span class="s">&quot;getXxx&quot;</span> <span class="na">factory-bean=</span><span class="s">&quot;xxxFactory 用来指向工厂&quot;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</code></pre></div>
<p>FactoryBean实例化（实用）（实例工厂实例化的</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">xxxFactoryBean</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">FactoryBean</span><span class="o">&lt;</span><span class="n">xxx</span><span class="o">&gt;</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">xxx</span><span class="w"> </span><span class="nf">getObject</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">xxximpl</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">getObjectType</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">xxx</span><span class="p">.</span><span class="na">class</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxx&quot;</span> <span class="na">class=</span><span class="s">&quot;xxxBean&quot;</span><span class="nt">&gt;&lt;/bean&gt;</span>
<span class="cm">&lt;!--造出的不是xxxBean的对象  而是xxxBean中的getObject() 方法返回的对象--&gt;</span>
</code></pre></div>
<p>Bean生命周期</p>
<p>生命周期</p>
<ul>
<li>初始化容器</li>
<li>创建对象（内存分配）</li>
<li>执行构造方法</li>
<li>执行属性注入（set操作 有依赖操作的时候）</li>
<li>执行bean初始化方法</li>
<li>使用bean</li>
<li>执行业务操作</li>
<li>关闭/销毁容器</li>
<li>
<p>执行bean销毁方法</p>
</li>
<li>
<p>普通方法</p>
</li>
<li>
<p>提供生命周期控制方法</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">xxxImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">xxx</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//两个方法名字自定义</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">(){</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">destory</span><span class="p">(){</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</li>
<li>
<p>配置生命周期控制方法</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxx&quot;</span> <span class="na">class=</span><span class="s">&quot;xxxImpl&quot;</span> <span class="na">init-method=</span><span class="s">&quot;init&quot;</span> <span class="na">destory-method=</span><span class="s">&quot;destory&quot;</span><span class="nt">&gt;&lt;/bean&gt;</span>
<span class="cm">&lt;!--init-method destory-method 中的内容对应类中的自定义方法的名字--&gt;</span>
</code></pre></div>
</li>
<li>
<p>接口控制</p>
</li>
</ul>
<p>实现InitializingBean，DisposableBean接口</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">xxxServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">xxxService</span><span class="w"> </span><span class="p">,</span><span class="n">InitializingBean</span><span class="p">,</span><span class="n">DisposableBean</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//初始化的方法</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">afterPropertiesSet</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="c1">//销毁方法</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">destory</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h5 id="_3">依赖注入<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h5>
<p>依赖注入方式</p>
<ul>
<li>setter注入（自己开发更推荐）</li>
<li>
<p>简单类型 （如String ，Integer）</p>
<div class="highlight"><pre><span></span><code><span class="c1">//在bean中定义引用类型属性并提供可访问的set方法</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">xxxDaoImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">xxxDao</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">conn</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setConn</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">conn</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--在配置中使用property标签value属性注入简单数据类型数据--&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxxDap&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的实现类&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;conn即对应的变量的名字&quot;</span> <span class="na">value=</span><span class="s">&quot;你要设定的值&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre></div>
</li>
<li>
<p>引用类型  <a href="#DI入门案例">DI入门案例</a></p>
</li>
<li>
<p>构造器注入</p>
</li>
<li>
<p>简单类型</p>
<div class="highlight"><pre><span></span><code><span class="c1">//在bean中定义引用类型属性并提供可访问的构造方法</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">xxxDaoImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">xxxDao</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">conn</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">xxxDaoImpl</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">conn</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="o">=</span><span class="n">name</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxxDao&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的实现类&quot;</span><span class="nt">&gt;</span>
    <span class="cm">&lt;!--根据构造方法参数名注入 name中的值对应的是构造器中的形参名字 耦合性高--&gt;</span>
    <span class="nt">&lt;constructor-arg</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span> <span class="na">value=</span><span class="s">&quot;赋值&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;constructor-arg</span> <span class="na">name=</span><span class="s">&quot;conn&quot;</span> <span class="na">value=</span><span class="s">&quot;赋值&quot;</span><span class="nt">/&gt;</span>
    <span class="cm">&lt;!--</span>
<span class="cm">        根据构造方法参数类型注入 type对应形参的类型</span>
<span class="cm">        &lt;constructor-arg type=&quot;int&quot; value=&quot;赋值&quot;/&gt;</span>
<span class="cm">        &lt;constructor-arg type=&quot;java.lang.String&quot; value=&quot;赋值&quot;/&gt;</span>
<span class="cm">    --&gt;</span>
    <span class="cm">&lt;!--</span>
<span class="cm">        根据构造方法参数类型注入 index对应形参的位置 从0开始</span>
<span class="cm">        &lt;constructor-arg index=&quot;1&quot; value=&quot;赋值&quot;/&gt;</span>
<span class="cm">        &lt;constructor-arg index=&quot;0&quot; value=&quot;赋值&quot;/&gt;</span>
<span class="cm">    --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre></div>
</li>
<li>
<p>引用类型</p>
<div class="highlight"><pre><span></span><code><span class="c1">//在bean中定义引用类型属性并提供可访问的构造方法</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">xxxServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">xxxService</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">xxxDao</span><span class="w"> </span><span class="n">xxxDao</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">xxxServiceImpl</span><span class="p">(</span><span class="n">xxxDao</span><span class="w"> </span><span class="n">xxxDao</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">xxxDao</span><span class="o">=</span><span class="n">xxxDao</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--配置中使用constructor-arg标签ref属性注入引用类型对象--&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxxService&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的实现类&quot;</span><span class="nt">&gt;</span>
    <span class="cm">&lt;!--name属性对应的是上面的构造器中的形参名字 ref指向了这个bean--&gt;</span>
    <span class="cm">&lt;!--可以配置多个 更改对应的name和ref属性即可--&gt;</span>
    <span class="nt">&lt;constructor-arg</span> <span class="na">name=</span><span class="s">&quot;xxxDao&quot;</span> <span class="na">ref=</span><span class="s">&quot;xxxDao&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxxDao&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的实现类&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
</li>
</ul>
<h5 id="_4">依赖自动装配<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>IoC容器根据bean所依赖的资源在容器中自动查找并注入到bean中的过程称为自动装配</p>
</li>
<li>
<p>自动装配用于引用类型依赖注入，不能对简单类型进行操作</p>
</li>
<li>
<p>自动装配方式</p>
</li>
<li>
<p>按类型（byType，必须保证容器中相同类型的bean唯一，推荐使用</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--会自动寻找对应的获取实例化的bean--&gt;</span>   
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxxService&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的service类&quot;</span> <span class="na">autowire=</span><span class="s">&quot;byType&quot;</span><span class="nt">/&gt;</span>
<span class="cm">&lt;!--此处的id不设置也无妨--&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xxxDao&quot;</span> <span class="na">class=</span><span class="s">&quot;对应的dao类&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
</li>
<li>
<p>按名称（byName，必须保证容器中具有指定名称的bean，因变量名与配置耦合，不推荐使用</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;bookDao&quot;</span> <span class="na">class=</span><span class="s">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span><span class="nt">/&gt;</span>
    <span class="cm">&lt;!--autowire属性：开启自动装配，通常使用按类型装配--&gt;</span>
    <span class="cm">&lt;!--此处的byName应该对应BookDaoImpl中的setBookDao方法 且setBookDao方法set后面的（bookDao首字母小写）要与依赖的dean的id名称相同--&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;bookService&quot;</span> <span class="na">class=</span><span class="s">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span> <span class="na">autowire=</span><span class="s">&quot;byName&quot;</span> <span class="nt">/&gt;</span>
</code></pre></div>
</li>
</ul>
<h5 id="_5">集合注入<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;bookDao&quot;</span> <span class="na">class=</span><span class="s">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;BookDaoImpl类中的集合参数名字&quot;</span><span class="nt">&gt;</span>
        <span class="cm">&lt;!--如果是数组，list，set等参数名字 下面一句内的参数要与类的属性相同--&gt;</span>
        <span class="nt">&lt;array</span><span class="err">/list/set</span><span class="nt">&gt;</span>
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>    
            <span class="nt">&lt;value&gt;&lt;/value&gt;</span>  
        <span class="err">&lt;</span>/array/list/set&gt;
        <span class="cm">&lt;!--map集合注入--&gt;</span>
         <span class="nt">&lt;map&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;&quot;</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;&quot;</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/map&gt;</span>
        <span class="cm">&lt;!--properties注入时--&gt;</span>
        <span class="nt">&lt;props&gt;</span>
            <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;&lt;/prop&gt;</span>
            <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;&lt;/prop&gt;</span>

        <span class="nt">&lt;/props&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre></div>
<h5 id="properties">加载<code>properties</code>文件<a class="headerlink" href="#properties" title="Permanent link">&para;</a></h5>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220711191623338.png" alt="image-20220711191623338" style="zoom:50%;" /></p>
<div class="highlight"><pre><span></span><code>    <span class="cm">&lt;!--1.开启context命名空间 即上面的操作--&gt;</span>
    <span class="cm">&lt;!--2.使用context空间加载properties文件--&gt;</span>
    <span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&quot;jdbc.properties&quot;</span> <span class="na">system-properties-mode=</span><span class="s">&quot;NEVER&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&quot;*.properties&quot;</span> <span class="na">system-properties-mode=</span><span class="s">&quot;NEVER&quot;</span><span class="nt">/&gt;</span>
    <span class="cm">&lt;!--location中的值更推荐使用classpath:*.properties获取了全部的properties文件--&gt;</span>
    <span class="cm">&lt;!--classpath:*.properties  ：   设置加载当前工程类路径中的所有properties文件</span>
<span class="cm">    system-properties-mode属性：是否加载系统属性--&gt;</span>
    <span class="cm">&lt;!--classpath*:*.properties  ：   设置加载其他和当前工程类路径中的所有properties文件</span>
<span class="cm">    system-properties-mode属性：是否加载系统属性--&gt;</span>
</code></pre></div>
<p>使用<code>properties</code>中的值的时候需要使用占位符</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&quot;classpath:*.properties&quot;</span> <span class="na">system-properties-mode=</span><span class="s">&quot;NEVER&quot;</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;DataSource&quot;</span> <span class="na">class=</span><span class="s">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;driverClassName&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.driver}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;url&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.url}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.username}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.password}&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
</code></pre></div>
<h5 id="_6">容器基本操作<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h5>
<p>创建容器
<img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220711192603037.png" alt="image-20220711192603037" style="zoom: 33%;" /></p>
<p>获取bean
<img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220711192754766.png" alt="image-20220711192754766" style="zoom:33%;" /></p>
<h4 id="_7">注解开发（建议使用）<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<h5 id="bean">注解开发定义bean<a class="headerlink" href="#bean" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="c1">//使用@component定义bean</span><span class="w"></span>
<span class="nd">@Component</span><span class="p">(</span><span class="s">&quot;bookDao&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookDaoImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">BookDak</span><span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="c1">//使用此办法获取bean时使用   ac.getBean(类的反射);</span><span class="w"></span>
<span class="nd">@Component</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">BookService</span><span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--使用了上面的方法进行定义后须在配置文件中进行设置--&gt;</span>
<span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&quot;对应的包名，更大范围的包也行，直接对应到类也行&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>Spring提供@Component注解的三个衍生注解，@Component("bookDao")下面的三个也适用</p>
<ul>
<li>@Controller：用于表现层bean定义</li>
<li>@Service：用于业务层bean定义</li>
<li>@Repository：用于数据层bean定义</li>
</ul>
<p>与@Component没有什么区别，只是更好的让你了解属于哪一个层</p>
<h5 id="_8">纯注解开发<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h5>
<p>使用Java类代替配置文件，开启了Spring快速开发赛道</p>
<p>默认生成的Spring的xml文件装换为类中的 <code>@Configuration</code></p>
<p>对应的配置文件中的设置装换成类中的<code>@ComponentScan</code>   衍生注解上面的代码块</p>
<div class="highlight"><pre><span></span><code><span class="c1">//声明当前类为Spring配置类</span><span class="w"></span>
<span class="nd">@Configuration</span><span class="w"></span>
<span class="c1">//设置bean扫描路径，多个路径书写为字符串数组格式</span><span class="w"></span>
<span class="nd">@ComponentScan</span><span class="p">(</span><span class="s">&quot;对应的包名，更大范围的包也行，直接对应到类也行&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringConfig</span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//设定扫面路径时此注解只能添加一次，多个数据使用数组格式</span><span class="w"></span>
<span class="c1">//@ComponentScan({&quot;xx&quot;,&quot;xx&quot;})</span><span class="w"></span>
</code></pre></div>
<p>使用纯注解开发时Spring核心配置文初始化容器对象切换为读取Java配置类初始化容器对象</p>
<div class="highlight"><pre><span></span><code><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">ac</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">&quot;applicationContext.xml&quot;</span><span class="p">)</span><span class="w"></span>
<span class="c1">//转换为</span><span class="w"></span>
<span class="n">ApplicationContext</span><span class="w"> </span><span class="n">ac</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AnnotationConfigApplicationContext</span><span class="p">(</span><span class="n">SpringConfig</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h5 id="_9">作用范围和生命周期<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="nd">@Component</span><span class="w"></span>
<span class="nd">@Scpoe</span><span class="p">(</span><span class="s">&quot;singleton/prototype&quot;</span><span class="p">)</span><span class="c1">//设置作用范围，单例还是多例</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookDaoImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">BookDao</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@PostConstruct</span><span class="w">  </span><span class="c1">//初始化</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="c1">//方法的名字进行自定义</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nd">@PreDestory</span><span class="w">     </span><span class="c1">//关闭时</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">destory</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="c1">//方法的名字自定义</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h5 id="_10">依赖注入<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h5>
<p>注入引用类型</p>
<div class="highlight"><pre><span></span><code><span class="c1">//使用@AutoWired注解开启自动装配模式（按类型</span><span class="w"></span>
<span class="c1">//@Qualifier注解开启指定名称装配bean 对应的表现层需要对bean设置名字</span><span class="w"></span>
<span class="nd">@Service</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookServiceImple</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">BookService</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@AutoWired</span><span class="c1">//会自动进行搜索dui&#39;y</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Qualifier</span><span class="p">(</span><span class="s">&quot;bean的名字&quot;</span><span class="p">)</span><span class="c1">//必须配合@AutoWired使用</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BookDao</span><span class="w"> </span><span class="n">BookDao</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="cm">/**  此语句可以省略</span>
<span class="cm">    public void setBookDao(BookDao BookDao){</span>
<span class="cm">        this.BookDao = BookDao;</span>
<span class="cm">    }</span>
<span class="cm">    */</span><span class="w"></span>
<span class="w">    </span><span class="c1">//自动装配基于反射设计创建对象并暴力反射对应属性为私有属性初始化数据，因此无需提供setter方法</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>简单类型注入</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Service</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookServiceImple</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">BookService</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${对应的properties属性}&quot;</span><span class="p">)</span><span class="c1">//引号中也可以直接赋值</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BookDao</span><span class="w"> </span><span class="n">BookDao</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>加载properties文件</p>
<div class="highlight"><pre><span></span><code><span class="c1">//使用@PropertySource注解加载properties文件</span><span class="w"></span>
<span class="c1">//properties文件一般在resource目录内</span><span class="w"></span>

<span class="nd">@Configuration</span><span class="w">      </span><span class="c1">//声明当前类为Spring配置类</span><span class="w"></span>
<span class="nd">@ComponentScan</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">//设置bean扫描路径，多个路径书写为字符串数组格式</span><span class="w"></span>
<span class="nd">@PropertySource</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">//路径仅支持单一文件配置，多文件请使用数组格式配置，不允许使用*</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringConfig</span><span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ul>
<li>使用@Bean配置第三方bean</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JdbcConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="nf">dateSourcr</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">DruidDataSource</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSource</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">//相关配置</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ds</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ul>
<li>建议使用独立的配置类管理第三方bean（不要写在SpringConfig中</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JdbcConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="nf">dateSourcr</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">DruidDataSource</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSource</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">//相关配置</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ds</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//将独立的配置类加入核心配置</span><span class="w"></span>
<span class="c1">//1.导入式（推荐使用）</span><span class="w"></span>
<span class="nd">@Configuration</span><span class="w"></span>
<span class="nd">@Import</span><span class="p">(</span><span class="n">JdbcConfig</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="c1">//此注解只能添加一次，多个数据请使用数组格式</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringConfig</span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//2.扫描式</span><span class="w"></span>
<span class="c1">//在JdbcConfig上面添加@Configuration</span><span class="w"></span>
<span class="c1">//SpringConfig上面import更改为@ComponentScan(&quot;对应的包来进行扫描&quot;)</span><span class="w"></span>
</code></pre></div>
<ul>
<li>如果第三方bean需要使用别的bean时</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">//简单类型</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JdbcConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;值&quot;</span><span class="p">)</span><span class="c1">//此处应该使用properties文件中的值</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">;</span><span class="c1">//然后直接使用此变量即可</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="nf">dateSourcr</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">DruidDataSource</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSource</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">//相关配置</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ds</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//引用类型注入</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JdbcConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//方法进行传参，对应的参数需要有bean能够获取到，进行了自动装配</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="nf">dateSourcr</span><span class="p">(</span><span class="n">BookDao</span><span class="w"> </span><span class="n">bookDao</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">DruidDataSource</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSource</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">//相关配置</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ds</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h5 id="xml">XML配置比对注解配置<a class="headerlink" href="#xml" title="Permanent link">&para;</a></h5>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220714165104801.png" alt="image-20220714165104801" style="zoom:50%;" /></p>
<h3 id="_11"><a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<h4 id="mybatis">整合数据层技术MyBatis<a class="headerlink" href="#mybatis" title="Permanent link">&para;</a></h4>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220714211703452.png" alt="image-20220714211703452" style="zoom:50%;" /></p>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220714211802077.png" alt="image-20220714211802077" style="zoom:50%;" /></p>
<div class="highlight"><pre><span></span><code><span class="c1">//一般会单独定义出这样一个类</span><span class="w"></span>
<span class="c1">//再在SpringConfig中使用Import进行导入，使其可以使用</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MybatisConfig</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//定义bean，SqlSessionFactoryBean，用于产生SqlSessionFactory对象</span><span class="w"></span>
<span class="w">    </span><span class="c1">//此处的DataSource是来自下面的JDBC的配置的bean自动装配来的</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">SqlSessionFactoryBean</span><span class="w"> </span><span class="nf">sqlSessionFactory</span><span class="p">(</span><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">SqlSessionFactoryBean</span><span class="w"> </span><span class="n">ssfb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBean</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">ssfb</span><span class="p">.</span><span class="na">setTypeAliasesPackage</span><span class="p">(</span><span class="s">&quot;com.itheima.domain&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">ssfb</span><span class="p">.</span><span class="na">setDataSource</span><span class="p">(</span><span class="n">dataSource</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ssfb</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="c1">//定义bean，返回MapperScannerConfigurer对象</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">MapperScannerConfigurer</span><span class="w"> </span><span class="nf">mapperScannerConfigurer</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">MapperScannerConfigurer</span><span class="w"> </span><span class="n">msc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MapperScannerConfigurer</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">msc</span><span class="p">.</span><span class="na">setBasePackage</span><span class="p">(</span><span class="s">&quot;com.itheima.dao&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">msc</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="_12">整合<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<h4 id="junit">整合JUnit<a class="headerlink" href="#junit" title="Permanent link">&para;</a></h4>
<p>导入坐标</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>4.12<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-test<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>5.2.10.RELEASE<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>一般测试类是在test包下进行创建</p>
<div class="highlight"><pre><span></span><code><span class="c1">//设置类运行器 固定格式</span><span class="w"></span>
<span class="nd">@RunWith</span><span class="p">(</span><span class="n">SpringJUnit4ClassRunner</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="c1">//设置Spring环境对应的配置类  相当于设置对应的配置文件</span><span class="w"></span>
<span class="nd">@ContextConfiguration</span><span class="p">(</span><span class="n">classes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SpringConfig</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AccountServiceTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//支持自动装配注入bean  如果需要使用bean ke&#39;zai</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Autowired</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">AccountService</span><span class="w"> </span><span class="n">accountService</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testFindById</span><span class="p">(){</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testFindAll</span><span class="p">(){</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="jdbc">整合JDBC<a class="headerlink" href="#jdbc" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JdbcConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="nf">dateSourcr</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">DruidDataSource</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSource</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">//相关配置</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ds</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ul>
<li>建议使用独立的配置类管理第三方bean（不要写在SpringConfig中</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JdbcConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="nf">dateSourcr</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">DruidDataSource</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSource</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ds</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//将独立的配置类加入核心配置</span><span class="w"></span>
<span class="c1">//1.导入式（推荐使用）</span><span class="w"></span>
<span class="nd">@Configuration</span><span class="w"></span>
<span class="nd">@Import</span><span class="p">(</span><span class="n">JdbcConfig</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="c1">//此注解只能添加一次，多个数据请使用数组格式</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringConfig</span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//2.扫描式</span><span class="w"></span>
<span class="c1">//在JdbcConfig上面添加@Configuration</span><span class="w"></span>
<span class="c1">//SpringConfig上面import更改为@ComponentScan(&quot;对应的包来进行扫描&quot;)</span><span class="w"></span>
</code></pre></div>
<ul>
<li>如果第三方bean需要使用别的bean时</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">//简单类型</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JdbcConfig</span><span class="p">{</span><span class="w"></span>


<span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;${jdbc.driver}&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">driver</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;${jdbc.url}&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nd">@Value</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;${jdbc.username}&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;$ijdbc.password}&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">;</span><span class="w"></span>

<span class="w">       </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="nf">dateSourcr</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">DruidDataSource</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSource</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">ds</span><span class="p">.</span><span class="na">setDriverClassName</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span><span class="w"></span>
<span class="w">        </span><span class="n">ds</span><span class="p">.</span><span class="na">setUrl</span><span class="p">(</span><span class="n">url</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">ds</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="n">username</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">ds</span><span class="p">.</span><span class="na">setPassword</span><span class="p">(</span><span class="n">password</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ds</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//引用类型注入</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JdbcConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//方法进行传参，对应的参数需要有bean能够获取到，进行了自动装配</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="nf">dateSourcr</span><span class="p">(</span><span class="n">BookDao</span><span class="w"> </span><span class="n">bookDao</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">DruidDataSource</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSource</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">//相关配置</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ds</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="aop">AOP<a class="headerlink" href="#aop" title="Permanent link">&para;</a></h3>
<h4 id="_13">核心概念<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>面向切面编程，一种编程范式，知道开发者如何组织程序结构</p>
</li>
<li>
<p>作用：在<code>不惊动原始设计的基础</code>上为其进行功能<code>增强</code></p>
</li>
<li>Spring理念：无入侵式/无侵入式</li>
<li><strong>编程中，对象与对象之间，方法与方法之间，模块与模块之间都是一个个切面。</strong></li>
</ul>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220715113307702.png" style="zoom:50%;" /></p>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220715113345008.png" alt="image-20220715113345008" style="zoom:50%;" /></p>
<ul>
<li>Aspect（切面）： Aspect 声明类似于 Java 中的类声明，在 Aspect 中会包含着一些 Pointcut 以及相应的 Advice。</li>
<li>Joint point（连接点）：表示在程序中明确定义的点，典型的包括方法调用，对类成员的访问以及异常处理程序块的执行等等，它自身还可以嵌套其它 joint point。</li>
<li>Pointcut（切点）：表示一组 joint point，这些 joint point 或是通过逻辑关系组合起来，或是通过通配、正则表达式等方式集中起来，它定义了相应的 Advice 将要发生的地方。</li>
<li>Advice（增强）：Advice 定义了在 Pointcut 里面定义的程序点具体要做的操作，它通过 before、after 和 around 来区别是在每个 joint point 之前、之后还是代替执行的代码。</li>
<li>Target（目标对象）：织入 Advice 的目标对象.。</li>
<li>Weaving（织入）：将 Aspect 和其他对象连接起来, 并创建 Adviced object 的过程</li>
</ul>
<p>更简明的图</p>
<p><img src="C:\Users\54656\AppData\Roaming\Typora\typora-user-images\image-20220715114232676.png" alt="image-20220715114232676" style="zoom:50%;" /><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220715114328142.png" alt="image-20220715114328142" style="zoom:50%;" />
<img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220715114540720.png" alt="image-20220715114540720" style="zoom:33%;" /></p>
<h4 id="aop_1">AOP入门操作<a class="headerlink" href="#aop_1" title="Permanent link">&para;</a></h4>
<p>开发模式：XML or 注解</p>
<ol>
<li>导入坐标</li>
<li>制作连接点方法（原始操作，Dao接口与实现类）</li>
<li>制作共性功能（通知类与通知）</li>
<li>定义切入点</li>
<li>绑定切入点与通知关系（切面）</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1">//定义通知类，制作通知  类名自定义</span><span class="w"></span>
<span class="nd">@Component</span><span class="w">  </span><span class="c1">//定义为bean</span><span class="w"></span>
<span class="nd">@Aspect</span><span class="w">     </span><span class="c1">//让里面的东西进行生效</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyAdvice</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//定义切入点 方法名随便起</span><span class="w"></span>
<span class="w">    </span><span class="c1">//切入点定义依托一个不具有实际意义的方法进行，即无参数，无返回值，方法体无实际逻辑</span><span class="w"></span>
<span class="w">    </span><span class="c1">//execution括号里面的执行谁就写谁 void代表返回值</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Pointcut</span><span class="p">(</span><span class="s">&quot;execution(void com.itheima.dao.BookDao.update())&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">mm</span><span class="p">(){}</span><span class="w"></span>
<span class="w">    </span><span class="c1">//制作通知</span><span class="w"></span>
<span class="w">    </span><span class="c1">//里面的mm()就绑定了上面的</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Before</span><span class="p">(</span><span class="s">&quot;mm()&quot;</span><span class="p">)</span><span class="o">/</span><span class="nd">@After</span><span class="p">(</span><span class="s">&quot;mm()&quot;</span><span class="p">)</span><span class="c1">//表明是在你指定的方法执行前执行还是执行后执行，配置qie&#39;ru</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">method</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="c1">//实现功能</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="nd">@Configuration</span><span class="w"></span>
<span class="nd">@ComponentScan</span><span class="p">(</span><span class="s">&quot;对应的包&quot;</span><span class="p">)</span><span class="w"></span>
<span class="nd">@EnableAspetJAutoProxy</span><span class="w">  </span><span class="c1">//开启注解式AOP功能</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringConfig</span><span class="p">{}</span><span class="w"></span>
</code></pre></div>
<h4 id="aop_2">AOP切入点表达式<a class="headerlink" href="#aop_2" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>切入点：要进行增强的方法</p>
</li>
<li>
<p>切入点表达式：要进行增强的方法的描述方式</p>
</li>
<li>
<p>描述方法一：执行com.itheima.dao包下的BookDao接口中的无参数的update()方法</p>
<p><code>execution(void com.itheima.dao.BookDao.update())</code></p>
</li>
<li>
<p>描述方法二：执行com.itheima.dao.impl包下的BookDaoImpl类中的无参数update方法</p>
<p><code>execution(void com.itheima.dao.impl.BookDaoImpl.update())</code></p>
</li>
</ul>
<p>切入表达式标准格式：动作关键字（访问修饰符 返回值 包名.类/接口名.方法名（参数）异常名）</p>
<p><code>execution(public User com.itheima.service.UserService.findById(int))</code></p>
<ul>
<li>动作关键字：描述切入点的行为动作，例如execution表示执行到指定切入点</li>
<li>访问修饰符：一般可以省略</li>
<li>返回值</li>
<li>包名，类/接口名，方法名，参数</li>
<li>异常名：方法定义中抛出指定异常，可以省略</li>
</ul>
<p>通配符</p>
<p>可以使用通配符描述切入点，快速描述</p>
<ul>
<li>* ：单个独立的任意符号，可以独立出现，也可以作为前缀或者后缀的匹配符出现</li>
</ul>
<p><code>execution (public * com.itheima.UserService.find*(*))</code></p>
<p>匹配com.itheima包下的任意包中的UserService类或接口（<code>一般为接口</code>）中所有find开头的带有一个参数的方法</p>
<ul>
<li>.. ：多个连续的任意符号，可以独立出现，常用于简化包名与参数的书写</li>
</ul>
<p><code>execution (public User com..UserService.findById(..))</code></p>
<p>匹配com包下的任意包中的UserService类或接口中所有名称为finById的方法，有任意个参数</p>
<ul>
<li>+ ：专用于匹配子类型</li>
</ul>
<p><code>execution (* *..*Service+.*(..))</code></p>
<p>任意返回值，任意包下的以service结尾的接口/类的子类的任意方法</p>
<p>书写技巧<img alt="image-20220715193421976" src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220715193421976.png" /></p>
<h4 id="aop_3">AOP通知类型<a class="headerlink" href="#aop_3" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>AOP通知描述了抽取的共性功能，根据共性功能抽取的位置不同，最终运行代码时要将其加入到合适的位置</p>
</li>
<li>
<p>AOP通知分为五种类型</p>
</li>
<li>
<p>前置通知 <code>@Before</code></p>
</li>
<li>
<p>后置通知 <code>@After</code>  两者上面已经介绍过</p>
</li>
<li>
<p>环绕通知 <code>@Around</code>（重点</p>
<div class="highlight"><pre><span></span><code><span class="c1">//参数的传递是必须的，设置了对应的方法在何处实现</span><span class="w"></span>
<span class="c1">//由于无法预知原始方法运行后是否会抛出异常，因此环绕通知方法必须抛出ThrowAble对象</span><span class="w"></span>
<span class="nd">@Around</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">around</span><span class="p">(</span><span class="n">ProceedingIoinPoint</span><span class="w"> </span><span class="n">pjp</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//逻辑功能的实现</span><span class="w"></span>
<span class="w">    </span><span class="n">Object</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pjp</span><span class="p">.</span><span class="na">proceed</span><span class="p">();</span><span class="c1">//此功能在逻辑功能实现中穿插，对应调用了Around中的方法，如果对应的方法的返回值是void则res为null，返回值设置为void也可以</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">res</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</li>
<li>
<p>返回后通知 <code>@AfterReturning</code>（了解</p>
<p>方法完全结束时运行，与 <code>@After</code> 没差太多，区别是返回后通知只有方法没有抛出异常是会实现</p>
</li>
<li>
<p>抛出异常后通知 <code>@AfterThrowing</code> 但是异常并不会解除（了解</p>
</li>
</ul>
<h4 id="aop_4">AOP通知获取数据<a class="headerlink" href="#aop_4" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>获取切入点参数</p>
</li>
<li>
<p>JoinPoint：适用于前置、后置、返回后、抛出异常后通知</p>
<div class="highlight"><pre><span></span><code><span class="c1">//定义通知类，制作通知  类名自定义</span><span class="w"></span>
<span class="nd">@Component</span><span class="w">  </span><span class="c1">//定义为bean</span><span class="w"></span>
<span class="nd">@Aspect</span><span class="w">     </span><span class="c1">//让里面的东西进行生效</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyAdvice</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Pointcut</span><span class="p">(</span><span class="s">&quot;execution(void com.itheima.dao.BookDao.update())&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">mm</span><span class="p">(){}</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Before</span><span class="p">(</span><span class="s">&quot;mm()&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">method</span><span class="p">(</span><span class="n">JionPoint</span><span class="w"> </span><span class="n">jp</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jp</span><span class="p">.</span><span class="na">getArgs</span><span class="p">();</span><span class="c1">//获取绑定的方法传入的参数</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</li>
<li>
<p>ProceedJoinPoint（上面这个的子接口）：适用与环绕通知</p>
<div class="highlight"><pre><span></span><code><span class="c1">//定义通知类，制作通知  类名自定义</span><span class="w"></span>
<span class="nd">@Component</span><span class="w">  </span><span class="c1">//定义为bean</span><span class="w"></span>
<span class="nd">@Aspect</span><span class="w">     </span><span class="c1">//让里面的东西进行生效</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyAdvice</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Pointcut</span><span class="p">(</span><span class="s">&quot;execution(void com.itheima.dao.BookDao.update())&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">mm</span><span class="p">(){}</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Around</span><span class="p">(</span><span class="s">&quot;mm()&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">method</span><span class="p">(</span><span class="n">ProceedingJionPoint</span><span class="w"> </span><span class="n">pjp</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pjp</span><span class="p">.</span><span class="na">getArgs</span><span class="p">();</span><span class="c1">//获取绑定的方法传入的参数</span><span class="w"></span>
<span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pjp</span><span class="p">.</span><span class="na">proceed</span><span class="p">()</span><span class="c1">//执行方法， 里面可以穿传入args，不对args进行修改的话，不传参数也一样，修改了args中的内容后绑定的对应方法传入的参数进行了改变</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">res</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</li>
<li>
<p>获取切入点方法返回值</p>
</li>
<li>
<p>返回后通知</p>
<div class="highlight"><pre><span></span><code><span class="c1">//定义通知类，制作通知  类名自定义</span><span class="w"></span>
<span class="nd">@Component</span><span class="w">  </span><span class="c1">//定义为bean</span><span class="w"></span>
<span class="nd">@Aspect</span><span class="w">     </span><span class="c1">//让里面的东西进行生效</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyAdvice</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Pointcut</span><span class="p">(</span><span class="s">&quot;execution(void com.itheima.dao.BookDao.update())&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">mm</span><span class="p">(){}</span><span class="w"></span>
<span class="w">    </span><span class="nd">@AfterRuturning</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;mm()&quot;</span><span class="p">,</span><span class="n">returning</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ret&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="c1">//ret用来获取绑定的方法的返回值</span><span class="w"></span>
<span class="w">    </span><span class="c1">//上面的ret必须与传入的形参的名称一致，如果需要使用JionPoint这个参数必须在前面</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">method</span><span class="p">(</span><span class="n">JionPoint</span><span class="w"> </span><span class="n">jp</span><span class="p">,</span><span class="n">Object</span><span class="w"> </span><span class="n">ret</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="c1">//ret就代表绑定的方法的返回值</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</li>
<li>
<p>环绕通知</p>
<p>直接使用<code>Object ret = pjp.peoceed();</code>获取原方法的返回值即可</p>
</li>
<li>
<p>获取原始异常（了解即可</p>
</li>
<li>
<p>抛出异常后通知</p>
<div class="highlight"><pre><span></span><code><span class="nd">@AfterThrowing</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;pt()&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">throwing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;t&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">afterThrowing</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">t</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="c1">//使用异常即可</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</li>
<li>
<p>环绕通知</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Around</span><span class="p">(</span><span class="s">&quot;pt()&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">around</span><span class="p">(</span><span class="n">ProceedingJoinPoint</span><span class="w"> </span><span class="n">pjp</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="n">Object</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">try</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">ret</span><span class="o">=</span><span class="n">pjp</span><span class="p">.</span><span class="na">proceed</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">t</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</li>
</ul>
<h3 id="_14">事务<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">//Spring提供的接口</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">PlatformTransactionManager</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//提交事务</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">commit</span><span class="p">(</span><span class="n">TransactionStatus</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">TransactionException</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="c1">//回滚事务</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">rollback</span><span class="p">(</span><span class="n">TransactionStatus</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">TransactionException</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//Spring提供的实现类，使用的是jdbc的事务</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DataSourcrTransactionManager</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>在你要使用的地方添加注解，开启Spring的事务管理</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">AccountService</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Transactional</span><span class="c1">//一般写到接口上方</span><span class="w"></span>
<span class="w">    </span><span class="c1">//模拟银行的转账</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">transfer</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">out</span><span class="p">,</span><span class="n">String</span><span class="w"> </span><span class="n">in</span><span class="p">,</span><span class="n">Double</span><span class="w"> </span><span class="n">money</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">//Spring注解式事务通常添加在业务层接口中而不会添加到业务层实现类中，降低耦合性</span><span class="w"></span>
<span class="c1">//注解式事务可以添加到业务方法上表示当前方法开启事务，也可以添加到接口上表示当前接口所有方法开启事务</span><span class="w"></span>
</code></pre></div>
<ol>
<li>设置事务管理器</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1">//使用DataSource是必须的</span><span class="w"></span>
<span class="c1">//DataSource会自动进行获取，进行了连接数据库</span><span class="w"></span>
<span class="nd">@Bean</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">PlatformTransactionManager</span><span class="w"> </span><span class="nf">transactionManager</span><span class="p">(</span><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="n">DataSourceTransactionManager</span><span class="w"> </span><span class="n">ptm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSourceTransactionManager</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">ptm</span><span class="p">.</span><span class="na">setDataSource</span><span class="p">(</span><span class="n">dataSource</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ptm</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>开启注解式事务驱动</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span><span class="c1">//开启注解</span><span class="w"></span>
<span class="nd">@ComponentScan</span><span class="p">(</span><span class="s">&quot;com.itheima&quot;</span><span class="p">)</span><span class="c1">//bean扫描</span><span class="w"></span>
<span class="nd">@PropertySource</span><span class="p">(</span><span class="s">&quot;classpath:jdbc.properties&quot;</span><span class="p">)</span><span class="c1">//扫描properties文件</span><span class="w"></span>
<span class="nd">@Import</span><span class="p">({</span><span class="n">JdbcConfig</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">Mybatis</span><span class="p">.</span><span class="na">class</span><span class="p">})</span><span class="c1">//导入独立的配置</span><span class="w"></span>
<span class="nd">@EnableTransactionManangement</span><span class="c1">//开启事务</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringConfig</span><span class="p">{}</span><span class="w"></span>
</code></pre></div>
<p>事务相关配置
<img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220716214348838.png" alt="image-20220716214348838" style="zoom:50%;" /></p>
<div class="highlight"><pre><span></span><code><span class="c1">//设置事务回滚异常，只有遇到Error和运行时异常时事务会自动回滚，其他的事务回滚会不触发</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">AccountService</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Transactional</span><span class="p">(</span><span class="n">rollbackFor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">IOException</span><span class="p">.</span><span class="na">class</span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="c1">//模拟银行的转账</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">transfer</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">out</span><span class="p">,</span><span class="n">String</span><span class="w"> </span><span class="n">in</span><span class="p">,</span><span class="n">Double</span><span class="w"> </span><span class="n">money</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//事务传播行为</span><span class="w"></span>
<span class="nd">@Service</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LogServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">LogService</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Autowired</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LogDao</span><span class="w"> </span><span class="n">logDao</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="c1">//当你需要开启一个新的事务时使用下面的这一句</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Transactional</span><span class="p">(</span><span class="n">propagation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Propagation</span><span class="p">.</span><span class="na">RrQUIRES_NEW</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">out</span><span class="p">,</span><span class="n">String</span><span class="w"> </span><span class="n">in</span><span class="p">,</span><span class="n">Double</span><span class="w"> </span><span class="n">money</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">logDao</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&quot;转账操作由&quot;</span><span class="o">+</span><span class="n">out</span><span class="o">+</span><span class="s">&quot;到&quot;</span><span class="o">+</span><span class="n">in</span><span class="o">+</span><span class="s">&quot;，金额&quot;</span><span class="o">+</span><span class="n">money</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h2 id="springmvc">SpringMvc<a class="headerlink" href="#springmvc" title="Permanent link">&para;</a></h2>
<p>SpringMVC技术与Servlet技术功能相同，均属于web层开发技术，使用简单，开发便捷</p>
<h3 id="_15">入门案例<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<ol>
<li>先导入SpringMVC坐标和Servler坐标</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
 <span class="nt">&lt;groupId&gt;</span>javax.servlet<span class="nt">&lt; /groupId&gt;</span>
 <span class="nt">&lt;artifactId&gt;</span>javax.servlet-api<span class="nt">&lt;/ artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>3.1.0<span class="nt">&lt;/version&gt;</span>
 <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt; / scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
 <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-webmvc<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>5.2.10.RELEASE<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<ol>
<li>创建SpringMVC控制器类</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Controller</span><span class="c1">//设定SpingMvc的核心控制器bean</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserController</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/save&quot;</span><span class="p">)</span><span class="c1">//设置访问路径</span><span class="w"></span>
<span class="w">    </span><span class="nd">@ResponseBody</span><span class="c1">//设置当前控制器方法响应内容为当前返回值，无需解析</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">save</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="c1">//需要返回的数据直接返回即可</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>初始化SpringMVC环境，设定SpringMVC加载对应的bean</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span><span class="w"></span>
<span class="nd">@ComponentScan</span><span class="p">(</span><span class="s">&quot;包扫描&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringMvcConfig</span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220717172117889.png" alt="image-20220717172117889" style="zoom:50%;" />
   另一种写法更加简便</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ServletContainersInitConfig</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractAnnotationConfigDispatcherServletInitializer</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;[]</span><span class="w"> </span><span class="n">getRootConfigClasses</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;[]</span><span class="w"> </span><span class="n">getServletConfigClasses</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Class</span><span class="o">[]</span><span class="p">{</span><span class="n">SpringMvcConfig</span><span class="p">.</span><span class="na">class</span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">getServletMappings</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="p">{</span><span class="s">&quot;/&quot;</span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="c1">//上面是另一种写法 下面的是解决乱码问题的</span><span class="w"></span>
<span class="w">    </span><span class="c1">//乱码处理</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Override</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">Filter</span><span class="o">[]</span><span class="w"> </span><span class="nf">getServletFilters</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">CharacterEncodingFilter</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CharacterEncodingFilter</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">filter</span><span class="p">.</span><span class="na">setEncoding</span><span class="p">(</span><span class="s">&quot;UTF-8&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Filter</span><span class="o">[]</span><span class="p">{</span><span class="n">filter</span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//此写法以后基本固定</span><span class="w"></span>
</code></pre></div>
<p>SpringMVC有其管理的bean，Spring也有其管理的bean，防止两者起冲突</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span><span class="w"></span>
<span class="nd">@ComponentScan</span><span class="p">(</span><span class="s">&quot;com.itheima.controller&quot;</span><span class="p">)</span><span class="c1">//SpringMVC的管理bean</span><span class="w"></span>
<span class="nd">@EnableWebMvc</span><span class="c1">//开启了好多东西，比如JSON转换为对象</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringMvcConfig</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@Configuration</span><span class="w"></span>
<span class="c1">//@ComponentScan({&quot;com.itheima.service&quot;,&quot;com.itheima.dao&quot;})  方法一。</span><span class="w"></span>
<span class="c1">//设置spring配置类加载bean时的过滤规则，当前要求排除掉表现层对应的bean</span><span class="w"></span>
<span class="c1">//excludeFilters属性：设置扫描加载bean时，排除的过滤规则</span><span class="w"></span>
<span class="c1">//type属性：设置排除规则，当前使用按照bean定义时的注解类型进行排除</span><span class="w"></span>
<span class="c1">//classes属性：设置排除的具体注解类，当前设置排除@Controller定义的bean</span><span class="w"></span>
<span class="nd">@ComponentScan</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;com.itheima&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">excludeFilters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nd">@ComponentScan.Filter</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FilterType</span><span class="p">.</span><span class="na">ANNOTATION</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">classes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Controller</span><span class="p">.</span><span class="na">class</span><span class="w"></span>
<span class="w">    </span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w">  </span><span class="c1">//Spring管理的bean</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringConfig</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//第三种：不区分Spring和SpringMVC的环境，加载到同一个环境中</span><span class="w"></span>
</code></pre></div>
<h3 id="rest">REST风格<a class="headerlink" href="#rest" title="Permanent link">&para;</a></h3>
<p>REST，表现形式状态转换</p>
<ul>
<li>传统风格资源描述形式</li>
</ul>
<p>http://localhost/user/getById?id=1</p>
<p>http://localhost/user/saveUser</p>
<ul>
<li>REST风格描述</li>
</ul>
<p>http://localhost/user/1</p>
<p>http://localhost/user</p>
<ul>
<li>
<p>优点：</p>
</li>
<li>
<p>隐藏资源的访问行为，无法通过地址得知对资源是何种操作</p>
</li>
<li>书写简化</li>
</ul>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220717234654942.png" alt="image-20220717234654942" style="zoom:50%;" />
GET可以简写为@GetMapping，其他同理    </p>
<ol>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220718102636355.png" alt="image-20220718102636355" style="zoom:50%;" /></li>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220718102702218.png" alt="image-20220718102702218" style="zoom:50%;" /></li>
</ol>
<h4 id="requestparam-requestbody-pathvariable">@RequestParam  @RequestBody   @PathVariable<a class="headerlink" href="#requestparam-requestbody-pathvariable" title="Permanent link">&para;</a></h4>
<ul>
<li>区别</li>
<li>
<p>@RequestParam 用于接收url地址传参或表单传参，</p>
<p>只有一个数据或者数据时使用</p>
<p>传来的是数组使用 List 接收</p>
</li>
<li>
<p>@RequestBody  用于接受json数据</p>
</li>
<li>
<p>@PathVariable 用于接收路径参数，实用{参数名称}描述路径参数 </p>
</li>
<li>
<p>应用</p>
</li>
<li>后期开发中，发送请求参数超过1个时，以json格式为主，@RequestBody 应用较广</li>
<li>如果使用非JSON格式数据，选用@RequestParam接受请求参数</li>
<li>采用RESTful进行开发，当参数数量较少时，例如一个，可以采用@PathVariable接受请求路径变量，通常用于传递id值</li>
</ul>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220718174240916.png" alt="image-20220718174240916" style="zoom:50%;" /></p>
<h3 id="_16">请求参数<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<ul>
<li>普通参数：url地址传参，地址参数与形参变量名相同，定义形参即可接受参数</li>
</ul>
<div class="highlight"><pre><span></span><code>Get请求
http://localhost/commonParam?name=itcast              单个参数的形式
http://localhost/commonParam?name=itcast&amp;age=15       多个参数的形式  
Post请求传入的数据与方法中的参数一直即可
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@RestController</span><span class="w"></span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/commonParam&quot;</span><span class="p">)</span><span class="w">       </span><span class="c1">//设置了访问路径</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserController</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//与url传来的参数名字相同即可，url有多个参数，方法中就配多少个参数</span><span class="w"></span>
<span class="w">    </span><span class="c1">//如传来的参数名字为name，形参的名字为username用此办法解决参数不一致的情况</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">commonParam</span><span class="p">(</span><span class="nd">@RequestPaam</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">userName</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ul>
<li>pojo数据类型</li>
</ul>
<p>简单数据类型一般处理的是参数个数比较少的请求，如果参数比较多，那么后台接收参数的时候就比较复杂，这个时候我们可以考虑使用POJO数据类型。</p>
<p>POJO参数：请求参数名与形参对象属性名相同，定义POJO类型形参即可接收参数</p>
<p><strong>对应名称必须一致</strong></p>
<div class="highlight"><pre><span></span><code>http://localhost/commonParam?name=itcast&amp;age=15
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">user</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//后台接收参数</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">pojoParam</span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">){</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ul>
<li>嵌套pojo类型参数</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Address</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">province</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">user</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>发送请求接受数据
http://localhost/commonParam?province=henan&amp;user.name=java
</code></pre></div>
<ul>
<li>数组参数请求：请求参数名与形参对象属性名相同且请求参数为多个，定义数组类型即可接收参数</li>
</ul>
<div class="highlight"><pre><span></span><code>http://localhost/commonParam?like=lanqiu&amp;like=pingpong
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">arrayParam</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">likes</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;{&#39;module&#39;:&#39;array param&#39;}&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//此处的返回值无所谓</span><span class="w"></span>
</code></pre></div>
<ul>
<li>集合参数类型</li>
</ul>
<div class="highlight"><pre><span></span><code>http://localhost/commonParam?like=lanqiu&amp;like=pingpong
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">listParam</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">likes</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;{&#39;module&#39;:&#39;list param&#39;}&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><code>@RequestParam</code>必须使用，否则SpringMvc会将list看成一个pojo对象处理</p>
<h3 id="web">web端页面解除过滤<a class="headerlink" href="#web" title="Permanent link">&para;</a></h3>
<p>SpringMVC对静态资源进行放行</p>
<div class="highlight"><pre><span></span><code><span class="c1">//一般放在config包下</span><span class="w"></span>
<span class="nd">@Configuration</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringMvcSupport</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">WebMvcConfigurationSupport</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//设置静态资源访问过滤，当前类需要设置为配置类，并被扫描加载</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Override</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">addResourceHandlers</span><span class="p">(</span><span class="n">ResourceHandlerRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="c1">//当访问/pages/????时候，从/pages目录下查找内容</span><span class="w"></span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">addResourceHandler</span><span class="p">(</span><span class="s">&quot;/pages/**&quot;</span><span class="p">).</span><span class="na">addResourceLocations</span><span class="p">(</span><span class="s">&quot;/pages/&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">addResourceHandler</span><span class="p">(</span><span class="s">&quot;/js/**&quot;</span><span class="p">).</span><span class="na">addResourceLocations</span><span class="p">(</span><span class="s">&quot;/js/&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">addResourceHandler</span><span class="p">(</span><span class="s">&quot;/css/**&quot;</span><span class="p">).</span><span class="na">addResourceLocations</span><span class="p">(</span><span class="s">&quot;/css/&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">registry</span><span class="p">.</span><span class="na">addResourceHandler</span><span class="p">(</span><span class="s">&quot;/plugins/**&quot;</span><span class="p">).</span><span class="na">addResourceLocations</span><span class="p">(</span><span class="s">&quot;/plugins/&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//在SpringConfig中对其进行扫描</span><span class="w"></span>
</code></pre></div>
<h3 id="_17">表现层数据封装<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>为了避免前端获取数据麻烦，定义一个数据结果返回类</p>
<div class="highlight"><pre><span></span><code><span class="c1">//例：</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">result</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">data</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">code</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="c1">//一般会有三个构造方法</span><span class="w"></span>
<span class="w">    </span><span class="c1">//public result(){}</span><span class="w"></span>
<span class="w">    </span><span class="c1">//public result(Integer i, Object o){}</span><span class="w"></span>
<span class="w">    </span><span class="c1">//public resule(Integer i, Object o, msg m){}   一个传信息，一个不传信息</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//result类中的字段不固定，可以根据需要自行删减</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">result</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Boolean</span><span class="w"> </span><span class="n">flag</span><span class="p">;</span><span class="c1">//代表是否查询成功</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">date</span><span class="p">;</span><span class="c1">//dai</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="_18">异常处理器<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220718234213908.png" alt="image-20220718234213908" style="zoom:50%;" /></p>
<ol>
<li>各个层级均会出现异常，异常处理代码书写在那一层</li>
</ol>
<p>所有的异常均抛出到表现层进行处理</p>
<ol>
<li>表现层处理异常，每个方法单独书写，代码书写量巨大且意义不强，如何解决？</li>
</ol>
<p>AOP思想</p>
<p>异常处理器</p>
<ul>
<li>集中的，统一的处理项目中出现的异常，一般统一处理到表现层</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">//一边写到controller包内 如不写在这里记得再SpringMVC里扫描到其所在的包</span><span class="w"></span>
<span class="nd">@RestControllerAdvice</span><span class="w"></span>
<span class="c1">//因为我们上面使用了rest风格就要使用这种，如不使用rest风格去掉rest即可</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProjectExceptionAdvice</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//定义处理哪一种异常，比如下面就是处理Exception异常</span><span class="w"></span>
<span class="w">    </span><span class="c1">//如不添加就是拦截所有的异常</span><span class="w"></span>
<span class="w">    </span><span class="nd">@ExceptionHandler</span><span class="p">(</span><span class="n">Exception</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="nf">doReception</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="c1">//  处理异常</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">result</span><span class="p">();</span><span class="c1">//返回一个信息</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="o">-----------------------</span><span class="w"></span>
<span class="nd">@ControllerAdvice</span><span class="p">(</span><span class="n">annotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">RestController</span><span class="p">.</span><span class="na">class</span><span class="p">})</span><span class="w"></span>
<span class="c1">//处理对应的使用了RestController的注解的</span><span class="w"></span>
<span class="c1">//等同@RestControllerAdvice</span><span class="w"></span>
</code></pre></div>
<p>那么业务层，数据层怎么集中到处理层处理呢？</p>
<ul>
<li>项目异常分类</li>
<li>业务异常（BusinessException）<ul>
<li>规范的用户行为产生的一场</li>
<li>不规范的用户行为操作产生的异常</li>
</ul>
</li>
<li>系统异常（SystemException）<ul>
<li>项目运行过程中可预计且无法避免的异常</li>
</ul>
</li>
<li>
<p>其他异常（Exception）</p>
<ul>
<li>编程人员未预期到的异常</li>
</ul>
</li>
<li>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719123247924.png" alt="image-20220719123247924" style="zoom:33%;" /></p>
</li>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719123303905.png" alt="image-20220719123303905" style="zoom:33%;" /></li>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719123310677.png" alt="image-20220719123310677" style="zoom:33%;" /></li>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719123354772.png" alt="image-20220719123354772" style="zoom:33%;" /></li>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719123409095.png" alt="image-20220719123409095" style="zoom:33%;" /></li>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719124020027.png" alt="image-20220719124020027" style="zoom:33%;" /></li>
</ul>
<h3 id="_19">拦截器<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<ul>
<li>拦截器（Interceptor）是一种动态拦截方法调用的机制</li>
<li>作用：</li>
<li>在指定的方法调用前后执行预先设定好的代码</li>
<li>组织原始方法的执行</li>
<li>拦截器与过滤器区别</li>
<li>归属不同：Filter属于Servlet技术，Interceptor属于SpringMVC技术</li>
<li>拦截内容不同：Filter对所有访问进行增强，Interceptor仅针对于SpringMVC的访问进行增强</li>
</ul>
<h4 id="_20">入门案例<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h4>
<ol>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719215253878.png" alt="image-20220719215253878" style="zoom:50%;" /></li>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719215808307.png" alt="image-20220719215808307" style="zoom:50%;" /></li>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719215918153.png" alt="image-20220719215918153" style="zoom:50%;" /></li>
</ol>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719220157598.png" alt="image-20220719220157598" style="zoom:50%;" /></p>
<p>拦截器链</p>
<ul>
<li>
<p>当配置多个拦截器时，形成拦截器链</p>
</li>
<li>
<p>拦截器的运行顺序参照拦截器添加顺序为准</p>
</li>
<li>
<p>当拦截器中出现对原始处理器的拦截，后面的拦截器均终止运行</p>
</li>
<li>
<p>当拦截器运行中断，仅配置在前面的拦截器的afterCompletion操作</p>
</li>
</ul>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220719222744043.png" alt="image-20220719222744043" style="zoom:50%;" /></p>
<h2 id="springboot">SpringBoot<a class="headerlink" href="#springboot" title="Permanent link">&para;</a></h2>
<p><img alt="image-20220721102105670" src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220721102105670.png" /></p>
<p>SpringBoot项目快速启动</p>
<ol>
<li>
<p>对SpringBoot项目打包（执行Maven构建指令package）</p>
</li>
<li>
<p>在对应生成 jar 包的目录下使用 cmd 命令  <code>java -jar 文件名.jar</code></p>
</li>
</ol>
<p>jar 支持命令行启动需要依赖maven插件支持，请确认打包时是否具有SpringBoot对应的maven插件</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;build&gt;</span>
 <span class="nt">&lt;plugins&gt;</span>
     <span class="nt">&lt;plugin&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div>
<h3 id="_21">起步依赖<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<ul>
<li>starter</li>
</ul>
<p>SpringBoot中常见项目定义，定义了当前项目使用的所有项目坐标，以达到减少以来配置的目的</p>
<ul>
<li>使用任意坐标时，仅书写<code>groupId</code>和 <code>artifactId</code>，<code>version</code>则不用写（SpringBoot中写了超级多依赖）</li>
</ul>
<p>如发生坐标错误，再指定version（要小心版本冲突）</p>
<h3 id="_22">辅助功能<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<p>使用maven依赖管理变更起步依赖项</p>
<p><img alt="" src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220721112645360.png" /></p>
<h3 id="_23">基础配置<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<p>配置文件中如果写了中文，打包时可能会报错，可在IDEA中修改编码格式来进行解决
设置中搜索编码，将里面的编码一类的改为<code>UTF-8</code></p>
<ul>
<li>
<p>配置文件格式</p>
</li>
<li>
<p>SpringBoot提供了多种属性配置方式</p>
<ul>
<li>application.properties</li>
</ul>
<p><code>server.port=80</code></p>
<ul>
<li>application.yml</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">server</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">//此处使用的代码格式是yaml的其实yaml和yml差不多</span><span class="w"></span>
</code></pre></div>
<ul>
<li>application.yaml</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">server</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
</code></pre></div>
<p>优先级顺序是从上到下的</p>
<p>在使用时，通过关键字 + 提示修改属性</p>
<p>一般使用yml格式的配置文件</p>
<p>使用yml格式的文件配置时自动提示功能消失</p>
</li>
<li>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220721133955464.png" alt="image-20220721133955464" style="zoom:50%;" /></p>
</li>
</ul>
<h4 id="mavenspringboot">Maven与SpringBoot关联操作（多环境配置<a class="headerlink" href="#mavenspringboot" title="Permanent link">&para;</a></h4>
<ol>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220722221627509.png" alt="image-20220722221627509" style="zoom:50%;" /></li>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220722221730868.png" alt="image-20220722221730868" style="zoom:50%;" /></li>
<li><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220722221821912.png" alt="image-20220722221821912" style="zoom:50%;" /></li>
</ol>
<h3 id="springbootjunit">SpringBoot整合JUnit<a class="headerlink" href="#springbootjunit" title="Permanent link">&para;</a></h3>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220722230846447.png" alt="image-20220722230846447" style="zoom:50%;" /></p>
<p>如果测试类再SpringBoot启动类的包或子包中，可以省略启动类的设置，也就是省略classes的设定</p>
<p>否则要这样写<img alt="image-20220722231157335" src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220722231157335.png" /></p>
<h3 id="sprintbootmybatis">SprintBoot整合Mybatis<a class="headerlink" href="#sprintbootmybatis" title="Permanent link">&para;</a></h3>
<p>Mapper/Dao层，pojo自己提供，配置文件配置一下用户名密码等必须的东西</p>
<p>Mapper层需要添加注解 <code>@Mapper</code></p>
<p>配置文件使用 <code>yaml</code>格式
<img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220723094355806.png" alt="image-20220723094355806" style="zoom:67%;" /></p>
<p>druid坐标需要自己添加</p>
<p>配置结束</p>
<h3 id="springbootmybatisplus">SpringBoot整合MybatisPlus<a class="headerlink" href="#springbootmybatisplus" title="Permanent link">&para;</a></h3>
<p><a href="#  MybatisPlus">MybatisPlus</a></p>
<h3 id="springbootdruid">SpringBoot整合Druid<a class="headerlink" href="#springbootdruid" title="Permanent link">&para;</a></h3>
<p>导入坐标</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>druid-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.2.11<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>配置文件配置</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 推荐使用</span><span class="w"></span>
<span class="nt">spring</span><span class="p">:</span><span class="w"> </span>
<span class="w"> </span><span class="nt">datasource</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="nt">druid</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.mysql.cj.jdbc.Driver</span><span class="w"></span>
<span class="w">   </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jdbc:mysql://localhost:3306/数据库名</span><span class="w"></span>
<span class="w">   </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<span class="w">   </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">密码</span><span class="w"></span>
<span class="c1"># 或者</span><span class="w"></span>
<span class="nt">spring</span><span class="p">:</span><span class="w"> </span>
<span class="w"> </span><span class="nt">datasource</span><span class="p">:</span><span class="w"> </span>
<span class="w">   </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.mysql.cj.jdbc.Driver</span><span class="w"></span>
<span class="w">   </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jdbc:mysql://localhost:3306/数据库名</span><span class="w"></span>
<span class="w">   </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<span class="w">   </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">密码</span><span class="w"></span>
<span class="w">   </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.alibaba.druid.pool.DruidDataSource</span><span class="w"></span>
</code></pre></div>
<h3 id="_24">整合任意第三方技术<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<ul>
<li>导入对应的starter</li>
<li>配置对应的设置或采用默认配置</li>
</ul>
<h2 id="springboot_1">SpringBoot运维实用篇<a class="headerlink" href="#springboot_1" title="Permanent link">&para;</a></h2>
<h3 id="_25">打包与运行<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h3>
<h4 id="windows">程序打包与运行（Windows版<a class="headerlink" href="#windows" title="Permanent link">&para;</a></h4>
<ol>
<li>点击package进行打包，打包时点击切换跳过测试模式，不会执行test包内的测试类</li>
</ol>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220726120212767.png" alt="image-20220726120212767" style="zoom:50%;" /></p>
<ol>
<li>运行项目</li>
</ol>
<p><code>java -jar 工程名.jar</code></p>
<p>jar支持命令行启动需要依赖maven插件支持，请确认打包时是否具有SpringBoot对应的maven插件</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div>
<p>命令行启动常见问题及解决方案</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 查询端口</span>
netstat -ano
<span class="c1"># 查询指定端口 推荐使用 是模糊查询</span>
netstat -ano <span class="p">|</span> findstr <span class="s2">&quot;端口号&quot;</span>
<span class="c1"># 根据进程PID查询进程名称  可以使用一下查看了解，可以查看谁在用</span>
tasklist <span class="p">|</span> findstr <span class="s2">&quot;进程PID号&quot;</span>
<span class="c1"># 根据PID杀死任务</span>
taskkill -f -pid <span class="s2">&quot;进程PID号&quot;</span>
<span class="c1"># 根据进程名称杀死任务  进程名称可能对应着多个进程，会一下杀掉完</span>
taskkill -f -t -im <span class="s2">&quot;进程名称&quot;</span>
</code></pre></div>
<h4 id="linux">程序运行（Linux版<a class="headerlink" href="#linux" title="Permanent link">&para;</a></h4>
<h3 id="_26">配置高级<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<h4 id="_27">临时属性设置<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h4>
<p>使用 jar 命令启动 SpringBoot 工程时可以使用临时属性替换配置文件中的属性</p>
<p>比如写好的配置文件中的端口号为80，但是你的80端口有更重要的东西在运行，就可以使用临时属性来设置</p>
<p>使用cmd运行时添加后缀即可</p>
<p><code>java -jar 项目名.jar --server.port=8080</code></p>
<p>就使得使用的端口为8080</p>
<p>使用规则 <code>--对应的属性文件中的设置</code> 只不过是从yaml格式转换为了properties文件格式</p>
<p>要想配置更多的属性继续在后面使用 <code>--配置</code></p>
<p>临时属性必须时当前boot工程支持的属性，否则设置无效</p>
<hr />
<p>我们可以通过编程形式带参数启动SpringBoot程序，为程序添加运行参数</p>
<div class="highlight"><pre><span></span><code><span class="c1">//设置以后通过cmd命令也无法使用临时参数</span><span class="w"></span>
<span class="nd">@SpringBootApplication</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpringBootDemoApplication</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">arg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="c1">//将端口号设置为8080</span><span class="w"></span>
<span class="w">        </span><span class="n">arg</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;--server.port=8080&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">SpringBootDemoApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">arg</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//不携带参数启动时，去掉方法里面的arg</span><span class="w"></span>
</code></pre></div>
<h4 id="_28">配置文件分类<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<p>SpringBoot中4级配置文件</p>
<p>级别从上到下依次降低   配置文件是互补的</p>
<ol>
<li>打包出来的 jar 包所在文件夹内创建 config/application.yml 进行配置  </li>
<li>jar 包所在的文件夹中的配置文件 application.yml</li>
<li>工程中配置文件所在的文件夹内新建  config/application.yml</li>
<li>
<p>配置文件</p>
</li>
<li>
<p>一级与二级留作系统打包后设置通用属性，一级常用于运维经理进行线上整体项目部署方案调控</p>
</li>
<li>三级与四级用于系统开发阶段设置通用属性，三级常用于项目经理进行整体项目属性调控</li>
</ol>
<h3 id="_29">多环境开发<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<p>在一个项目中一般会有生产，开发，测试三个环境，如何切换使用的</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">profiles</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span><span class="w">  </span><span class="c1">#表明当前使用的环境</span><span class="w"></span>
<span class="nn">---</span><span class="w"> </span><span class="c1"># 用于区分环境，如不添加会报错</span><span class="w"></span>
<span class="nt">spring</span><span class="p">:</span><span class="w">             </span>
<span class="w">  </span><span class="nt">profile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dev</span><span class="w">    </span><span class="c1"># 环境的名字</span><span class="w"></span>
<span class="nt">server</span><span class="p">:</span><span class="w">             </span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
<span class="nn">---</span><span class="w"></span>
<span class="nt">spring</span><span class="p">:</span><span class="w">                 </span>
<span class="w">  </span><span class="nt">profile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span><span class="w">         </span><span class="c1">#设置生产环境</span><span class="w"></span>
<span class="nt">server</span><span class="p">:</span><span class="w">                 </span><span class="c1">#生产环境具体参数设定</span><span class="w"></span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">81</span><span class="w"></span>
</code></pre></div>
<p>也可拆分来写</p>
<p>每一个独立的配置与原配置文件所在层级相同，命名为 <code>application-名字.yml</code>
然后再application.yml中进行配置具体使用哪一个配置文件</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">profiles</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span><span class="w">  </span><span class="c1">#表明当前使用的环境</span><span class="w"></span>
</code></pre></div>
<p>application.yml是主环境配置文件其余的是环境分类配置文件</p>
<p>主环境文件中设置公共配置（全局</p>
<p>环境分类配置文件中常用于设置冲突属性（局部</p>
<p>properties配置文件基本相同</p>
<ul>
<li>
<p>一般根据功能对配置文件中的信息进行拆分，并制作成独立的配置文件，命名规则如下</p>
</li>
<li>
<p>application-devMVC.yml</p>
</li>
<li>
<p>使用include属性再激活指定环境的情况下，同时对多个环境进行加载使其生效，多个环境使用逗号分隔</p>
</li>
</ul>
<p>当include中的配置冲突时会使用最后加载的比如下面的devMVC，如果主环境中有相同的配置，使用主环境中的配置</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"> </span>
<span class="w"> </span><span class="nt">profiles</span><span class="p">:</span><span class="w"> </span>
<span class="w">   </span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dev</span><span class="w"></span>
<span class="w">   </span><span class="nt">inclue</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">devDB,devMVC</span><span class="w"></span>
</code></pre></div>
<p>也可以使用group属性代替include属性，降低了配置书写量</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"> </span>
<span class="w"> </span><span class="nt">profiles</span><span class="p">:</span><span class="w"> </span>
<span class="w">   </span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dev</span><span class="w"></span>
<span class="w">   </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span>
<span class="w">     </span><span class="s">&quot;dev&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">devDB,devMVC</span><span class="w"></span>
<span class="w">     </span><span class="s">&quot;pro&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proDB,ProMVC</span><span class="w"></span>
</code></pre></div>
<p>更推荐使用group，便于线上维护管理，但是有冲突的配置会使用最后加载的文件的配置</p>
<h4 id="_30">多环境开发控制<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h4>
<p>当Maven与SpringBoot多环境产生冲突时，我们应该让maven使用boot中的环境，因为boot是依赖Maven运行的，Maven的配置会更优先</p>
<ol>
<li>Maven中设置多环境属性</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;profiles&gt;</span>
 <span class="nt">&lt;profile&gt;</span>
     <span class="nt">&lt;id&gt;</span>dev_env<span class="nt">&lt;/id&gt;</span><span class="cm">&lt;!--此处的id自定义设置--&gt;</span>
        <span class="nt">&lt;properties&gt;</span>
            <span class="cm">&lt;!--方便在spring配置文件中引用--&gt;</span>
         <span class="nt">&lt;profile.active&gt;</span>dev<span class="nt">&lt;/profile.active&gt;</span>
        <span class="nt">&lt;/properties&gt;</span>
        <span class="nt">&lt;activation&gt;</span>
            <span class="cm">&lt;!--设置是否默认启动此环境--&gt;</span>
         <span class="nt">&lt;activeByDefault&gt;</span>true<span class="nt">&lt;/activeByDefault&gt;</span>
        <span class="nt">&lt;/activation&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>

    <span class="nt">&lt;profile&gt;</span>
     <span class="nt">&lt;id&gt;</span>pro_env<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;properties&gt;</span>
         <span class="nt">&lt;profile.active&gt;</span>pro<span class="nt">&lt;/profile.active&gt;</span>
        <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
<span class="nt">&lt;/profiles&gt;</span>
</code></pre></div>
<ol>
<li>Spring Boot中引用Maven属性</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"> </span>
<span class="w"> </span><span class="nt">profiles</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="err">@</span><span class="l l-Scalar l-Scalar-Plain">profile.active@</span><span class="w">  </span><span class="c1">#引用了maven中默认启动的属性的&lt;profile.active&gt;中的</span><span class="w"></span>
</code></pre></div>
<p>如果在使用中切换配置，但是运行时配置不更新的情况，点击maven中的clean也没有的话，点击compile即可解决问题</p>
<h3 id="_31">日志<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<h4 id="_32">日志基础<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h4>
<ul>
<li>编程期调试代码</li>
<li>运营期记录信息</li>
<li>记录日常运营重要信息（峰值流浪，平均响应时长</li>
<li>记录应用报错信息（错误堆栈</li>
<li>记录运维过程数据（扩容，宕机，报警。。。</li>
</ul>
<p>日志级别设置</p>
<div class="highlight"><pre><span></span><code><span class="nt">logging</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">root</span><span class="p">:</span><span class="w"> </span><span class="c1"># 来填写级别  默认为info</span><span class="w"></span>
</code></pre></div>
<p>代码中使用日志工具记录日志
使用Lombok提供的注解 @Slf4j 简化开发，煎炒日志对象的声明操作</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Slf4j</span><span class="w"></span>
<span class="c1">//其他的注解该配配</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookController</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nd">@GetMapping</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getById</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="c1">//注解生成的对象就叫log</span><span class="w"></span>
<span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;infog...&quot;</span><span class="p">)</span><span class="c1">//会在控制台打印出日志</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>日志级别</p>
<ul>
<li>trace：运行堆栈信息，使用率低</li>
<li>debug：程序员调试代码使用</li>
<li>info：记录运维过程数据</li>
<li>warn：记录运维过程报警信息</li>
<li>error：记录错误堆栈信息</li>
</ul>
<p>设置日志输出级别</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 开启debug模式，输出调试信息，常用于检查系统运行状况</span><span class="w"></span>
<span class="nt">debug</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="c1"># 设置日志级别，root表示根节点，即整体应用日志级别</span><span class="w"></span>
<span class="nt">logging</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># 自定义组名，设置当前组中所包含的包,推荐使用日志组</span><span class="w"></span>
<span class="w">    </span><span class="nt">group</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">ebank</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">con.demo.controller</span><span class="w"></span>
<span class="w">    </span><span class="nt">level</span><span class="p">:</span><span class="w"></span>
<span class="w">       </span><span class="nt">root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info</span><span class="w"></span>
<span class="w">       </span><span class="c1"># 为对应组设置日志级别</span><span class="w"></span>
<span class="w">       </span><span class="nt">ebank</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span><span class="w"></span>
<span class="w">       </span><span class="c1"># 对包设置日志级别</span><span class="w"></span>
<span class="w">       </span><span class="nt">com.demo.service</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info</span><span class="w"></span>
</code></pre></div>
<h4 id="_33">日志输出格式控制<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h4>
<p><img alt="image-20220727124323343" src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220727124323343.png" /></p>
<ul>
<li>PID：进程ID，用于表明当前操作所处的进程，当多服务同时记录日志时，该值可用于协调程序员调试程序</li>
<li>所属类/接口名：当前显示信息为SpringBoot重写后的信息，名称过长时，简化包名书写为首字母，甚至直接删除</li>
</ul>
<p>设置日志输出格式</p>
<div class="highlight"><pre><span></span><code><span class="nt">logging</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="nt">console</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;%d</span><span class="nv"> </span><span class="s">%clr(%5p)</span><span class="nv"> </span><span class="s">---</span><span class="nv"> </span><span class="s">[%t]</span><span class="nv"> </span><span class="s">%-40.40c</span><span class="nv"> </span><span class="s">%m</span><span class="nv"> </span><span class="s">%n&quot;</span><span class="w"></span>
<span class="c1"># %d：日期</span><span class="w"></span>
<span class="c1"># %m：消息</span><span class="w"></span>
<span class="c1"># %n：换行</span><span class="w"></span>
<span class="c1"># %p：日志级别  %5p设置占位符  通用  默认右对其 设置左对齐使用-</span><span class="w"></span>
<span class="c1"># %clr()：设置颜色</span><span class="w"></span>
<span class="c1"># %t：所属进程</span><span class="w"></span>
<span class="c1"># %c：类名   %-40.40c左对齐一共四十位，.40代表强制截断为40位，超出的直接截掉</span><span class="w"></span>
</code></pre></div>
<h4 id="_34">日志文件<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h4>
<p>生成的日志文件跟项目所在同一目录</p>
<p>设置日志文件</p>
<div class="highlight"><pre><span></span><code><span class="nt">logging</span><span class="p">:</span><span class="w"> </span>
<span class="w">   </span><span class="nt">file</span><span class="p">:</span><span class="w"></span>
<span class="w">     </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server.log</span><span class="w">  </span><span class="c1">#设置了文件的名字</span><span class="w"></span>
<span class="c1">#单一的日志文件  不推荐使用</span><span class="w"></span>
</code></pre></div>
<p>日志文件详细配置</p>
<div class="highlight"><pre><span></span><code><span class="nt">logging</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">file</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server.log</span><span class="w"></span>
<span class="w">  </span><span class="nt">logback</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">rollingpolicy</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">max-file-size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1MB</span><span class="w"> </span><span class="c1">#设置单个日志文件的最大值</span><span class="w"></span>
<span class="w">      </span><span class="nt">file-name-pattern</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server.%d{yyyy-MM-dd}.%i.log</span><span class="w"> </span><span class="c1">#设置文件的命名格式</span><span class="w"></span>
<span class="w">                                            </span><span class="c1"># %d是日期 括号里面的是日期格式</span><span class="w"></span>
</code></pre></div>
<h2 id="springboot_2">SpringBoot开发实用篇<a class="headerlink" href="#springboot_2" title="Permanent link">&para;</a></h2>
<h3 id="_35">热部署<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h3>
<p><strong>只在开发环境中有效</strong></p>
<p>当项目中的文件发生改变以后不需要重启服务器</p>
<p>热部署仅加载当前开发者自定义开发的资源，不加载jar资源</p>
<p>导入坐标</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--开启开发者工具--&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-devtools<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>手工启动热部署 Ctrl-F9</p>
<p>自动启动热部署<img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220727162035556.png" alt="image-20220727162035556" style="zoom: 50%;" /></p>
<p><img src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220727163807674.png" alt="image-20220727163807674" style="zoom: 50%;" /></p>
<p>会在idea失去焦点五秒以后启动热部署</p>
<h4 id="_36">热部署配置范围<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">devtools</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">exclude</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">static/**</span><span class="w">  </span><span class="c1"># resource/static文件内的资源不会启动热部署，默认从resource开始  /**代表全部文件 单个文件直接指定名字。</span><span class="w"></span>
</code></pre></div>
<p>默认不触发重启的目录列表</p>
<ul>
<li>/META-INF/maven</li>
<li>/META-INF/resources</li>
<li>/resources</li>
<li>/statis</li>
<li>/public</li>
<li>/templates</li>
</ul>
<h4 id="_37">关闭热部署<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">devtools</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
</code></pre></div>
<p>还可以设置高优先级属性禁用热部署</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">serProperty</span><span class="p">(</span><span class="s">&quot;spring.devtools.restart.enabled&quot;</span><span class="p">,</span><span class="s">&quot;false&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">类名</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="_38">配置高级<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h3>
<h4 id="bean_1">第三方bean属性绑定<a class="headerlink" href="#bean_1" title="Permanent link">&para;</a></h4>
<p>使用@configurationProperties为第三方bean绑定属性</p>
<p>如果使用@configurationProperties出现注释警告
导入坐标</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org,springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-configuration-processor<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Bean</span><span class="w"></span>
<span class="nd">@configurationProperties</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;datasource&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">DruidDataSource</span><span class="w"> </span><span class="nf">dateSource</span><span class="p">(){</span><span class="w"></span>
<span class="w">    </span><span class="n">DruidDataSource</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DruidDataSource</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ds</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">datasource</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">driverClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.mysql.jdbc.Driver</span><span class="w"></span>
</code></pre></div>
<p>上面的ds对象有 driverClassName 此属性，故可以完成第三方bean绑定属性</p>
<p><a href="# yaml文件怎么读取">yaml文件读取</a>方法三 同为@configurationProperties配置的讲解</p>
<p>@EnableConfigurationProperties注解可以将使用@ConfigurationProperties注解对应的类加入Spring容器，相当于将其设置成了bean</p>
<p>@EnableConfigurationProperties与@Component不能同时使用，因为@Component也是将类设置为bena</p>
<h4 id="_39">宽松绑定/松散绑定<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h4>
<p>@configurationProperties绑定属性支持属性名宽松绑定</p>
<p>也就是说配置文件中的配置的名称的命名格式与类中属性的命名格式可以不一样</p>
<div class="highlight"><pre><span></span><code><span class="nt">ipaddress</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11111</span><span class="w"></span>
<span class="c1">#ip-address  ip_address ip_a-dd-ress  都可以匹配成功</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">ipAddress</span><span class="w"></span>
</code></pre></div>
<p>@configurationProperties( prefix = "...")  prefix的命名规范：仅能使用纯小写字符，数字，下划线作为合法的字符</p>
<p>@Value不支持松散绑定</p>
<h4 id="_40">常用时间与空间计量单位<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nd">@ConfigurationProperties</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;servers&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ServerConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@DurationUnit</span><span class="p">(</span><span class="n">按照提示填写选择你想要的</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Duration</span><span class="w"> </span><span class="n">serverTimeOut</span><span class="w"></span>
<span class="w">    </span><span class="nd">@DataSizeUnit</span><span class="p">(</span><span class="n">按照提示填写选择你想要的</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">DataSize</span><span class="w"> </span><span class="n">dataSize</span><span class="p">;</span><span class="w">    </span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">servers</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="nt">serverTimeOut</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w"></span>
<span class="w">  </span><span class="nt">dataSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w"></span>
</code></pre></div>
<h4 id="bean_2">Bean属性校验<a class="headerlink" href="#bean_2" title="Permanent link">&para;</a></h4>
<p>开启数据校验有助于系统安全性，</p>
<p>先导入校验规范的坐标</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--第一步--&gt;</span>
<span class="cm">&lt;!--导入规范--&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>javax.validation<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>validation-api<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="cm">&lt;!--使用hibernate框架提供的校验器做实现类--&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.hibernate.validator<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>hibernate-validator<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//第二部：开启校验功能</span><span class="w"></span>
<span class="nd">@Validated</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ServerConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//第三步：设置校验规则</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Max</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;最大值不能超过四百&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">port</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="c1">//点击max查看其对应的包，可以查看所有的校验规则</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="_41">进制数据转换规则<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h4>
<p><a href="# yml/yaml">点击这里查看，字面值表达式那里</a></p>
<h3 id="_42">测试<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h3>
<h4 id="_43">加载测试专用属性<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h4>
<p>在启动测试环境时可以通过properties参数设置测试环境专用的属性</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;test.prop=testValue&quot;</span><span class="p">})</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">pripertiesAndArgsTest</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${test.prop}&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">Test</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//优势：比多环境开发中的测试环境影响范围更小，仅对当前测试类有效</span><span class="w"></span>
</code></pre></div>
<p>在启动测试环境时可以通过args参数设置测试环境专用的传入参数</p>
<p><a href="# 临时属性设置">详细介绍</a></p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;--test.arg=testValue&quot;</span><span class="p">})</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">propertiesAndArgsTest</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${test.arg}&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
<span class="w">     </span><span class="kt">void</span><span class="w"> </span><span class="nf">Test</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="_44">加载测试专用配置<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h4>
<p>使用@Import注解加载当前测试类专用的配置</p>
<p>当我们需要一个单独的bean只在测试用例中使用时，我们可以在test包下对这个bean进行构建</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">testBean</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">msgTest</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;msg&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@SpringBootTest</span><span class="w"></span>
<span class="nd">@Import</span><span class="p">(</span><span class="n">testBean</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">configurationTest</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Autowired</span><span class="w"></span>
<span class="w">    </span><span class="n">privete</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Tese</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testConfiguration</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">sout</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span>
</code></pre></div>
<h4 id="web_1">Web环境模拟测试<a class="headerlink" href="#web_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">webEnvironment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SpringBootTest</span><span class="p">.</span><span class="na">WebEnvironment</span><span class="p">.</span><span class="na">RANDOM_PORT</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">WebTest</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testRandomPort</span><span class="p">(){}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>NONE：不启动web服务</p>
<p>RANDOM_PORT：启动随机端口</p>
<p>DEFINED_PORT：启动配置文件中的端口</p>
<p><strong>虚拟请求测试</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span><span class="p">(</span><span class="n">webEnvironment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SpringBootTest</span><span class="p">.</span><span class="na">WebEnvironment</span><span class="p">.</span><span class="na">RANDOM_PORT</span><span class="p">)</span><span class="w"></span>
<span class="c1">//开启虚拟MVC调用</span><span class="w"></span>
<span class="nd">@AutoConfigureMockMvc</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">WebTest</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="c1">//注入虚拟MVC调用对象</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testWeb</span><span class="p">(</span><span class="nd">@Autowired</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mvc</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">//创建虚拟请求，当前使用get请求访问/books</span><span class="w"></span>
<span class="w">     </span><span class="n">MockHttpServletRequesrBuilder</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MockMvcRequestBuilders</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/books&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">//执行请求</span><span class="w"></span>
<span class="w">     </span><span class="n">ResultActions</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">builder</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><strong>匹配响应执行状态</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testStatus</span><span class="p">(</span><span class="nd">@Autowired</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mvc</span><span class="p">)</span><span class="kd">throws</span><span class="w"> </span><span class="n">Exceptiom</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">MockHttpServletRequesrBuilder</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MockMvcRequestBuilders</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/books&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">ResultActions</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">builder</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//匹配执行状态（是否是预期值</span><span class="w"></span>
<span class="w">    </span><span class="c1">//定义执行状态匹配器</span><span class="w"></span>
<span class="w">    </span><span class="n">StatusResultMatchers</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MockMvcResultMatchers</span><span class="p">.</span><span class="na">status</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">//定义预期执行状态,即设置你预期返回的状态码</span><span class="w"></span>
<span class="w">    </span><span class="n">ResultMatcher</span><span class="w"> </span><span class="n">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">status</span><span class="p">.</span><span class="na">isOk</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">//使用本次真实执行结果与预期结果进行对比</span><span class="w"></span>
<span class="w">    </span><span class="c1">//action对象里面会有真正的状态码，与你预期的状态码两者进行对比</span><span class="w"></span>
<span class="w">    </span><span class="n">action</span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">ok</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><strong>匹配响应体</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testBody</span><span class="p">(</span><span class="nd">@Autowired</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mvc</span><span class="p">)</span><span class="kd">throws</span><span class="w"> </span><span class="n">Exceptiom</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">MockHttpServletRequesrBuilder</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MockMvcRequestBuilders</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/books&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">ResultActions</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">builder</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//匹配执行状态（是否是预期值</span><span class="w"></span>
<span class="w">    </span><span class="c1">//定义执行状态匹配器</span><span class="w"></span>
<span class="w">    </span><span class="n">StatusResultMatchers</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MockMvcResultMatchers</span><span class="p">.</span><span class="na">content</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">//定义预期执行状态</span><span class="w"></span>
<span class="w">    </span><span class="n">ResultMatcher</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">content</span><span class="p">.</span><span class="na">string</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//使用本次真实执行结果与预期结果进行对比</span><span class="w"></span>
<span class="w">    </span><span class="c1">//action对象里面会有真正的对应的返回值，与你预期的返回值两者进行对比</span><span class="w"></span>
<span class="w">    </span><span class="n">action</span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">result</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><strong>匹配响应体JSON</strong>（两者只是获取的时候对结果的解析方式不同</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testBodyJson</span><span class="p">(</span><span class="nd">@Autowired</span><span class="w"> </span><span class="n">MockMvc</span><span class="w"> </span><span class="n">mvc</span><span class="p">)</span><span class="kd">throws</span><span class="w"> </span><span class="n">Exceptiom</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">MockHttpServletRequesrBuilder</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MockMvcRequestBuilders</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/books&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">ResultActions</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mvc</span><span class="p">.</span><span class="na">perform</span><span class="p">(</span><span class="n">builder</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//匹配执行状态（是否是预期值</span><span class="w"></span>
<span class="w">    </span><span class="c1">//定义执行状态匹配器</span><span class="w"></span>
<span class="w">    </span><span class="n">StatusResultMatchers</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MockMvcResultMatchers</span><span class="p">.</span><span class="na">content</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">//定义预期执行状态</span><span class="w"></span>
<span class="w">    </span><span class="n">ResultMatcher</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">content</span><span class="p">.</span><span class="na">json</span><span class="p">(</span><span class="s">&quot;对应的json数据&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//使用本次真实执行结果与预期结果进行对比</span><span class="w"></span>
<span class="w">    </span><span class="c1">//action对象里面会有真正的对应的返回值，与你预期的返回值两者进行对比</span><span class="w"></span>
<span class="w">    </span><span class="n">action</span><span class="p">.</span><span class="na">andExpect</span><span class="p">(</span><span class="n">result</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>匹配其他的东西<code>MockMvcResultMatchers.content();</code>后面的content更改一下就行，使用提示可以查看里面都是有什么东西</p>
<h4 id="_45">业务层测试回滚<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h4>
<p>当在进行测试业务时，不想把测试的数据添加到数据库中应开启事务，在对应的方法或者类上方添加注解 <code>@Transactional</code>SpringBoot会对测试用例对应的事务提交操作进行回滚</p>
<p>如果想在测试用例中提交事务，可以通过 <code>@Rollback(false)</code>注解设置，相当于两者抵消了</p>
<h4 id="_46">测试用例设置随机数据<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h4>
<p>测试用例数据通常采用随机值进行测试，使用SpringBoot提供的随机数为其赋值</p>
<div class="highlight"><pre><span></span><code><span class="nt">testcase</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="nt">book</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${random.int}</span><span class="w">               </span><span class="c1"># 随机整数</span><span class="w"></span>
<span class="w">    </span><span class="nt">id2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${random.int(10)}</span><span class="w">          </span><span class="c1"># 10 以内随机数</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${random.int(10,20)}</span><span class="w">      </span><span class="c1"># 10 ~ 20随机数</span><span class="w"></span>
<span class="w">                                    </span><span class="c1"># 不仅仅是只有int类型</span><span class="w"></span>
<span class="w">                                    </span><span class="c1"># value对应的是string类型 long对应long</span><span class="w"></span>
</code></pre></div>
<p><code>@ConfigurationProperties(perfix = "testcase.book")</code>然后使用此注解进行读取即可   </p>
<h3 id="_47">数据层解决方案<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h3>
<h4 id="sql">SQL<a class="headerlink" href="#sql" title="Permanent link">&para;</a></h4>
<ul>
<li>现有数据层解决方案技术选型</li>
</ul>
<p>Druid + MybatisPlus + MySql</p>
<h4 id="nosql">NoSQL<a class="headerlink" href="#nosql" title="Permanent link">&para;</a></h4>
<h5 id="redis">Redis<a class="headerlink" href="#redis" title="Permanent link">&para;</a></h5>
<p>Redis是一款key-value存储结构的内存及NoSQL数据库</p>
<ul>
<li>支持多种数据存储格式</li>
<li>支持持久化</li>
<li>支持集群</li>
</ul>
<p>SpringBoot整合Redis
先导入坐标</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>进行配置</p>
<h5 id="mongodb">Mongodb<a class="headerlink" href="#mongodb" title="Permanent link">&para;</a></h5>
<p>是一个开源，高性能，无模式的文档行数据库，最像关系型数据库的非关系型数据库</p>
<p><strong>适用条件</strong>有很高的修改需求</p>
<h3 id="_48">整合第三方技术<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h3>
<h4 id="_49">缓存<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h4>
<p>缓存是一种介于数据永久存储介质与数据应用之间的临时存储介质</p>
<p>使用缓存可以有效地减少低速数据读取过程的次数（例如磁盘IO），提高系统性能</p>
<p>缓存不仅可以用于提高永久性存储介质的数据读取效率，还可以提供临时的数据存储空间</p>
<h4 id="springboot_3">SpringBoot缓存使用方法<a class="headerlink" href="#springboot_3" title="Permanent link">&para;</a></h4>
<ol>
<li>启用缓存</li>
<li>设置进入缓存的数据</li>
<li>设置读取缓存的数据</li>
</ol>
<p>导入坐标</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--引用缓存--&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-cache<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>application.java文件中添加注解 <code>@EnableCaching</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootApplication</span><span class="w"></span>
<span class="c1">//开启缓存功能</span><span class="w"></span>
<span class="nd">@EnableCaching</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Application</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">Application</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">args</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>设置当前操作的结果数据进入缓存</p>
<div class="highlight"><pre><span></span><code><span class="c1">//value的值自定义，相当于命名空间，key的值代表在进行查询时会先根据id在缓存数据中查询</span><span class="w"></span>
<span class="c1">//一般key的值与查询方法传入的参数值对应</span><span class="w"></span>
<span class="c1">//这个注解会存入缓存，当你第一次使用后再传入同样的id不会更新数据，如果有需求传入相同的id返回的结果不能够固定，应使用 @CachePut注解，传入参数跟这一个保持一致，传入相同的id时会更新数据，只存入数据</span><span class="w"></span>
<span class="c1">//</span><span class="w"></span>
<span class="nd">@CachePut</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;smsCode&quot;</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="s">&quot;#tele&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">sendCodeToSMS</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">tele</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//此处是调用了根据手机号生成验证码的方法</span><span class="w"></span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">codeUtils</span><span class="p">.</span><span class="na">generator</span><span class="p">(</span><span class="n">tele</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">code</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//当你使用 @CachePut 这个注解时，获取对应的缓存数据时，使用 @Cacheable 注解，设置相同的命名空间，格式如下</span><span class="w"></span>
<span class="c1">//@CachePut 注解是只存入数据</span><span class="w"></span>
<span class="c1">//@Cacheable 是获取缓存中的数据，里面的value值和key值应该传入相同的数据</span><span class="w"></span>
<span class="nd">@Cacheable</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;smsCode&quot;</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="s">&quot;#tele&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">tele</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//虽说这里返回的是 null 值，但是当你的缓存中含有传入的tele时，会返回缓存中对应的值</span><span class="w"></span>
</code></pre></div>
<p><span class="arithmatex">\(\textcolor{red}{}\)</span><span class="arithmatex">\(\textcolor{red}{@Cacheable}\)</span> 此注解要想生效必须设置在 Spring 的 Bean 中</p>
<p>上面使用的是 Spring 的默认缓存</p>
<h5 id="ehcache">Ehcache缓存技术<a class="headerlink" href="#ehcache" title="Permanent link">&para;</a></h5>
<p>SpringBoot提供的缓存技术除了提供默认的缓存方案，还可以对其他缓存技术进行整合，统一接口，方便缓存技术的开发与管理</p>
<p>更换其他的缓存解决方案差不多</p>
<ol>
<li>加入Ehcache坐标</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
 <span class="nt">&lt;groupId&gt;</span>net.sf.ehcache<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>ehcache<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<ol>
<li>缓存设定为使用 Ehcache</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"></span>
<span class="w"> </span><span class="nt">cache</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ehcache</span><span class="w"></span>
<span class="w">  </span><span class="nt">ehcache</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ehcache.xml</span><span class="w">  </span><span class="c1">#配置文件</span><span class="w"></span>
</code></pre></div>
<ol>
<li>配置文件</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ehcache</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
         <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;http://ehcache.org/ehcache.xsd&quot;</span>
         <span class="na">updateCheck=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;diskStore</span> <span class="na">path=</span><span class="s">&quot;D:\ehcache&quot;</span> <span class="nt">/&gt;</span>

    <span class="cm">&lt;!--默认缓存策略 --&gt;</span>
    <span class="cm">&lt;!-- external：是否永久存在，设置为true则不会被清除，此时与timeout冲突，通常设置为false--&gt;</span>
    <span class="cm">&lt;!-- diskPersistent：是否启用磁盘持久化--&gt;</span>
    <span class="cm">&lt;!-- maxElementsInMemory：最大缓存数量--&gt;</span>
    <span class="cm">&lt;!-- overflowToDisk：超过最大缓存数量是否持久化到磁盘--&gt;</span>
    <span class="cm">&lt;!-- timeToIdleSeconds：最大不活动间隔，设置过长缓存容易溢出，设置过短无效果，可用于记录时效性数据，例如验证码--&gt;</span>
    <span class="cm">&lt;!-- timeToLiveSeconds：最大存活时间--&gt;</span>
    <span class="cm">&lt;!-- memoryStoreEvictionPolicy：缓存清除策略--&gt;</span>
    <span class="nt">&lt;defaultCache</span>
        <span class="na">eternal=</span><span class="s">&quot;false&quot;</span>
        <span class="na">diskPersistent=</span><span class="s">&quot;false&quot;</span>
        <span class="na">maxElementsInMemory=</span><span class="s">&quot;1000&quot;</span>
        <span class="na">overflowToDisk=</span><span class="s">&quot;false&quot;</span>
        <span class="na">timeToIdleSeconds=</span><span class="s">&quot;60&quot;</span>
        <span class="na">timeToLiveSeconds=</span><span class="s">&quot;60&quot;</span>
        <span class="na">memoryStoreEvictionPolicy=</span><span class="s">&quot;LRU&quot;</span> <span class="nt">/&gt;</span>
    <span class="cm">&lt;!--LRU淘汰策略：挑选最后一次使用时间最早的淘汰--&gt;</span>
 <span class="cm">&lt;!--LFU淘汰策略：挑选最近使用次数最少的淘汰--&gt;</span>

    <span class="cm">&lt;!--下面的name是缓存空间名称--&gt;</span>
    <span class="nt">&lt;cache</span>
        <span class="na">name=</span><span class="s">&quot;smsCode&quot;</span>           
        <span class="na">eternal=</span><span class="s">&quot;false&quot;</span>
        <span class="na">diskPersistent=</span><span class="s">&quot;false&quot;</span>
        <span class="na">maxElementsInMemory=</span><span class="s">&quot;1000&quot;</span>
        <span class="na">overflowToDisk=</span><span class="s">&quot;false&quot;</span>
        <span class="na">timeToIdleSeconds=</span><span class="s">&quot;10&quot;</span>
        <span class="na">timeToLiveSeconds=</span><span class="s">&quot;10&quot;</span>
        <span class="na">memoryStoreEvictionPolicy=</span><span class="s">&quot;LRU&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/ehcache&gt;</span>
</code></pre></div>
<hr />
<h5 id="jetcache">jetCache远程缓存<a class="headerlink" href="#jetcache" title="Permanent link">&para;</a></h5>
<p>对SpringCache进行了封装，在原有功能基础上实现了多级缓存，缓存统计，自动刷新，异步调用，数据报表等功能。</p>
<ul>
<li>jetCache设定了本地缓存与远程缓存的多级缓存解决方案</li>
<li>本地缓存<ul>
<li>LinkedHashMap（相对于HashMap进行了性能优化</li>
<li>Caddeine</li>
</ul>
</li>
<li>远程缓存<ul>
<li>Redis</li>
<li>Tair</li>
</ul>
</li>
</ul>
<h5 id="j2cache">j2Cache<a class="headerlink" href="#j2cache" title="Permanent link">&para;</a></h5>
<p>是一个缓存整合框架，可以提供缓存的整合方案，使各种缓存搭配使用，自身不提供缓存功能</p>
<h4 id="_50">任务<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h4>
<p>定时任务是企业级应用中的常见操作</p>
<p>常见的一个定时任务技术：Quarzt，Spring Task</p>
<p><strong>SpringBoot整合Quarzt</strong></p>
<ul>
<li>
<p>相关概念</p>
</li>
<li>
<p>工作（Job）：用于定义具体执行的工作</p>
</li>
<li>工作明细（JobDetail）：用于描述定时工作相关的信息</li>
<li>触发器（Trigger）：用于描述触发工作的原则，通常使用 cron 表达式定义调度规则</li>
<li>调度器（Scheduler）：描述了工作明细与触发器的对应关系</li>
</ul>
<p>触发器绑定工作明细，工作明细中指定工作</p>
<hr />
<ol>
<li>导入坐标</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
 <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-quartz<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<ol>
<li>定义具体要执行的任务，继承QuartzJobBean</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">QuartzTaskTest</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">QuartzBean</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Override</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">executeInternal</span><span class="p">(</span><span class="n">JobExecutionContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="kd">throws</span><span class="w"> </span><span class="n">JobExecutionException</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">//执行对应的语句，可以从context参数中获得一些数据</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>定义工作明细与触发器，并绑定对应关系</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">QuartzConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">JobDetail</span><span class="w"> </span><span class="nf">printJobDetail</span><span class="p">(){</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">JobBuilder</span><span class="p">.</span><span class="na">newJob</span><span class="p">(</span><span class="n">QuartzTaskTest</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">storeDurably</span><span class="p">().</span><span class="na">build</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Trigger</span><span class="w"> </span><span class="nf">printJobTrigger</span><span class="p">(){</span><span class="w"></span>
<span class="w">      </span><span class="n">CronScheduleBuilder</span><span class="w"> </span><span class="n">cron</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">        </span><span class="n">CronScheduleBuilder</span><span class="p">.</span><span class="na">cronSchedule</span><span class="p">(</span><span class="s">&quot;传入执行的时间条件，具体资料自己搜吧&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">TriggerBuilder</span><span class="p">.</span><span class="na">newTrigger</span><span class="p">().</span><span class="na">forJob</span><span class="p">(</span><span class="n">printJobDetail</span><span class="p">())</span><span class="w"></span>
<span class="w">          </span><span class="p">.</span><span class="na">withSchedule</span><span class="p">(</span><span class="n">cron</span><span class="p">).</span><span class="na">build</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<hr />
<p><strong>Spring Task</strong></p>
<ol>
<li>开启定时任务功能</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootApplication</span><span class="w"></span>
<span class="nd">@EnableScheduling</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Application</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">Application</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">args</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>设定定时执行的任务，并设定执行周期</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Component</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ScheduleBean</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Scheduled</span><span class="p">(</span><span class="n">cron</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0/5 * * * * ?&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="c1">//每五秒执行一次，</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">sout</span><span class="p">(</span><span class="s">&quot;nihaowa&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>定时任务相关配置</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="nt">scheduling</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="c1"># 任务调度线程池大小，默认1</span><span class="w"></span>
<span class="w">      </span><span class="nt">pool</span><span class="p">:</span><span class="w"> </span>
<span class="w">        </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">      </span><span class="c1"># 调度线程名称前缀，默认scheduling-，方便调试使用</span><span class="w"></span>
<span class="w">      </span><span class="c1"># Thread.currentThread().getName() 由此方法调用可以看到</span><span class="w"></span>
<span class="w">      </span><span class="nt">thread-name-prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssm_</span><span class="w"></span>
<span class="w">      </span><span class="nt">shuidown</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="c1"># 线程池关闭时如果有任务未执行完毕，是否等待其执行完毕</span><span class="w"></span>
<span class="w">        </span><span class="nt">await-termination</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">        </span><span class="c1"># 调度线程关闭前最大等待时间，确保最后一顶关闭</span><span class="w"></span>
<span class="w">        </span><span class="nt">await-termination-period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10s</span><span class="w"></span>
</code></pre></div>
<h4 id="_51">邮件<a class="headerlink" href="#_51" title="Permanent link">&para;</a></h4>
<p><strong>SpringBoot整合JavaMail</strong></p>
<ul>
<li>SMPTP：简单邮件传输协议，用于发送电子邮件的传输协议（最常用</li>
<li>POP3：用于接收电子邮件的标准协议</li>
<li>
<p>IMAP：互联网消息协议，是POP3的替代协议</p>
</li>
<li>
<p>导入坐标</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
 <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-mail<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<ol>
<li>配置文件进行设置</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="nt">mail</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">smtp.163.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xx@163.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">邮箱所提供的授权码</span><span class="w"></span>
</code></pre></div>
<ol>
<li>发送邮件</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;****@163.com&quot;</span><span class="w">         </span><span class="c1">//发送人</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;****@qq.com&quot;</span><span class="w">            </span><span class="c1">//就收人</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">subject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;邮件标题&quot;</span><span class="p">;</span><span class="w">      </span><span class="c1">//邮件主题</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;邮件正文&quot;</span><span class="w">          </span><span class="c1">//邮件内容 </span><span class="w"></span>

<span class="nd">@Autowired</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">JavaMailSender</span><span class="w"> </span><span class="n">mailSender</span><span class="p">;</span><span class="w"></span>

<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sendMail</span><span class="p">(){</span><span class="w"></span>
<span class="w">    </span><span class="c1">//简单邮件</span><span class="w"></span>
<span class="w">    </span><span class="n">SimpleMailMessage</span><span class="w"> </span><span class="n">mailMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleMailMessage</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">mailMessage</span><span class="p">.</span><span class="na">setFrom</span><span class="p">(</span><span class="n">from</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">mailMessage</span><span class="p">.</span><span class="na">setTo</span><span class="p">(</span><span class="n">to</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">mailMessage</span><span class="p">.</span><span class="na">setSubject</span><span class="p">(</span><span class="n">subject</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">mailMessage</span><span class="p">.</span><span class="na">setText</span><span class="p">(</span><span class="n">text</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">mailSender</span><span class="p">.</span><span class="na">send</span><span class="p">(</span><span class="n">mailMessage</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<hr />
<p><strong>发送多部件邮件</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@Autowired</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">JavaMailSender</span><span class="w"> </span><span class="n">mailSender</span><span class="p">;</span><span class="w"></span>

<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sendMail</span><span class="p">(){</span><span class="w"></span>
<span class="w">    </span><span class="k">try</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">MimeMessage</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JavaMailSender</span><span class="p">.</span><span class="na">createMimeMessage</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">//此处的true是为了开启发送附件</span><span class="w"></span>
<span class="w">        </span><span class="n">MimeMessageHelper</span><span class="w"> </span><span class="n">helper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MimeMessageHelper</span><span class="p">(</span><span class="n">message</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">helper</span><span class="p">.</span><span class="na">setFrom</span><span class="p">(</span><span class="n">from</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">helper</span><span class="p">.</span><span class="na">setTo</span><span class="p">(</span><span class="n">to</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">helper</span><span class="p">.</span><span class="na">setSubject</span><span class="p">(</span><span class="n">subject</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">//此处设置为true，如果text中含有html标签，可以进行解析</span><span class="w"></span>
<span class="w">        </span><span class="n">helper</span><span class="p">.</span><span class="na">setText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;对应的路径&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;对应的路径&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">//f1.getName()获取了原文件的名字</span><span class="w"></span>
<span class="w">        </span><span class="n">helper</span><span class="p">.</span><span class="na">addAttachment</span><span class="p">(</span><span class="n">f1</span><span class="p">.</span><span class="na">getName</span><span class="p">(),</span><span class="n">f1</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">helper</span><span class="p">.</span><span class="na">addAttachment</span><span class="p">(</span><span class="s">&quot;自定义名字记得加后缀&quot;</span><span class="p">,</span><span class="n">f2</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">mailSender</span><span class="p">.</span><span class="na">send</span><span class="p">(</span><span class="n">message</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="_52">消息<a class="headerlink" href="#_52" title="Permanent link">&para;</a></h4>
<p>消息发送方：生产者</p>
<p>消息接收方：消费者</p>
<p>异步消息传递技术：JMS、AMQP、MQTT</p>
<p>JMS：一个规范，等同于JDBC规范，提供了与消息服务相关的API接口</p>
<ul>
<li>JMS消息模型：</li>
<li>peer-2-peer：点对点模型，消息发送到一个队列中，队列保存消息。队列的小时之恩呗一个消费者消费，或超时</li>
<li>
<p>publish-subscribe：发布订阅模型，消息可以被多个消费者消费，生产者和消费者完全独立，不需要感知对方的存在（企业级开发应使用这一个</p>
</li>
<li>
<p>JMS消息种类</p>
</li>
<li>TextMessage</li>
<li>MapMessage</li>
<li><span class="arithmatex">\(\textcolor{red}{ByteMessage}\)</span>（常用</li>
<li>SstreamMessage</li>
<li>ObjectMessage</li>
<li>Message（只有消息头和属性</li>
</ul>
<p>AMQP：一种协议（高级消息队列协议，也是消息代理规范），规范了网络交换的数据格式，兼容JMS
优点：具有跨平台性服务器供应商，生产者，消费者可以使用不同的语言来实现</p>
<ul>
<li>AMQP消息模型</li>
<li>==direct exchange==</li>
<li>==topic exchange==</li>
<li>fanout exchange</li>
<li>headers exchange</li>
<li>system exchange</li>
</ul>
<p>AMQP消息种类：byte[]（解决了跨平台的问题</p>
<p>Kafka：一种高吞吐量的分布式发布订阅消息系统，提供实时消息功能</p>
<h3 id="_53">监控<a class="headerlink" href="#_53" title="Permanent link">&para;</a></h3>
<p><strong>监控的意义</strong></p>
<ul>
<li>监控服务器状态是否宕机</li>
<li>监控服务运行指标（内存、虚拟机、线程、请求等</li>
<li>监控日志</li>
<li>管理服务（服务下线</li>
</ul>
<p>监控的实施方式：</p>
<p>​   显示监控信息的服务器：用于获取服务信息，并显示对应的的信息</p>
<p>​   运行的服务：启动时主动上报，告知监控服务器自己需要收到监控</p>
<p><strong>可视化监控平台</strong></p>
<p>SpringBootAdmin（不属于Spring官方，使用的版本应该和SpringBoot的版本对应，相同即可），开源社区项目，用于管理和监控SpringBoot应用程序。客户端注册到服务端后，通过HTTP请求方式，服务器定期从客户端获取对应的信息，并通过UI界面展示对应信息</p>
<ul>
<li>服务端</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>de.codecertric<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-admin-starter-server<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>应该对应你使用的Spring的版本<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<ul>
<li>客户端</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>de.codecertric<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-admin-starter-client<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>应该对应你使用的Spring的版本<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>服务端一定要做成web项目，并且启用Spring-Admin，启动类添加注解 <code>@EnableAdminServer</code></p>
<p>客户端开放权限</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">boot</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">admin</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">client</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://localhost:8080</span><span class="w">   </span><span class="c1">#对应的服务端的地址</span><span class="w"></span>
<span class="nt">management</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="nt">endpoint</span><span class="p">:</span><span class="w">         </span><span class="c1"># 这一层是设置是否对外开启功能</span><span class="w"></span>
<span class="w">    </span><span class="nt">health</span><span class="p">:</span><span class="w">         </span><span class="c1"># health必须开放    </span><span class="w"></span>
<span class="w">      </span><span class="nt">show-details</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span><span class="w">      </span><span class="c1">#开启所有功能</span><span class="w"></span>
<span class="w">    </span><span class="nt">beans</span><span class="p">:</span><span class="w">          </span><span class="c1"># 端点名称</span><span class="w"></span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"> </span><span class="c1">#开启断电</span><span class="w"></span>
<span class="w">  </span><span class="nt">endpoints</span><span class="p">:</span><span class="w">    </span><span class="c1"># 这一层是设置开启的功能是否能在web层查看</span><span class="w"></span>
<span class="w">    </span><span class="nt">web</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="nt">exposure</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w">   </span><span class="c1">#开放全部权限给对应服务端</span><span class="w"></span>
</code></pre></div>
<p><strong>自定义监控指标</strong></p>
<p><img alt="image-20220801101555976" src="https://sm-1301822562.cos.ap-nanjing.myqcloud.com/myTypora/image-20220801101555976.png" /></p>
<p>info信息：在yaml配置文件中配置以后即可在web端查看到此信息</p>
<div class="highlight"><pre><span></span><code><span class="nt">info</span><span class="p">:</span><span class="w"> </span>
<span class="w"> </span><span class="nt">auther</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hanyongyan</span><span class="w"></span>
<span class="w"> </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="err">@</span><span class="l l-Scalar l-Scalar-Plain">project.version@</span><span class="w">         </span><span class="c1"># 引用了pom.xml文件中的属性</span><span class="w"></span>
</code></pre></div>
<p>通过编程来添加自定义指标</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Component</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AppInfoContributor</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">InfoContributor</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Override</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">contribute</span><span class="p">(</span><span class="n">Info</span><span class="p">.</span><span class="na">Builder</span><span class="w"> </span><span class="n">builder</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">infoMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">infoMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;buildTime&quot;</span><span class="p">,</span><span class="mi">2006</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">builder</span><span class="p">.</span><span class="na">withDetails</span><span class="p">(</span><span class="n">infoMap</span><span class="p">);</span><span class="w">       </span><span class="c1">//可以从map集合中添加多个信息</span><span class="w"></span>
<span class="w">        </span><span class="n">builder</span><span class="p">.</span><span class="na">withDetail</span><span class="p">(</span><span class="s">&quot;runTime&quot;</span><span class="p">,</span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">());</span><span class="c1">//添加单条信息</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>health信息：需要适应变成来添加自定义指标</p>
<p>一般会添加重要的组件</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Component</span><span class="w"> </span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AppHealthContributor</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">HealthContributor</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Override</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doHealthChech</span><span class="p">(</span><span class="n">Health</span><span class="p">.</span><span class="na">Builder</span><span class="w"> </span><span class="n">builder</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Excepiton</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">//传入信息的方式与info通过编程添加信息一样</span><span class="w"></span>
<span class="w">        </span><span class="n">builder</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">DOWN</span><span class="p">);</span><span class="c1">//来设置这一项的状态</span><span class="w"></span>
<span class="w">        </span><span class="c1">//Status.UP Status.UNKNOWN </span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h2 id="ymlyaml">yml/yaml<a class="headerlink" href="#ymlyaml" title="Permanent link">&para;</a></h2>
<p><a href="https://www.yiibai.com/yaml/">YAML教程 (yiibai.com)</a></p>
<p><a href="https://www.runoob.com/w3cnote/yaml-intro.html">YAML 入门教程 | 菜鸟教程 (runoob.com)</a></p>
<p>字面值表达方式</p>
<ul>
<li>boolean：true</li>
<li>float：3.14                                支持科学计数法 6.18e+5</li>
<li>int：123                                  支持二进制0b，八进制01~7，十进制正常，十六进制0X  </li>
<li>null：~</li>
<li>string：helloword</li>
<li>string2："HelloWord"</li>
<li>date：2018-02-7                    日期必须使用yyyy-MM-dd格式</li>
<li>datetime：2018-02-17T15：02：31+08：00                    时间和日期之间使用T连接，最后使用+代表时区</li>
</ul>
<p><strong>当你在配置文件中输入以0开头的最好使用引号引起来，可能会误识别为其他进制</strong></p>
<ul>
<li>
<p>大小写敏感</p>
</li>
<li>
<p>属性层级管事使用多行描述，每行结尾使用冒号结束</p>
</li>
<li>
<p>使用缩进表示层级关系，同层级左侧对其，只允许使用空格（不允许使用Tab键</p>
</li>
<li>
<p><code>属性值前面添加空格</code>（属性名与属性值之间使用冒号+空格作为分隔符</p>
</li>
<li>
<p>支持转义字符，需要使用双引号包裹</p>
</li>
<li>
<p># 表示注释</p>
</li>
<li>
<p>数组数据</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">subject</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">java</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">前端</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">大数据</span><span class="w"></span>
</code></pre></div>
<h3 id="yaml">yaml文件怎么读取<a class="headerlink" href="#yaml" title="Permanent link">&para;</a></h3>
<p>方法一（常用</p>
<div class="highlight"><pre><span></span><code><span class="nt">enterprise</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">itcast</span><span class="w"></span>
<span class="w">  </span><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16</span><span class="w"></span>
<span class="w">  </span><span class="nt">tel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span><span class="w"></span>
<span class="w">  </span><span class="nt">subject</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">java</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">前端</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">大数据</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//此处的enterprise代表配置文件中的enterprise，想要的属性的上一层级,prifix不写也能用</span><span class="w"></span>
<span class="nd">@Component</span><span class="w"></span>
<span class="nd">@ConfigurationProperties</span><span class="p">(</span><span class="n">perfix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;enterprise&quot;</span><span class="p">)</span><span class="w"> </span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Enterprise</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">subject</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//会完成自动封装</span><span class="w"></span>
</code></pre></div>
<p>方法二</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Autowired</span><span class="w">                      </span><span class="c1">//此变量会获取配置文件中全部的值</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">Environment</span><span class="w"> </span><span class="n">env</span><span class="p">;</span><span class="w"></span>
<span class="c1">//在方法中进行调用</span><span class="w"></span>
<span class="n">env</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;配置文件中对应的属性名&quot;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>方法三 </p>
<div class="highlight"><pre><span></span><code><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${name}&quot;</span><span class="p">)</span><span class="w">               </span><span class="c1">//读取到yaml配置文件中的name值</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"></span>
<span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${user.password}&quot;</span><span class="p">)</span><span class="w">      </span><span class="c1">//多级读取</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">;</span><span class="w"></span>
<span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${subject[1]}&quot;</span><span class="p">)</span><span class="w">     </span><span class="c1">//读取数组中的内容</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">subject</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>自定义对象封装数据警告解决方案</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-configuration-processor<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;optional&gt;</span>ture<span class="nt">&lt;/optional&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>文件中变量的引用</p>
<div class="highlight"><pre><span></span><code><span class="nt">baseDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c:\windows</span><span class="w"></span>
<span class="c1">#使用${属性名}引用数据</span><span class="w"></span>
<span class="nt">tempDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${baseDir}\temp</span><span class="w"></span>
<span class="c1">#tempDir的值就是  c:\windows\temp</span><span class="w"></span>
</code></pre></div>
<h3 id="yamlxml">yaml文件读取xml文件内容<a class="headerlink" href="#yamlxml" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;time&gt;</span>
    <span class="nt">&lt;now&gt;</span>2020<span class="nt">&lt;/now&gt;</span>
<span class="nt">&lt;/time&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">Time</span><span class="p">:</span><span class="w"> </span><span class="err">@</span><span class="l l-Scalar l-Scalar-Plain">time.now@</span><span class="w"></span>
</code></pre></div>
<h2 id="mybatisplus">MybatisPlus<a class="headerlink" href="#mybatisplus" title="Permanent link">&para;</a></h2>
<p><a href="https://baomidou.com/">MyBatis-Plus 官网</a></p>
<p>基于MyBatis框架基础上开发的增强型工具，提高效率，简化开发</p>
<p>MybatisPlus的id自增策略为雪花算法，如需使用默认自增</p>
<div class="highlight"><pre><span></span><code><span class="nt">mybatis-plus</span><span class="p">:</span><span class="w"></span>
<span class="w"> </span><span class="nt">global-config</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="nt">db-config</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">id-type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auto</span><span class="w"> </span><span class="c1">#更改自增策略</span><span class="w"></span>
<span class="w"> </span><span class="nt">configuration</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="nt">map-underscore-to-camel-case</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ture</span><span class="w"> </span><span class="c1">#映射实体类中的属性时，使得字段名中含有下划线与驼峰命名相匹配</span><span class="w"></span>
<span class="w">  </span><span class="nt">log-impl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">org.apache.ibatis.logging.stdout.StdOutImpl</span><span class="w"> </span><span class="c1">#开启日志</span><span class="w"></span>
</code></pre></div>
<p>添加坐标</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;gooupId&gt;</span>com.baomidou<span class="nt">&lt;/gooupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>mybatis-plus-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>...<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>定义数据接口，继承BaseMapper<user></p>
<div class="highlight"><pre><span></span><code><span class="nd">@Mapper</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">userDao</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseMapper</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//里面简单的查询方法都有，如没有还可以按照原来的方法进行写出来</span><span class="w"></span>
<span class="w">    </span><span class="c1">//在业务层中调用时会使用父接口中的默认方法，见名知意</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<table>
<thead>
<tr>
<th align="left">功能</th>
<th align="left">MP接口</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">新增</td>
<td align="left">int insert(T t)</td>
</tr>
<tr>
<td align="left">删除</td>
<td align="left">int deleteById(Serializable id)</td>
</tr>
<tr>
<td align="left">修改</td>
<td align="left">int updateById(T  t)</td>
</tr>
<tr>
<td align="left">根据id查询</td>
<td align="left">T seleceById(Serializable id)</td>
</tr>
<tr>
<td align="left">查询全部</td>
<td align="left">List<T> selectList()</td>
</tr>
<tr>
<td align="left">分页查询</td>
<td align="left">IPage<T> selecePage(IPage<T> page)</td>
</tr>
<tr>
<td align="left">按条件查询</td>
<td align="left">IPage selecePage(Wrapper<T> queryWrapper)</td>
</tr>
</tbody>
</table>
<p>分页查询的步骤</p>
<ol>
<li>设置分页拦截器作为Spring管理的bean（固定写法）
   相当于完成了动态拼写SQL</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MpConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">MybatisPlusInterceptor</span><span class="w"> </span><span class="nf">pageInterceptor</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">MybatisPlusInterceptor</span><span class="w"> </span><span class="n">interceptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MybatisPlusInterceptor</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">interceptor</span><span class="p">.</span><span class="na">addInnerInterceptor</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">PaginationInnerInterceptor</span><span class="p">());</span><span class="w"></span>
<span class="w">        </span><span class="c1">//回头如果使用更多的直接再按照上一行的设置就行</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">interceptor</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>执行分页查询</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="n">IPage</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Page</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="c1">//2代表当前页码，3代表每页的数据</span><span class="w"></span>
<span class="n">UserDao</span><span class="p">.</span><span class="na">selectPage</span><span class="p">(</span><span class="n">page</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span><span class="w"></span>
<span class="n">sout</span><span class="p">(</span><span class="s">&quot;当前页码&quot;</span><span class="o">+</span><span class="n">page</span><span class="p">.</span><span class="na">getCurrent</span><span class="p">());</span><span class="w"></span>
<span class="n">sout</span><span class="p">(</span><span class="s">&quot;每页数据总量&quot;</span><span class="o">+</span><span class="n">page</span><span class="p">.</span><span class="na">getSize</span><span class="p">());</span><span class="w"></span>
<span class="n">sout</span><span class="p">(</span><span class="s">&quot;总页数&quot;</span><span class="o">+</span><span class="n">page</span><span class="p">.</span><span class="na">getPages</span><span class="p">());</span><span class="w"></span>
<span class="n">sout</span><span class="p">(</span><span class="s">&quot;数据总量&quot;</span><span class="o">+</span><span class="n">page</span><span class="p">.</span><span class="na">getTotal</span><span class="p">());</span><span class="c1">//数据的总条数</span><span class="w"></span>
<span class="n">sout</span><span class="p">(</span><span class="s">&quot;当前页数据&quot;</span><span class="o">+</span><span class="n">page</span><span class="p">.</span><span class="na">getRecords</span><span class="p">());</span><span class="w"></span>
</code></pre></div>
<h3 id="dql">DQL编程控制<a class="headerlink" href="#dql" title="Permanent link">&para;</a></h3>
<p>条件查询
mp将书写复杂的SQL查询条件进行了封装，使用编程的形式完成查询条件的组合</p>
<p>Wrapper<T> 上面方法中的此东西 就是完成了封装</p>
<ul>
<li>格式一：</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">qw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">QueryWrapper</span><span class="p">();</span><span class="w"></span>
<span class="c1">//查询年龄大于等于18岁，小于65岁的用户</span><span class="w"></span>
<span class="n">qw</span><span class="p">.</span><span class="na">lt</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">,</span><span class="mi">65</span><span class="p">);</span><span class="w"></span>
<span class="n">qw</span><span class="p">.</span><span class="na">gt</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">,</span><span class="mi">18</span><span class="p">);</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userDao</span><span class="p">.</span><span class="na">selectList</span><span class="p">(</span><span class="n">qw</span><span class="p">);</span><span class="w"></span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">userList</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<ul>
<li>格式二：链式编程格式</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">qw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">QueryWrapper</span><span class="p">();</span><span class="w"></span>
<span class="c1">//查询年龄大于等于18岁，小于65岁的用户</span><span class="w"></span>
<span class="n">qw</span><span class="p">.</span><span class="na">lt</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">,</span><span class="mi">65</span><span class="p">).</span><span class="na">gt</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">,</span><span class="mi">18</span><span class="p">);</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userDao</span><span class="p">.</span><span class="na">selectList</span><span class="p">(</span><span class="n">qw</span><span class="p">);</span><span class="w"></span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">userList</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<ul>
<li>格式三：Lambda格式（推荐</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">qw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">QueryWrapper</span><span class="p">();</span><span class="w"></span>
<span class="c1">//查询年龄大于等于18岁，小于65岁的用户</span><span class="w"></span>
<span class="n">qw</span><span class="p">.</span><span class="na">lambda</span><span class="p">().</span><span class="na">lt</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getAge</span><span class="p">,</span><span class="mi">65</span><span class="p">).</span><span class="na">gt</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getAge</span><span class="p">,</span><span class="mi">18</span><span class="p">);</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userDao</span><span class="p">.</span><span class="na">selectList</span><span class="p">(</span><span class="n">qw</span><span class="p">);</span><span class="w"></span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">userList</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<ul>
<li>格式四：Lambda格式（推荐</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">LambdaQueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lqw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LambdaQueryWrapper</span><span class="p">();</span><span class="w"></span>
<span class="n">lqw</span><span class="p">.</span><span class="na">lt</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getAge</span><span class="p">,</span><span class="mi">65</span><span class="p">).</span><span class="na">gt</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getAge</span><span class="p">,</span><span class="mi">18</span><span class="p">);</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userDao</span><span class="p">.</span><span class="na">selectList</span><span class="p">(</span><span class="n">lqw</span><span class="p">);</span><span class="w"></span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">userList</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<ul>
<li>直接连这写就是并且关系，
  或者使用 <code>lqw.lt(User::getAge,65).or().gt(User::getAge,18);</code>
  采用此种方式</li>
</ul>
<h4 id="null">关于null值处理<a class="headerlink" href="#null" title="Permanent link">&para;</a></h4>
<p>不建议使用 if else 去做判断处理，一般使用条件参数控制</p>
<p>其他方法同理</p>
<div class="highlight"><pre><span></span><code><span class="n">LambdaQueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lqw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LambdaQueryWrapper</span><span class="p">();</span><span class="w"></span>
<span class="n">lqw</span><span class="p">.</span><span class="na">lt</span><span class="p">(</span><span class="kc">null</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">userQuery</span><span class="p">.</span><span class="na">getAge</span><span class="p">(),</span><span class="n">User</span><span class="p">::</span><span class="n">getAge</span><span class="p">,</span><span class="mi">65</span><span class="p">);</span><span class="w"></span>
<span class="n">lqw</span><span class="p">.</span><span class="na">gt</span><span class="p">(</span><span class="kc">null</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">userQuery</span><span class="p">.</span><span class="na">getAge2</span><span class="p">(),</span><span class="n">User</span><span class="p">::</span><span class="n">getAge</span><span class="p">,</span><span class="mi">18</span><span class="p">);</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userDao</span><span class="p">.</span><span class="na">selectList</span><span class="p">(</span><span class="n">lqw</span><span class="p">);</span><span class="w"></span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">userList</span><span class="p">);</span><span class="w"></span>
<span class="c1">//上面有两个age参数是因为使用了新的实体类userQuery并继承了user新增了age2；</span><span class="w"></span>
<span class="c1">//当user中的某一个参数在进行查询时如果需要两个参数，而只填写了一个参数用此种办法</span><span class="w"></span>
<span class="c1">//比如 查询100元以下的商品，那么最低价值0没有填且值为null查询会失败，用此方法可以避免null的出现</span><span class="w"></span>
<span class="c1">//同样可以使用链式编程</span><span class="w"></span>
</code></pre></div>
<h4 id="_54">查询投影<a class="headerlink" href="#_54" title="Permanent link">&para;</a></h4>
<p>其实就是设置查询出来的结果长什么样 </p>
<ul>
<li>查询结果包含模型类中部分属性</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">LambdaQueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lqw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LambdaQueryWrapper</span><span class="p">();</span><span class="w"></span>
<span class="n">lqw</span><span class="p">.</span><span class="na">select</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getId</span><span class="p">,</span><span class="n">User</span><span class="p">::</span><span class="n">getName</span><span class="p">,</span><span class="n">User</span><span class="p">::</span><span class="n">getAge</span><span class="p">());</span><span class="c1">//查询的结果只包含这三个字段</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userDao</span><span class="p">.</span><span class="na">selectList</span><span class="p">(</span><span class="n">lqw</span><span class="p">);</span><span class="w"></span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">pringln</span><span class="p">(</span><span class="n">userList</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<ul>
<li>查询结果包含模型类中未定义的属性</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">qm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">QueryWrapper</span><span class="p">();</span><span class="w"></span>
<span class="n">qm</span><span class="p">.</span><span class="na">select</span><span class="p">(</span><span class="s">&quot;count(*) as nums, gender&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">//注意此处的是字符串</span><span class="w"></span>
<span class="n">qm</span><span class="p">.</span><span class="na">groupBy</span><span class="p">(</span><span class="s">&quot;gender&quot;</span><span class="p">);</span><span class="w">                 </span><span class="c1">//将按照gender来进行分组</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userDao</span><span class="p">.</span><span class="na">selectMaps</span><span class="p">(</span><span class="n">qm</span><span class="p">);</span><span class="w"></span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">pringln</span><span class="p">(</span><span class="n">maps</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<h4 id="_55">查询条件<a class="headerlink" href="#_55" title="Permanent link">&para;</a></h4>
<ul>
<li>一般匹配查询</li>
</ul>
<p><code>lqw.eq(User::getName,"jerry");  eq代表equals</code>查询 name 为jerry 的数据，可以使用链式格式</p>
<ul>
<li>范围匹配（ &gt; , = , between ）</li>
</ul>
<p>> lt , &gt;= le , &lt; gt , &lt;= ge , between</p>
<p>between的用法 <code>lqw.between(User::getAge,10,20)</code> 前面是小值</p>
<ul>
<li>
<p>模糊匹配（ like</p>
</li>
<li>
<p>空判定</p>
</li>
<li>
<p>包含性匹配（ in</p>
</li>
<li>
<p>分组（ group</p>
</li>
<li>
<p>排序（ order</p>
</li>
<li>
<p>。。。</p>
</li>
</ul>
<p>更多详细点击这里查看<a href="https://baomidou.com/pages/10c804/#abstractwrapper">条件构造器 | MyBatis-Plus (baomidou.com)</a></p>
<h4 id="_56">字段映射与表名映射<a class="headerlink" href="#_56" title="Permanent link">&para;</a></h4>
<ul>
<li>当你实体类中的个别属性名称与数据库中字段的名称不匹配时，无法自动完成装配等配置
  <code>eg:</code>数据库中的字段名成为 <code>pwd</code>，而你实体类中的为 <code>private String password</code>
  此时要使用注解来完成两者之间的关系</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@TableField</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;pwd&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">;</span><span class="w"></span>
<span class="c1">//value 为默认值可不添加</span><span class="w"></span>
</code></pre></div>
<ul>
<li>实体类中添加了数据库中未定义的字段</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@TableField</span><span class="p">(</span><span class="n">exist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">online</span><span class="p">;</span><span class="w"></span>
<span class="c1">//表明数据库中不存在这样一个字段</span><span class="w"></span>
</code></pre></div>
<ul>
<li>个别参数不参与查询
  使用 * 查询时，会转换成所有字段的查询。
  如果密码参与了查询，是有风险的
  我们就可以设置个别参数不参与查询</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@TableField</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;pwd&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<ul>
<li>表名和实体类名字不一样
  一般对于表我们采用见名知意的方法，与实体类设计时名字可能不太一样</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@TableName</span><span class="p">(</span><span class="s">&quot;tbl_user&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">user</span><span class="p">{}</span><span class="w"></span>
<span class="c1">//数据库中的表明为tbl_name </span><span class="w"></span>
</code></pre></div>
<h3 id="dml">DML编程控制<a class="headerlink" href="#dml" title="Permanent link">&para;</a></h3>
<p>DML完成增删改</p>
<p>id生成策略控制</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TableId</span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IdType</span><span class="p">.</span><span class="na">AUTO</span><span class="p">)</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"></span>
<span class="c1">//value设置数据库主键名称</span><span class="w"></span>
<span class="c1">//type设置主键属性的生成策略</span><span class="w"></span>
</code></pre></div>
<p>可以在配置文件中为当前项目中的使用的表的id的生成策略做全局配置，<code>@TableId</code>仍需使用</p>
<div class="highlight"><pre><span></span><code><span class="nt">mybatis-plus</span><span class="p">:</span><span class="w"> </span>
<span class="w"> </span><span class="nt">global-config</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">db-config</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">id-type</span><span class="p">:</span><span class="w"> </span><span class="c1">#会在此处又提醒，来配置就行了</span><span class="w"></span>
<span class="w">   </span><span class="nt">table-prefix</span><span class="p">:</span><span class="w"> </span><span class="c1">#来设置全局表名的前缀，省的手工指定表名</span><span class="w"></span>
<span class="w"> </span><span class="nt">configuration</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">log-impl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">org.apache.ibatis.logginh.stdout.StdOutImpl</span><span class="w"> </span><span class="c1">#日志记录</span><span class="w"></span>
</code></pre></div>
<ul>
<li>AUTO(0)：使用数据库ID自增策略控制id生成</li>
<li>NONE(1)：不设置id生成策略</li>
<li>INPUT(2)：用户手工输入ID</li>
<li>ASSIGN_ID(3)：雪花算法生成id（可兼容数值型与字符串型）（生成一个64为的二进制数</li>
<li>ASSIGN_UUID(4)：以UUID生成算法作为ID生成策略</li>
</ul>
<h4 id="_57">多记录操作<a class="headerlink" href="#_57" title="Permanent link">&para;</a></h4>
<p>根据主键删除多条记录</p>
<div class="highlight"><pre><span></span><code><span class="n">List</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Long</span><span class="o">[]</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">});</span><span class="w"></span>
<span class="n">userDao</span><span class="p">.</span><span class="na">deleteBatchIds</span><span class="p">(</span><span class="n">ids</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>根据主键查询多条记录</p>
<div class="highlight"><pre><span></span><code>List&lt;Long&gt; ids = Arrays.asList(new Long[]{2,3});
userDao.selectBatchIds(ids);
</code></pre></div>
<h4 id="_58">逻辑删除<a class="headerlink" href="#_58" title="Permanent link">&para;</a></h4>
<p>逻辑删除：为数据设置是否可种状态字段，删除时设置状态字段为不可用状态，数据保留在数据库中</p>
<p>在实体类中进行设置并进行约定</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TableLogic</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">delval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">deleted</span><span class="p">;</span><span class="w"></span>
<span class="c1">//value的值代表未删除，delval代表已经删除</span><span class="w"></span>
</code></pre></div>
<p>配置完成以后再进行删除操作就会更改<code>deleted</code>字段的值，而不是真正的删除数据
此时执行的sql语句从删除语句转换为了更新语句</p>
<p>使用 <code>selectList</code> 操作时查询语句后面会添加 <code>where deleted = 0</code>来过滤数据</p>
<p>使用配置文件配置，使用后<code>@TableLogic</code>仍需使用</p>
<div class="highlight"><pre><span></span><code><span class="nt">mybatis-plus</span><span class="p">:</span><span class="w"> </span>
<span class="w"> </span><span class="nt">global-config</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">db-config</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">logic-delete-field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deleted</span><span class="w">      </span><span class="c1">#表示配置逻辑删除的字段</span><span class="w"></span>
<span class="w">   </span><span class="nt">logic-not-delete-value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w">        </span><span class="c1">#表示未删除的默认字段</span><span class="w"></span>
<span class="w">   </span><span class="nt">logic-delete-value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w">            </span><span class="c1">#表示删除的默认字段</span><span class="w"></span>
</code></pre></div>
<h4 id="_59">乐观锁<a class="headerlink" href="#_59" title="Permanent link">&para;</a></h4>
<p>业务并发现象带来的问题：秒杀问题</p>
<p>就是根据获取version的值来进行判断某一操作执不执行</p>
<ol>
<li>
<p>数据库表中添加锁标记字段，一般字段名为version，值为int类型</p>
</li>
<li>
<p>实体类中添加对应字段，并设定当前字段为逻辑删除标记字段</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Version</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">version</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<ol>
<li>配置乐观锁拦截器实现锁机制对应的动态sql语句拼装</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MpConfig</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Bean</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">MybatisPlusInterceptor</span><span class="w"> </span><span class="nf">mpInterceptor</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="n">MybatisPlusInterceptor</span><span class="w"> </span><span class="n">mp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MybatisPlusInterceptor</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">mp</span><span class="p">.</span><span class="na">addInnerInterceptor</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">OptimisticLockerInnerceptor</span><span class="p">());</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">mp</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//上面分页查询也配置了一个</span><span class="w"></span>
</code></pre></div>
<ol>
<li>使用乐观锁机制在修改前必须先获取到对应数据的version方可正常进行</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="nf">testUpdate</span><span class="p">(){</span><span class="w"></span>
<span class="w">    </span><span class="c1">//先查询数据，获取到version数据</span><span class="w"></span>
<span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserDao</span><span class="p">.</span><span class="na">selectById</span><span class="p">(</span><span class="mi">1L</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//执行数据修改操作</span><span class="w"></span>
<span class="w">    </span><span class="n">user</span><span class="p">.</span><span class="na">serName</span><span class="p">(</span><span class="s">&quot;tom&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">userDao</span><span class="p">.</span><span class="na">updateById</span><span class="p">(</span><span class="n">user</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="_60">快速开发数据层<a class="headerlink" href="#_60" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Mapper</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">BookMapper</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseMapper</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>这样书写mapper即可，简单的增删改查在里面</p>
<p>提供的不满足使用时，自己去填写业务</p>
<h3 id="_61">快速开发业务层<a class="headerlink" href="#_61" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">//定义接口</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">BookService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">IService</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="p">{}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//实现类</span><span class="w"></span>
<span class="nd">@Service</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookServiceImpl</span><span class="w"> </span><span class="kd">extends</span><span class="w"></span>
<span class="w">    </span><span class="n">ServiceImpl</span><span class="o">&lt;</span><span class="n">BookMapper</span><span class="p">,</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">BookService</span><span class="p">{}</span><span class="w"></span>
</code></pre></div>
<p>提供的不满足使用时，自己去写业务</p>
<h3 id="_62">快速开发（前期自己开发不建议使用<a class="headerlink" href="#_62" title="Permanent link">&para;</a></h3>
<h4 id="_63">代码生成器<a class="headerlink" href="#_63" title="Permanent link">&para;</a></h4>
<ul>
<li>模板：MybatisPlus提供</li>
<li>数据库相关配置：读取数据库获取信息</li>
<li>开发者自定义配置：手工配置</li>
</ul>
<p>先引入坐标</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--代码生成器--&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.baomidou<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>mybatis-plus-generator<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>...<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="cm">&lt;!--velocity模板引擎--&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apache.velocity<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>ve<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>...<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>配置代码</p>
<p>会自动生成对应的文件</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CodeGenerator</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">//1.获取代码生成器的对象</span><span class="w"></span>
<span class="w">        </span><span class="n">AutoGenerator</span><span class="w"> </span><span class="n">autoGenerator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AutoGenerator</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">//设置数据库相关配置</span><span class="w"></span>
<span class="w">        </span><span class="n">DataSourceConfig</span><span class="w"> </span><span class="n">dataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSourceConfig</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">setDriverName</span><span class="p">(</span><span class="s">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">setUrl</span><span class="p">(</span><span class="s">&quot;jdbc:mysql://localhost:3306/mybatisplus_db?serverTimezone=UTC&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;root&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">setPassword</span><span class="p">(</span><span class="s">&quot;root&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">autoGenerator</span><span class="p">.</span><span class="na">setDataSource</span><span class="p">(</span><span class="n">dataSource</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">//设置全局配置</span><span class="w"></span>
<span class="w">        </span><span class="n">GlobalConfig</span><span class="w"> </span><span class="n">globalConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GlobalConfig</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">globalConfig</span><span class="p">.</span><span class="na">setOutputDir</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;user.dir&quot;</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;/mybatisplus_04_generator/src/main/java&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">//设置代码生成位置</span><span class="w"></span>
<span class="w">        </span><span class="n">globalConfig</span><span class="p">.</span><span class="na">setOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">    </span><span class="c1">//设置生成完毕后是否打开生成代码所在的目录</span><span class="w"></span>
<span class="w">        </span><span class="n">globalConfig</span><span class="p">.</span><span class="na">setAuthor</span><span class="p">(</span><span class="s">&quot;黑马程序员&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">//设置作者</span><span class="w"></span>
<span class="w">        </span><span class="n">globalConfig</span><span class="p">.</span><span class="na">setFileOverride</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">     </span><span class="c1">//设置是否覆盖原始生成的文件</span><span class="w"></span>
<span class="w">        </span><span class="n">globalConfig</span><span class="p">.</span><span class="na">setMapperName</span><span class="p">(</span><span class="s">&quot;%sDao&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">//设置数据层接口名，%s为占位符，指代模块名称</span><span class="w"></span>
<span class="w">        </span><span class="n">globalConfig</span><span class="p">.</span><span class="na">setIdType</span><span class="p">(</span><span class="n">IdType</span><span class="p">.</span><span class="na">ASSIGN_ID</span><span class="p">);</span><span class="w">   </span><span class="c1">//设置Id生成策略</span><span class="w"></span>
<span class="w">        </span><span class="n">autoGenerator</span><span class="p">.</span><span class="na">setGlobalConfig</span><span class="p">(</span><span class="n">globalConfig</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">//设置包名相关配置</span><span class="w"></span>
<span class="w">        </span><span class="n">PackageConfig</span><span class="w"> </span><span class="n">packageInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PackageConfig</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">packageInfo</span><span class="p">.</span><span class="na">setParent</span><span class="p">(</span><span class="s">&quot;com.aaa&quot;</span><span class="p">);</span><span class="w">   </span><span class="c1">//设置生成的包名，与代码所在位置不冲突，二者叠加组成完整路径</span><span class="w"></span>
<span class="w">        </span><span class="n">packageInfo</span><span class="p">.</span><span class="na">setEntity</span><span class="p">(</span><span class="s">&quot;domain&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">//设置实体类包名</span><span class="w"></span>
<span class="w">        </span><span class="n">packageInfo</span><span class="p">.</span><span class="na">setMapper</span><span class="p">(</span><span class="s">&quot;dao&quot;</span><span class="p">);</span><span class="w">   </span><span class="c1">//设置数据层包名</span><span class="w"></span>
<span class="w">        </span><span class="n">autoGenerator</span><span class="p">.</span><span class="na">setPackageInfo</span><span class="p">(</span><span class="n">packageInfo</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">//策略设置</span><span class="w"></span>
<span class="w">        </span><span class="n">StrategyConfig</span><span class="w"> </span><span class="n">strategyConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StrategyConfig</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">strategyConfig</span><span class="p">.</span><span class="na">setInclude</span><span class="p">(</span><span class="s">&quot;tbl_user&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">//设置当前参与生成的表名，参数为可变参数</span><span class="w"></span>
<span class="w">        </span><span class="n">strategyConfig</span><span class="p">.</span><span class="na">setTablePrefix</span><span class="p">(</span><span class="s">&quot;tbl_&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">//设置数据库表的前缀名称，模块名 = 数据库表名 - 前缀名  例如： User = tbl_user - tbl_</span><span class="w"></span>
<span class="w">        </span><span class="n">strategyConfig</span><span class="p">.</span><span class="na">setRestControllerStyle</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">    </span><span class="c1">//设置是否启用Rest风格</span><span class="w"></span>
<span class="w">        </span><span class="n">strategyConfig</span><span class="p">.</span><span class="na">setVersionFieldName</span><span class="p">(</span><span class="s">&quot;version&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">//设置乐观锁字段名</span><span class="w"></span>
<span class="w">        </span><span class="n">strategyConfig</span><span class="p">.</span><span class="na">setLogicDeleteFieldName</span><span class="p">(</span><span class="s">&quot;deleted&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">//设置逻辑删除字段名</span><span class="w"></span>
<span class="w">        </span><span class="n">strategyConfig</span><span class="p">.</span><span class="na">setEntityLombokModel</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">  </span><span class="c1">//设置是否启用lombok</span><span class="w"></span>
<span class="w">        </span><span class="n">autoGenerator</span><span class="p">.</span><span class="na">setStrategy</span><span class="p">(</span><span class="n">strategyConfig</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">//2.执行生成操作</span><span class="w"></span>
<span class="w">        </span><span class="n">autoGenerator</span><span class="p">.</span><span class="na">execute</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Lombok</p>
<p>简化实体类的开发</p>
<p>先导入jar坐标</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.projectlombok<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>lombok<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
    <span class="cm">&lt;!--scope不配也没关系，版本由SpringBoot管理--&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Setter</span><span class="w">                 </span><span class="c1">//完成setter方法</span><span class="w"></span>
<span class="nd">@Getter</span><span class="w">                 </span><span class="c1">//完成getter方法</span><span class="w"></span>
<span class="nd">@ToString</span><span class="w">               </span><span class="c1">//完成tostring方法</span><span class="w"></span>
<span class="nd">@NoargsConstructor</span><span class="w">      </span><span class="c1">//无参构造方法</span><span class="w"></span>
<span class="nd">@AllArgsConstructor</span><span class="w">     </span><span class="c1">//全部参数构造方法</span><span class="w"></span>
<span class="nd">@EqualsAndHashCode</span><span class="w">      </span><span class="c1">//equals和hashCode方法</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">in</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="c1">//上面的配置较多，建议使用@Data注解来进行开发，上面的除了构造方法全部包含</span><span class="w"></span>
</code></pre></div>
<h2 id="_64">开发顺序<a class="headerlink" href="#_64" title="Permanent link">&para;</a></h2>
<ol>
<li>pom.xml                      配置起步依赖</li>
<li>application.yml           设置数据源、端口、框架技术相关配置等</li>
<li>dao                              继承BaseMapper、设置@Mapper</li>
<li>dao测试类</li>
<li>service                          调用数据层接口或Mybatis-plus提供的接口快速开发</li>
<li>service测试类</li>
<li>controller                       基于Restful开发，使用Postman测试能否跑通功能</li>
<li>页面                               放置在resource目录下的static目录中</li>
</ol>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="../MyBatisPlus/" class="md-footer__link md-footer__link--prev" aria-label="上一页: MyBatisPlus" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              MyBatisPlus
            </div>
          </div>
        </a>
      
      
        
        <a href="../%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%AC%94%E8%AE%B0/" class="md-footer__link md-footer__link--next" aria-label="下一页: 瑞吉外卖笔记" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              瑞吉外卖笔记
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 韩永琰
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://space.bilibili.com/358218864" target="_blank" rel="noopener" title="Bilibili | 愿你决定" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0s16.1 2.868 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0c8.8 0 16.1 2.868 21.9 8.603 5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1zm-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8 6.3-6.5 9.7-14.3 10.1-23.5V173.8zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5-9.6 0-17.5-3.2-23.6-9.5-6.1-6.3-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2 6.3-6.3 13.2-9.6 23.3-10 9.2.4 17 3.7 23.3 10zm191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.1 6.3-14 9.5-23.6 9.5-9.6 0-17.4-3.2-23.6-9.5-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2 6.3-6.3 14.1-9.6 23.3-10 9.2.4 17 3.7 23.3 10z"/></svg>
    </a>
  
    
    
    <a href="https://github.com/hanyongyan" target="_blank" rel="noopener" title="GitHub | hanyongyan" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.top", "navigation.indexes", "navigation.expand", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../../../mkdocs/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
    
  </body>
</html>