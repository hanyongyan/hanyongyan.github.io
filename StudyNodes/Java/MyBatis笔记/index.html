
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="韩永琰的个人网站">
      
      
        <meta name="author" content="韩永琰">
      
      
        <link rel="canonical" href="https://hanyongyan.github.io/StudyNodes/Java/MyBatis%E7%AC%94%E8%AE%B0/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>MyBatis - 韩永琰的个人网站</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../mkdocs/css/no-footer.css">
    
      <link rel="stylesheet" href="../../../mkdocs/css/unordered-list-symbols.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mybatis" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="韩永琰的个人网站" class="md-header__button md-logo" aria-label="韩永琰的个人网站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            韩永琰的个人网站
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              MyBatis
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="切换至夜间模式"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="切换至夜间模式" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="切换至日间模式"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="切换至日间模式" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hanyongyan/hanyongyan.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    hanyongyan.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        学习笔记
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="韩永琰的个人网站" class="md-nav__button md-logo" aria-label="韩永琰的个人网站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    韩永琰的个人网站
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hanyongyan/hanyongyan.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    hanyongyan.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">学习笔记</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="学习笔记" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          学习笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/Linux/" class="md-nav__link">
        Linux入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/Vim/" class="md-nav__link">
        Vim
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_3">
          MySql
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MySql" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          MySql
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../MySql/MySQL%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        Mysql
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_4">
          js
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="js" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          js
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JS/Ajax/" class="md-nav__link">
        Ajax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JS/jQuery/" class="md-nav__link">
        jQuery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JS/JS/" class="md-nav__link">
        javaScript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JS/TypeScript%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        TypeScript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JS/Node.js/" class="md-nav__link">
        nodejs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_5">
          java
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="java" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          java
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../JavaWeb/" class="md-nav__link">
        JavaWeb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Maven/" class="md-nav__link">
        Maven
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          MyBatis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        MyBatis
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mybatis_1" class="md-nav__link">
    MyBatis历史
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mybatis_2" class="md-nav__link">
    MyBatis特性
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mybatis_3" class="md-nav__link">
    MyBatis下载
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    和其它持久化层技术对比
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MyBatisPlus/" class="md-nav__link">
        MyBatisPlus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SSM/" class="md-nav__link">
        SSM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        瑞吉外卖笔记
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/" class="md-nav__link">
        Nacos
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_6">
          Git
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Git" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/Git/" class="md-nav__link">
        git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.1-Git%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97%28%E4%B8%8A%29/" class="md-nav__link">
        1.1Git简易指南
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.2-%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93/" class="md-nav__link">
        1.2创建代码仓库
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.3-%E4%BF%9D%E5%AD%98%E4%BD%A0%E7%9A%84%E6%9B%B4%E6%94%B9/" class="md-nav__link">
        1.3保存更改
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.4-%E6%9F%A5%E7%9C%8B%E4%BB%93%E5%BA%93%E7%8A%B6%E6%80%81/" class="md-nav__link">
        1.4查看仓库状态
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.5-检查以前的提交.md" class="md-nav__link">
        1.5检查以前的提交
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.6-%E5%9B%9E%E6%BB%9A%E9%94%99%E8%AF%AF%E7%9A%84%E4%BF%AE%E6%94%B9/" class="md-nav__link">
        1.6回滚错误的修改
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.7-%E9%87%8D%E5%86%99%E9%A1%B9%E7%9B%AE%E5%8E%86%E5%8F%B2/" class="md-nav__link">
        1.7重写项目历史
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/3.2-%E4%BF%9D%E6%8C%81%E4%BB%A3%E7%A0%81%E5%90%8C%E6%AD%A5/" class="md-nav__link">
        2.1保持代码同步
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/3.3-%E5%88%9B%E5%BB%BAPullRequest/" class="md-nav__link">
        2.2创建PullRequest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/3.4-%E4%BD%BF%E7%94%A8%E5%88%86%E6%94%AF/" class="md-nav__link">
        2.3使用分支
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/常见工作流比较.md" class="md-nav__link">
        2.4常见工作流比较
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/4-Git%E5%9B%BE%E8%A7%A3/" class="md-nav__link">
        3Git图解
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6Merge%E8%BF%98%E6%98%AFRebase/" class="md-nav__link">
        4.1代码合并Merge还是Rebase
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.2-%E5%9B%9E%E6%BB%9A%E5%91%BD%E4%BB%A4Reset%E3%80%81Checkout%E3%80%81Revert%E8%BE%A8%E6%9E%90/" class="md-nav__link">
        4.2回滚命令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.3-Git_log%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/" class="md-nav__link">
        4.3Git_log高级用法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.4-Git%E9%92%A9%E5%AD%90/" class="md-nav__link">
        4.4Git钩子
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.5-Git%E6%8F%90%E4%BA%A4%E5%BC%95%E7%94%A8/" class="md-nav__link">
        4.5Git提交引用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mybatis_1" class="md-nav__link">
    MyBatis历史
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mybatis_2" class="md-nav__link">
    MyBatis特性
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mybatis_3" class="md-nav__link">
    MyBatis下载
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    和其它持久化层技术对比
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  



  <a href="https://github.com/hanyongyan/hanyongyan.github.io/edit/main/docs/StudyNodes/Java/MyBatis笔记.md" title="编辑此页" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="mybatis">Mybatis简介<a class="headerlink" href="#mybatis" title="Permanent link">&para;</a></h1>
<h2 id="mybatis_1">MyBatis历史<a class="headerlink" href="#mybatis_1" title="Permanent link">&para;</a></h2>
<ul>
<li>MyBatis最初是Apache的一个开源项目iBatis, 2010年6月这个项目由Apache Software Foundation迁移到了Google Code。随着开发团队转投Google Code旗下，iBatis3.x正式更名为MyBatis。代码于2013年11月迁移到Github</li>
<li>iBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。iBatis提供的持久层框架包括SQL Maps和Data Access Objects（DAO）</li>
</ul>
<h2 id="mybatis_2">MyBatis特性<a class="headerlink" href="#mybatis_2" title="Permanent link">&para;</a></h2>
<ol>
<li>MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架</li>
<li>MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集</li>
<li>MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java Objects，普通的Java对象）映射成数据库中的记录</li>
<li>MyBatis 是一个 半自动的ORM（Object Relation Mapping）框架</li>
</ol>
<h2 id="mybatis_3">MyBatis下载<a class="headerlink" href="#mybatis_3" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/mybatis/mybatis-3">MyBatis下载地址</a></li>
<li><img alt="" src="Resources/MyBatis下载.png" /></li>
</ul>
<h2 id="_1">和其它持久化层技术对比<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<ul>
<li>JDBC  <ul>
<li>SQL 夹杂在Java代码中耦合度高，导致硬编码内伤  </li>
<li>维护不易且实际开发需求中 SQL 有变化，频繁修改的情况多见  </li>
<li>代码冗长，开发效率低</li>
</ul>
</li>
<li>Hibernate 和 JPA<ul>
<li>操作简便，开发效率高  </li>
<li>程序中的长难复杂 SQL 需要绕过框架  </li>
<li>内部自动生产的 SQL，不容易做特殊优化  </li>
<li>基于全映射的全自动框架，大量字段的 POJO 进行部分映射时比较困难。  </li>
<li>反射操作太多，导致数据库性能下降</li>
</ul>
</li>
<li>MyBatis<ul>
<li>轻量级，性能出色  </li>
<li>SQL 和 Java 编码分开，功能边界清晰。Java代码专注业务、SQL语句专注数据  </li>
<li>开发效率稍逊于HIbernate，但是完全能够接受</li>
</ul>
</li>
</ul>
<h1 id="mybatis_4">搭建MyBatis<a class="headerlink" href="#mybatis_4" title="Permanent link">&para;</a></h1>
<h2 id="_2">开发环境<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<ul>
<li>IDE：idea 2019.2  </li>
<li>构建工具：maven 3.5.4  </li>
<li>MySQL版本：MySQL 5.7  </li>
<li>MyBatis版本：MyBatis 3.5.7</li>
</ul>
<h2 id="maven">创建maven工程<a class="headerlink" href="#maven" title="Permanent link">&para;</a></h2>
<ul>
<li>打包方式：jar</li>
<li>引入依赖</li>
</ul>
<div class="highlight"><pre><span></span><code>```xml
<span class="nt">&lt;dependencies&gt;</span>
    <span class="cm">&lt;!-- Mybatis核心 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>mybatis<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>3.5.7<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="cm">&lt;!-- junit测试 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>4.12<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="cm">&lt;!-- MySQL驱动 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>5.1.3<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
```
</code></pre></div>
<h2 id="mybatis_5">创建MyBatis的核心配置文件<a class="headerlink" href="#mybatis_5" title="Permanent link">&para;</a></h2>
<blockquote>
<p>习惯上命名为<code>mybatis-config.xml</code>，这个文件名仅仅只是建议，并非强制要求。将来整合Spring之后，这个配置文件可以省略，所以大家操作时可以直接复制、粘贴。
核心配置文件主要用于配置连接数据库的环境以及MyBatis的全局配置信息
核心配置文件存放的位置是src/main/resources目录下
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>  
<span class="cp">&lt;!DOCTYPE configuration  </span>
<span class="cp">PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;  </span>
<span class="cp">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span>  
<span class="nt">&lt;configuration&gt;</span>  
    <span class="cm">&lt;!--设置连接数据库的环境--&gt;</span>  
    <span class="nt">&lt;environments</span> <span class="na">default=</span><span class="s">&quot;development&quot;</span><span class="nt">&gt;</span>  
        <span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">&quot;development&quot;</span><span class="nt">&gt;</span>  
            <span class="nt">&lt;transactionManager</span> <span class="na">type=</span><span class="s">&quot;JDBC&quot;</span><span class="nt">/&gt;</span>  
            <span class="nt">&lt;dataSource</span> <span class="na">type=</span><span class="s">&quot;POOLED&quot;</span><span class="nt">&gt;</span>  
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;driver&quot;</span> <span class="na">value=</span><span class="s">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="nt">/&gt;</span>  
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;url&quot;</span> <span class="na">value=</span><span class="s">&quot;jdbc:mysql://localhost:3306/MyBatis&quot;</span><span class="nt">/&gt;</span>  
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">value=</span><span class="s">&quot;root&quot;</span><span class="nt">/&gt;</span>  
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">value=</span><span class="s">&quot;123456&quot;</span><span class="nt">/&gt;</span>  
            <span class="nt">&lt;/dataSource&gt;</span>  
        <span class="nt">&lt;/environment&gt;</span>  
    <span class="nt">&lt;/environments&gt;</span>  
    <span class="cm">&lt;!--引入映射文件--&gt;</span>  
    <span class="nt">&lt;mappers&gt;</span>  
        <span class="nt">&lt;mapper</span> <span class="na">resource=</span><span class="s">&quot;mappers/UserMapper.xml&quot;</span><span class="nt">/&gt;</span>  
    <span class="nt">&lt;/mappers&gt;</span>  
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></p>
</blockquote>
<h2 id="mapper">创建mapper接口<a class="headerlink" href="#mapper" title="Permanent link">&para;</a></h2>
<blockquote>
<p>MyBatis中的mapper接口相当于以前的dao。但是区别在于，mapper仅仅是接口，我们不需要提供实现类
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.atguigu.mybatis.mapper</span><span class="p">;</span><span class="w">  </span>

<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserMapper</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">    </span><span class="cm">/**  </span>
<span class="cm">    * 添加用户信息  </span>
<span class="cm">    */</span><span class="w">  </span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">insertUser</span><span class="p">();</span><span class="w">  </span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
</blockquote>
<h2 id="mybatis_6">创建MyBatis的映射文件<a class="headerlink" href="#mybatis_6" title="Permanent link">&para;</a></h2>
<ul>
<li>相关概念：ORM（Object Relationship Mapping）对象关系映射。  <ul>
<li>对象：Java的实体类对象  </li>
<li>关系：关系型数据库  </li>
<li>映射：二者之间的对应关系</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>Java概念</th>
<th>数据库概念</th>
</tr>
</thead>
<tbody>
<tr>
<td>类</td>
<td>表</td>
</tr>
<tr>
<td>属性</td>
<td>字段/列</td>
</tr>
<tr>
<td>对象</td>
<td>记录/行</td>
</tr>
</tbody>
</table>
<ul>
<li>映射文件的命名规则<ul>
<li>表所对应的实体类的类名+Mapper.xml</li>
<li>例如：表t_user，映射的实体类为User，所对应的映射文件为UserMapper.xml </li>
<li>因此一个映射文件对应一个实体类，对应一张表的操作</li>
<li>MyBatis映射文件用于编写SQL，访问以及操作表中的数据</li>
<li>MyBatis映射文件存放的位置是src/main/resources/mappers目录下</li>
</ul>
</li>
<li>MyBatis中可以面向接口操作数据，要保证两个一致<ul>
<li>mapper接口的全类名和映射文件的命名空间（namespace）保持一致</li>
<li>mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>  
<span class="cp">&lt;!DOCTYPE mapper  </span>
<span class="cp">PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;  </span>
<span class="cp">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>  
<span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">&quot;com.atguigu.mybatis.mapper.UserMapper&quot;</span><span class="nt">&gt;</span>  
    <span class="cm">&lt;!--int insertUser();--&gt;</span>  
    <span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&quot;insertUser&quot;</span><span class="nt">&gt;</span>  
        insert into t_user values(null,&#39;张三&#39;,&#39;123&#39;,23,&#39;女&#39;)  
    <span class="nt">&lt;/insert&gt;</span>  
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div></li>
</ul>
</li>
</ul>
<h2 id="junit">通过junit测试功能<a class="headerlink" href="#junit" title="Permanent link">&para;</a></h2>
<ul>
<li>SqlSession：代表Java程序和数据库之间的会话。（HttpSession是Java程序和浏览器之间的会话）</li>
<li>SqlSessionFactory：是“生产”SqlSession的“工厂”</li>
<li>工厂模式：如果创建某一个对象，使用的过程基本固定，那么我们就可以把创建这个对象的相关代码封装到一个“工厂类”中，以后都使用这个工厂类来“生产”我们需要的对象
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserMapperTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testInsertUser</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">//读取MyBatis的核心配置文件</span><span class="w"></span>
<span class="w">        </span><span class="n">InputStream</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="s">&quot;mybatis-config.xml&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">//获取SqlSessionFactoryBuilder对象</span><span class="w"></span>
<span class="w">        </span><span class="n">SqlSessionFactoryBuilder</span><span class="w"> </span><span class="n">sqlSessionFactoryBuilder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">//通过核心配置文件所对应的字节输入流创建工厂类SqlSessionFactory，生产SqlSession对象</span><span class="w"></span>
<span class="w">        </span><span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactoryBuilder</span><span class="p">.</span><span class="na">build</span><span class="p">(</span><span class="n">is</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">//获取sqlSession，此时通过SqlSession对象所操作的sql都必须手动提交或回滚事务</span><span class="w"></span>
<span class="w">        </span><span class="c1">//SqlSession sqlSession = sqlSessionFactory.openSession();</span><span class="w"></span>
<span class="w">        </span><span class="c1">//创建SqlSession对象，此时通过SqlSession对象所操作的sql都会自动提交  </span><span class="w"></span>
<span class="w">        </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="p">.</span><span class="na">openSession</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">//通过代理模式创建UserMapper接口的代理实现类对象</span><span class="w"></span>
<span class="w">        </span><span class="n">UserMapper</span><span class="w"> </span><span class="n">userMapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">UserMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">//调用UserMapper接口中的方法，就可以根据UserMapper的全类名匹配元素文件，通过调用的方法名匹配映射文件中的SQL标签，并执行标签中的SQL语句</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userMapper</span><span class="p">.</span><span class="na">insertUser</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">//提交事务</span><span class="w"></span>
<span class="w">        </span><span class="c1">//sqlSession.commit();</span><span class="w"></span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;result:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">result</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></li>
<li>此时需要手动提交事务，如果要自动提交事务，则在获取sqlSession对象时，使用<code>SqlSession sqlSession = sqlSessionFactory.openSession(true);</code>，传入一个Boolean类型的参数，值为true，这样就可以自动提交</li>
</ul>
<h2 id="log4j">加入log4j日志功能<a class="headerlink" href="#log4j" title="Permanent link">&para;</a></h2>
<ol>
<li>加入依赖
    <div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- log4j日志 --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="nt">&lt;groupId&gt;</span>log4j<span class="nt">&lt;/groupId&gt;</span>
<span class="nt">&lt;artifactId&gt;</span>log4j<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;version&gt;</span>1.2.17<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></li>
<li>加入log4j的配置文件<ul>
<li>log4j的配置文件名为log4j.xml，存放的位置是src/main/resources目录下</li>
<li>日志的级别：FATAL(致命)&gt;ERROR(错误)&gt;WARN(警告)&gt;INFO(信息)&gt;DEBUG(调试) 从左到右打印的内容越来越详细
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;</span>
<span class="nt">&lt;log4j:configuration</span> <span class="na">xmlns:log4j=</span><span class="s">&quot;http://jakarta.apache.org/log4j/&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">&quot;STDOUT&quot;</span> <span class="na">class=</span><span class="s">&quot;org.apache.log4j.ConsoleAppender&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;Encoding&quot;</span> <span class="na">value=</span><span class="s">&quot;UTF-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">&quot;org.apache.log4j.PatternLayout&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;ConversionPattern&quot;</span> <span class="na">value=</span><span class="s">&quot;%-5p %d{MM-dd HH:mm:ss,SSS} %m (%F:%L) \n&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/layout&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">&quot;java.sql&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;level</span> <span class="na">value=</span><span class="s">&quot;debug&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/logger&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">&quot;org.apache.ibatis&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;level</span> <span class="na">value=</span><span class="s">&quot;info&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/logger&gt;</span>
    <span class="nt">&lt;root&gt;</span>
        <span class="nt">&lt;level</span> <span class="na">value=</span><span class="s">&quot;debug&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&quot;STDOUT&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/root&gt;</span>
<span class="nt">&lt;/log4j:configuration&gt;</span>
</code></pre></div></li>
</ul>
</li>
</ol>
<h1 id="_3">核心配置文件详解<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h1>
<blockquote>
<p>核心配置文件中的标签必须按照固定的顺序(有的标签可以不写，但顺序一定不能乱)：
properties、settings、typeAliases、typeHandlers、objectFactory、objectWrapperFactory、reflectorFactory、plugins、environments、databaseIdProvider、mappers
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE configuration</span>
<span class="cp">        PUBLIC &quot;-//MyBatis.org//DTD Config 3.0//EN&quot;</span>
<span class="cp">        &quot;http://MyBatis.org/dtd/MyBatis-3-config.dtd&quot;&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
    <span class="cm">&lt;!--引入properties文件，此时就可以${属性名}的方式访问属性值--&gt;</span>
    <span class="nt">&lt;properties</span> <span class="na">resource=</span><span class="s">&quot;jdbc.properties&quot;</span><span class="nt">&gt;&lt;/properties&gt;</span>
    <span class="nt">&lt;settings&gt;</span>
        <span class="cm">&lt;!--将表中字段的下划线自动转换为驼峰--&gt;</span>
        <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
        <span class="cm">&lt;!--开启延迟加载--&gt;</span>
        <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">&quot;lazyLoadingEnabled&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/settings&gt;</span>
    <span class="nt">&lt;typeAliases&gt;</span>
        <span class="cm">&lt;!--</span>
<span class="cm">        typeAlias：设置某个具体的类型的别名</span>
<span class="cm">        属性：</span>
<span class="cm">        type：需要设置别名的类型的全类名</span>
<span class="cm">        alias：设置此类型的别名，且别名不区分大小写。若不设置此属性，该类型拥有默认的别名，即类名</span>
<span class="cm">        --&gt;</span>
        <span class="cm">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot;&gt;&lt;/typeAlias&gt;--&gt;</span>
        <span class="cm">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot; alias=&quot;user&quot;&gt;</span>
<span class="cm">        &lt;/typeAlias&gt;--&gt;</span>
        <span class="cm">&lt;!--以包为单位，设置改包下所有的类型都拥有默认的别名，即类名且不区分大小写--&gt;</span>
        <span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">&quot;com.atguigu.mybatis.bean&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/typeAliases&gt;</span>
    <span class="cm">&lt;!--</span>
<span class="cm">    environments：设置多个连接数据库的环境</span>
<span class="cm">    属性：</span>
<span class="cm">        default：设置默认使用的环境的id</span>
<span class="cm">    --&gt;</span>
    <span class="nt">&lt;environments</span> <span class="na">default=</span><span class="s">&quot;mysql_test&quot;</span><span class="nt">&gt;</span>
        <span class="cm">&lt;!--</span>
<span class="cm">        environment：设置具体的连接数据库的环境信息</span>
<span class="cm">        属性：</span>
<span class="cm">            id：设置环境的唯一标识，可通过environments标签中的default设置某一个环境的id，表示默认使用的环境</span>
<span class="cm">        --&gt;</span>
        <span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">&quot;mysql_test&quot;</span><span class="nt">&gt;</span>
            <span class="cm">&lt;!--</span>
<span class="cm">            transactionManager：设置事务管理方式</span>
<span class="cm">            属性：</span>
<span class="cm">                type：设置事务管理方式，type=&quot;JDBC|MANAGED&quot;</span>
<span class="cm">                type=&quot;JDBC&quot;：设置当前环境的事务管理都必须手动处理</span>
<span class="cm">                type=&quot;MANAGED&quot;：设置事务被管理，例如spring中的AOP</span>
<span class="cm">            --&gt;</span>
            <span class="nt">&lt;transactionManager</span> <span class="na">type=</span><span class="s">&quot;JDBC&quot;</span><span class="nt">/&gt;</span>
            <span class="cm">&lt;!--</span>
<span class="cm">            dataSource：设置数据源</span>
<span class="cm">            属性：</span>
<span class="cm">                type：设置数据源的类型，type=&quot;POOLED|UNPOOLED|JNDI&quot;</span>
<span class="cm">                type=&quot;POOLED&quot;：使用数据库连接池，即会将创建的连接进行缓存，下次使用可以从缓存中直接获取，不需要重新创建</span>
<span class="cm">                type=&quot;UNPOOLED&quot;：不使用数据库连接池，即每次使用连接都需要重新创建</span>
<span class="cm">                type=&quot;JNDI&quot;：调用上下文中的数据源</span>
<span class="cm">            --&gt;</span>
            <span class="nt">&lt;dataSource</span> <span class="na">type=</span><span class="s">&quot;POOLED&quot;</span><span class="nt">&gt;</span>
                <span class="cm">&lt;!--设置驱动类的全类名--&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;driver&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.driver}&quot;</span><span class="nt">/&gt;</span>
                <span class="cm">&lt;!--设置连接数据库的连接地址--&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;url&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.url}&quot;</span><span class="nt">/&gt;</span>
                <span class="cm">&lt;!--设置连接数据库的用户名--&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.username}&quot;</span><span class="nt">/&gt;</span>
                <span class="cm">&lt;!--设置连接数据库的密码--&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.password}&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/dataSource&gt;</span>
        <span class="nt">&lt;/environment&gt;</span>
    <span class="nt">&lt;/environments&gt;</span>
    <span class="cm">&lt;!--引入映射文件--&gt;</span>
    <span class="nt">&lt;mappers&gt;</span>
        <span class="cm">&lt;!-- &lt;mapper resource=&quot;UserMapper.xml&quot;/&gt; --&gt;</span>
        <span class="cm">&lt;!--</span>
<span class="cm">        以包为单位，将包下所有的映射文件引入核心配置文件</span>
<span class="cm">        注意：</span>
<span class="cm">            1. 此方式必须保证mapper接口和mapper映射文件必须在相同的包下</span>
<span class="cm">            2. mapper接口要和mapper映射文件的名字一致</span>
<span class="cm">        --&gt;</span>
        <span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">&quot;com.atguigu.mybatis.mapper&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/mappers&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div>
- <img alt="" src="Resources/mapper接口和mapper映射文件在同一包下.png" /></p>
</blockquote>
<h1 id="_4">默认的类型别名<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h1>
<p><img alt="" src="Resources/默认的类型别名1.png" />
<img alt="" src="Resources/默认的类型别名2.png" /></p>
<h1 id="mybatis_7">MyBatis的增删改查<a class="headerlink" href="#mybatis_7" title="Permanent link">&para;</a></h1>
<ol>
<li>添加
    <div class="highlight"><pre><span></span><code><span class="cm">&lt;!--int insertUser();--&gt;</span>
<span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&quot;insertUser&quot;</span><span class="nt">&gt;</span>
    insert into t_user values(null,&#39;admin&#39;,&#39;123456&#39;,23,&#39;男&#39;,&#39;12345@qq.com&#39;)
<span class="nt">&lt;/insert&gt;</span>
</code></pre></div></li>
<li>删除
    <div class="highlight"><pre><span></span><code><span class="cm">&lt;!--int deleteUser();--&gt;</span>
<span class="nt">&lt;delete</span> <span class="na">id=</span><span class="s">&quot;deleteUser&quot;</span><span class="nt">&gt;</span>
    delete from t_user where id = 6
<span class="nt">&lt;/delete&gt;</span>
</code></pre></div></li>
<li>修改
    <div class="highlight"><pre><span></span><code><span class="cm">&lt;!--int updateUser();--&gt;</span>
<span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">&quot;updateUser&quot;</span><span class="nt">&gt;</span>
    update t_user set username = &#39;张三&#39; where id = 5
<span class="nt">&lt;/update&gt;</span>
</code></pre></div></li>
<li>查询一个实体类对象
    ```xml
   <!--User getUserById();--></li>
</ol>
<p><select id="getUserById" resultType="com.atguigu.mybatis.bean.User"><br />
        select * from t_user where id = 2<br />
    </select>
    ```
5. 查询集合
    <div class="highlight"><pre><span></span><code><span class="cm">&lt;!--List&lt;User&gt; getUserList();--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getUserList&quot;</span> <span class="na">resultType=</span><span class="s">&quot;com.atguigu.mybatis.bean.User&quot;</span><span class="nt">&gt;</span>
    select * from t_user
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
- 注意：</p>
<div class="highlight"><pre><span></span><code>1. 查询的标签select必须设置属性resultType或resultMap，用于设置实体类和数据库表的映射关系  
    - resultType：自动映射，用于属性名和表中字段名一致的情况  
    - resultMap：自定义映射，用于一对多或多对一或字段名和属性名不一致的情况  
2. 当查询的数据为多条时，不能使用实体类作为返回值，只能使用集合，否则会抛出异常TooManyResultsException；但是若查询的数据只有一条，可以使用实体类或集合作为返回值
</code></pre></div>
<h1 id="mybatis_8">MyBatis获取参数值的两种方式（重点）<a class="headerlink" href="#mybatis_8" title="Permanent link">&para;</a></h1>
<ul>
<li>MyBatis获取参数值的两种方式：${}和#{}  </li>
<li>${}的本质就是字符串拼接，#{}的本质就是占位符赋值  </li>
<li>${}使用字符串拼接的方式拼接sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引号；但是#{}使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时，可以自动添加单引号</li>
</ul>
<h2 id="_5">单个字面量类型的参数<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<ul>
<li>若mapper接口中的方法参数为单个的字面量类型，此时可以使用${}和#{}以任意的名称（最好见名识意）获取参数的值，注意${}需要手动加单引号
<code>xml
&lt;!--User getUserByUsername(String username);--&gt;
&lt;select id="getUserByUsername" resultType="User"&gt;
    select * from t_user where username = #{username}
&lt;/select&gt;</code>
<code>xml
&lt;!--User getUserByUsername(String username);--&gt;
&lt;select id="getUserByUsername" resultType="User"&gt;  
    select * from t_user where username = '${username}'  
&lt;/select&gt;</code></li>
</ul>
<h2 id="_6">多个字面量类型的参数<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>若mapper接口中的方法参数为多个时，此时MyBatis会自动将这些参数放在一个map集合中</p>
<ol>
<li>以arg0,arg1...为键，以参数为值；</li>
<li>以param1,param2...为键，以参数为值；</li>
<li>因此只需要通过${}和#{}访问map集合的键就可以获取相对应的值，注意${}需要手动加单引号。</li>
<li>使用arg或者param都行，要注意的是，arg是从arg0开始的，param是从param1开始的
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--User checkLogin(String username,String password);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;checkLogin&quot;</span> <span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>  
    select * from t_user where username = #{arg0} and password = #{arg1}  
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--User checkLogin(String username,String password);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;checkLogin&quot;</span> <span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
    select * from t_user where username = &#39;${param1}&#39; and password = &#39;${param2}&#39;
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></li>
</ol>
<h2 id="map">map集合类型的参数<a class="headerlink" href="#map" title="Permanent link">&para;</a></h2>
<ul>
<li>若mapper接口中的方法需要的参数为多个时，此时可以手动创建map集合，将这些数据放在map中只需要通过${}和#{}访问map集合的键就可以获取相对应的值，注意${}需要手动加单引号
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--User checkLoginByMap(Map&lt;String,Object&gt; map);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;checkLoginByMap&quot;</span> <span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
    select * from t_user where username = #{username} and password = #{password}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkLoginByMap</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">ParameterMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">ParameterMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;usermane&quot;</span><span class="p">,</span><span class="s">&quot;admin&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;password&quot;</span><span class="p">,</span><span class="s">&quot;123456&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">checkLoginByMap</span><span class="p">(</span><span class="n">map</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></li>
</ul>
<h2 id="_7">实体类类型的参数<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<ul>
<li>若mapper接口中的方法参数为实体类对象时此时可以使用${}和#{}，通过访问实体类对象中的属性名获取属性值，注意${}需要手动加单引号
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--int insertUser(User user);--&gt;</span>
<span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&quot;insertUser&quot;</span><span class="nt">&gt;</span>
    insert into t_user values(null,#{username},#{password},#{age},#{sex},#{email})
<span class="nt">&lt;/insert&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">insertUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">ParameterMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">ParameterMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="s">&quot;Tom&quot;</span><span class="p">,</span><span class="s">&quot;123456&quot;</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="s">&quot;男&quot;</span><span class="p">,</span><span class="s">&quot;123@321.com&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">mapper</span><span class="p">.</span><span class="na">insertUser</span><span class="p">(</span><span class="n">user</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></li>
</ul>
<h2 id="param">使用@Param标识参数<a class="headerlink" href="#param" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>可以通过@Param注解标识mapper接口中的方法参数，此时，会将这些参数放在map集合中 </p>
</li>
<li>
<p>以@Param注解的value属性值为键，以参数为值；</p>
</li>
<li>以param1,param2...为键，以参数为值；</li>
<li>只需要通过${}和#{}访问map集合的键就可以获取相对应的值，注意${}需要手动加单引号
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--User CheckLoginByParam(@Param(&quot;username&quot;) String username, @Param(&quot;password&quot;) String password);--&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;CheckLoginByParam&quot;</span> <span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
        select * from t_user where username = #{username} and password = #{password}
    <span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkLoginByParam</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">ParameterMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">ParameterMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">mapper</span><span class="p">.</span><span class="na">CheckLoginByParam</span><span class="p">(</span><span class="s">&quot;admin&quot;</span><span class="p">,</span><span class="s">&quot;123456&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></li>
</ul>
<h2 id="_8">总结<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>建议分成两种情况进行处理</p>
</li>
<li>
<p>实体类类型的参数</p>
</li>
<li>使用@Param标识参数</li>
</ul>
<h1 id="mybatis_9">MyBatis的各种查询功能<a class="headerlink" href="#mybatis_9" title="Permanent link">&para;</a></h1>
<ol>
<li>如果查询出的数据只有一条，可以通过</li>
<li>实体类对象接收</li>
<li>List集合接收</li>
<li>Map集合接收，结果<code>{password=123456, sex=男, id=1, age=23, username=admin}</code></li>
<li>如果查询出的数据有多条，一定不能用实体类对象接收，会抛异常TooManyResultsException，可以通过</li>
<li>实体类类型的LIst集合接收</li>
<li>Map类型的LIst集合接收</li>
<li>在mapper接口的方法上添加@MapKey注解</li>
</ol>
<h2 id="_9">查询一个实体类对象<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 根据用户id查询用户信息</span>
<span class="cm"> * @param id</span>
<span class="cm"> * @return</span>
<span class="cm"> */</span><span class="w"></span>
<span class="n">User</span><span class="w"> </span><span class="nf">getUserById</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--User getUserById(@Param(&quot;id&quot;) int id);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getUserById&quot;</span> <span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
    select * from t_user where id = #{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></p>
<h2 id="list">查询一个List集合<a class="headerlink" href="#list" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 查询所有用户信息</span>
<span class="cm"> * @return</span>
<span class="cm"> */</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUserList</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--List&lt;User&gt; getUserList();--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getUserList&quot;</span> <span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
    select * from t_user
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></p>
<h2 id="_10">查询单个数据<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code><span class="cm">/**  </span>
<span class="cm"> * 查询用户的总记录数  </span>
<span class="cm"> * @return  </span>
<span class="cm"> * 在MyBatis中，对于Java中常用的类型都设置了类型别名  </span>
<span class="cm"> * 例如：java.lang.Integer--&gt;int|integer  </span>
<span class="cm"> * 例如：int--&gt;_int|_integer  </span>
<span class="cm"> * 例如：Map--&gt;map,List--&gt;list  </span>
<span class="cm"> */</span><span class="w">  </span>
<span class="kt">int</span><span class="w"> </span><span class="nf">getCount</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--int getCount();--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getCount&quot;</span> <span class="na">resultType=</span><span class="s">&quot;_integer&quot;</span><span class="nt">&gt;</span>
    select count(id) from t_user
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></p>
<h2 id="map_1">查询一条数据为map集合<a class="headerlink" href="#map_1" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code><span class="cm">/**  </span>
<span class="cm"> * 根据用户id查询用户信息为map集合  </span>
<span class="cm"> * @param id  </span>
<span class="cm"> * @return  </span>
<span class="cm"> */</span><span class="w">  </span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUserToMap</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--Map&lt;String, Object&gt; getUserToMap(@Param(&quot;id&quot;) int id);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getUserToMap&quot;</span> <span class="na">resultType=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
    select * from t_user where id = #{id}
<span class="nt">&lt;/select&gt;</span>
<span class="cm">&lt;!--结果：{password=123456, sex=男, id=1, age=23, username=admin}--&gt;</span>
</code></pre></div></p>
<h2 id="map_2">查询多条数据为map集合<a class="headerlink" href="#map_2" title="Permanent link">&para;</a></h2>
<h3 id="_11">方法一<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><pre><span></span><code><span class="cm">/**  </span>
<span class="cm"> * 查询所有用户信息为map集合  </span>
<span class="cm"> * @return  </span>
<span class="cm"> * 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，此时可以将这些map放在一个list集合中获取  </span>
<span class="cm"> */</span><span class="w">  </span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">getAllUserToMap</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span>  
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getAllUserToMap&quot;</span> <span class="na">resultType=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>  
    select * from t_user  
<span class="nt">&lt;/select&gt;</span>
<span class="cm">&lt;!--</span>
<span class="cm">    结果：</span>
<span class="cm">    [{password=123456, sex=男, id=1, age=23, username=admin},</span>
<span class="cm">    {password=123456, sex=男, id=2, age=23, username=张三},</span>
<span class="cm">    {password=123456, sex=男, id=3, age=23, username=张三}]</span>
<span class="cm">--&gt;</span>
</code></pre></div></p>
<h3 id="_12">方法二<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 查询所有用户信息为map集合</span>
<span class="cm"> * @return</span>
<span class="cm"> * 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，并且最终要以一个map的方式返回数据，此时需要通过@MapKey注解设置map集合的键，值是每条数据所对应的map集合</span>
<span class="cm"> */</span><span class="w"></span>
<span class="nd">@MapKey</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span><span class="w"></span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAllUserToMap</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getAllUserToMap&quot;</span> <span class="na">resultType=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
    select * from t_user
<span class="nt">&lt;/select&gt;</span>
<span class="cm">&lt;!--</span>
<span class="cm">    结果：</span>
<span class="cm">    {</span>
<span class="cm">    1={password=123456, sex=男, id=1, age=23, username=admin},</span>
<span class="cm">    2={password=123456, sex=男, id=2, age=23, username=张三},</span>
<span class="cm">    3={password=123456, sex=男, id=3, age=23, username=张三}</span>
<span class="cm">    }</span>
<span class="cm">--&gt;</span>
</code></pre></div></p>
<h1 id="sql">特殊SQL的执行<a class="headerlink" href="#sql" title="Permanent link">&para;</a></h1>
<h2 id="_13">模糊查询<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 根据用户名进行模糊查询</span>
<span class="cm"> * @param username </span>
<span class="cm"> * @return java.util.List&lt;com.atguigu.mybatis.pojo.User&gt;</span>
<span class="cm"> * @date 2022/2/26 21:56</span>
<span class="cm"> */</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUserByLike</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--List&lt;User&gt; getUserByLike(@Param(&quot;username&quot;) String username);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getUserByLike&quot;</span> <span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
    <span class="cm">&lt;!--select * from t_user where username like &#39;%${mohu}%&#39;--&gt;</span>  
    <span class="cm">&lt;!--select * from t_user where username like concat(&#39;%&#39;,#{mohu},&#39;%&#39;)--&gt;</span>  
    select * from t_user where username like &quot;%&quot;#{mohu}&quot;%&quot;
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
- 其中<code>select * from t_user where username like "%"#{mohu}"%"</code>是最常用的</p>
<h2 id="_14">批量删除<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h2>
<ul>
<li>只能使用${}，如果使用#{}，则解析后的sql语句为<code>delete from t_user where id in ('1,2,3')</code>，这样是将<code>1,2,3</code>看做是一个整体，只有id为<code>1,2,3</code>的数据会被删除。正确的语句应该是<code>delete from t_user where id in (1,2,3)</code>，或者<code>delete from t_user where id in ('1','2','3')</code>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 根据id批量删除</span>
<span class="cm"> * @param ids </span>
<span class="cm"> * @return int</span>
<span class="cm"> * @date 2022/2/26 22:06</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="nf">deleteMore</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;ids&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">ids</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;delete</span> <span class="na">id=</span><span class="s">&quot;deleteMore&quot;</span><span class="nt">&gt;</span>
    delete from t_user where id in (${ids})
<span class="nt">&lt;/delete&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//测试类</span><span class="w"></span>
<span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteMore</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">SQLMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">SQLMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">deleteMore</span><span class="p">(</span><span class="s">&quot;1,2,3,8&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">result</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></li>
</ul>
<h2 id="_15">动态设置表名<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h2>
<ul>
<li>只能使用${}，因为表名不能加单引号
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 查询指定表中的数据</span>
<span class="cm"> * @param tableName </span>
<span class="cm"> * @return java.util.List&lt;com.atguigu.mybatis.pojo.User&gt;</span>
<span class="cm"> * @date 2022/2/27 14:41</span>
<span class="cm"> */</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUserByTable</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;tableName&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">tableName</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--List&lt;User&gt; getUserByTable(@Param(&quot;tableName&quot;) String tableName);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getUserByTable&quot;</span> <span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
    select * from ${tableName}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></li>
</ul>
<h2 id="_16">添加功能获取自增的主键<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<ul>
<li>使用场景</li>
<li>t_clazz(clazz_id,clazz_name)  </li>
<li>t_student(student_id,student_name,clazz_id)  </li>
<li>添加班级信息  </li>
<li>获取新添加的班级的id  </li>
<li>为班级分配学生，即将某学的班级id修改为新添加的班级的id</li>
<li>在mapper.xml中设置两个属性</li>
<li>useGeneratedKeys：设置使用自增的主键  </li>
<li>keyProperty：因为增删改有统一的返回值是受影响的行数，因此只能将获取的自增的主键放在传输的参数user对象的某个属性中
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 添加用户信息</span>
<span class="cm"> * @param user </span>
<span class="cm"> * @date 2022/2/27 15:04</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="nf">insertUser</span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--void insertUser(User user);--&gt;</span>
<span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&quot;insertUser&quot;</span> <span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span> <span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>
    insert into t_user values (null,#{username},#{password},#{age},#{sex},#{email})
<span class="nt">&lt;/insert&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//测试类</span><span class="w"></span>
<span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">insertUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">SQLMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">SQLMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ton&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;123&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;男&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;123@321.com&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">mapper</span><span class="p">.</span><span class="na">insertUser</span><span class="p">(</span><span class="n">user</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//输出：user{id=10, username=&#39;ton&#39;, password=&#39;123&#39;, age=23, sex=&#39;男&#39;, email=&#39;123@321.com&#39;}，自增主键存放到了user的id属性中</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></li>
</ul>
<h1 id="resultmap">自定义映射resultMap<a class="headerlink" href="#resultmap" title="Permanent link">&para;</a></h1>
<h2 id="resultmap_1">resultMap处理字段和属性的映射关系<a class="headerlink" href="#resultmap_1" title="Permanent link">&para;</a></h2>
<ul>
<li>resultMap：设置自定义映射  </li>
<li>属性：  <ul>
<li>id：表示自定义映射的唯一标识，不能重复</li>
<li>type：查询的数据要映射的实体类的类型  </li>
</ul>
</li>
<li>子标签：  <ul>
<li>id：设置主键的映射关系  </li>
<li>result：设置普通字段的映射关系  </li>
<li>子标签属性：  <ul>
<li>property：设置映射关系中实体类中的属性名  </li>
<li>column：设置映射关系中表中的字段名</li>
</ul>
</li>
</ul>
</li>
<li>若字段名和实体类中的属性名不一致，则可以通过resultMap设置自定义映射，即使字段名和属性名一致的属性也要映射，也就是全部属性都要列出来
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;empResultMap&quot;</span> <span class="na">type=</span><span class="s">&quot;Emp&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">property=</span><span class="s">&quot;eid&quot;</span> <span class="na">column=</span><span class="s">&quot;eid&quot;</span><span class="nt">&gt;&lt;/id&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;empName&quot;</span> <span class="na">column=</span><span class="s">&quot;emp_name&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;age&quot;</span> <span class="na">column=</span><span class="s">&quot;age&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;sex&quot;</span> <span class="na">column=</span><span class="s">&quot;sex&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;email&quot;</span> <span class="na">column=</span><span class="s">&quot;email&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
<span class="cm">&lt;!--List&lt;Emp&gt; getAllEmp();--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getAllEmp&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;empResultMap&quot;</span><span class="nt">&gt;</span>
    select * from t_emp
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></li>
<li>
<p>若字段名和实体类中的属性名不一致，但是字段名符合数据库的规则（使用_），实体类中的属性名符合Java的规则（使用驼峰）。此时也可通过以下两种方式处理字段名和实体类中的属性的映射关系  </p>
</li>
<li>
<p>可以通过为字段起别名的方式，保证和实体类中的属性名保持一致<br />
    <div class="highlight"><pre><span></span><code><span class="cm">&lt;!--List&lt;Emp&gt; getAllEmp();--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getAllEmp&quot;</span> <span class="na">resultType=</span><span class="s">&quot;Emp&quot;</span><span class="nt">&gt;</span>
    select eid,emp_name empName,age,sex,email from t_emp
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></p>
</li>
<li>可以在MyBatis的核心配置文件中的<code>setting</code>标签中，设置一个全局配置信息mapUnderscoreToCamelCase，可以在查询表中数据时，自动将_类型的字段名转换为驼峰，例如：字段名user_name，设置了mapUnderscoreToCamelCase，此时字段名就会转换为userName。<a href="#核心配置文件详解">核心配置文件详解</a>
    <code>xml
&lt;settings&gt;
    &lt;setting name="mapUnderscoreToCamelCase" value="true"/&gt;
&lt;/settings&gt;</code></li>
</ul>
<h2 id="_17">多对一映射处理<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h2>
<blockquote>
<p>查询员工信息以及员工所对应的部门信息
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Emp</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">eid</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">empName</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">sex</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">email</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Dept</span><span class="w"> </span><span class="n">dept</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="c1">//...构造器、get、set方法等</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
</blockquote>
<h3 id="_18">级联方式处理映射关系<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;empAndDeptResultMapOne&quot;</span> <span class="na">type=</span><span class="s">&quot;Emp&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">property=</span><span class="s">&quot;eid&quot;</span> <span class="na">column=</span><span class="s">&quot;eid&quot;</span><span class="nt">&gt;&lt;/id&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;empName&quot;</span> <span class="na">column=</span><span class="s">&quot;emp_name&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;age&quot;</span> <span class="na">column=</span><span class="s">&quot;age&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;sex&quot;</span> <span class="na">column=</span><span class="s">&quot;sex&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;email&quot;</span> <span class="na">column=</span><span class="s">&quot;email&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;dept.did&quot;</span> <span class="na">column=</span><span class="s">&quot;did&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;dept.deptName&quot;</span> <span class="na">column=</span><span class="s">&quot;dept_name&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
<span class="cm">&lt;!--Emp getEmpAndDept(@Param(&quot;eid&quot;)Integer eid);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getEmpAndDept&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;empAndDeptResultMapOne&quot;</span><span class="nt">&gt;</span>
    select * from t_emp left join t_dept on t_emp.eid = t_dept.did where t_emp.eid = #{eid}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<h3 id="association">使用association处理映射关系<a class="headerlink" href="#association" title="Permanent link">&para;</a></h3>
<ul>
<li>association：处理多对一的映射关系</li>
<li>property：需要处理多对的映射关系的属性名</li>
<li>javaType：该属性的类型
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;empAndDeptResultMapTwo&quot;</span> <span class="na">type=</span><span class="s">&quot;Emp&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">property=</span><span class="s">&quot;eid&quot;</span> <span class="na">column=</span><span class="s">&quot;eid&quot;</span><span class="nt">&gt;&lt;/id&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;empName&quot;</span> <span class="na">column=</span><span class="s">&quot;emp_name&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;age&quot;</span> <span class="na">column=</span><span class="s">&quot;age&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;sex&quot;</span> <span class="na">column=</span><span class="s">&quot;sex&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;email&quot;</span> <span class="na">column=</span><span class="s">&quot;email&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;association</span> <span class="na">property=</span><span class="s">&quot;dept&quot;</span> <span class="na">javaType=</span><span class="s">&quot;Dept&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">property=</span><span class="s">&quot;did&quot;</span> <span class="na">column=</span><span class="s">&quot;did&quot;</span><span class="nt">&gt;&lt;/id&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;deptName&quot;</span> <span class="na">column=</span><span class="s">&quot;dept_name&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;/association&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
<span class="cm">&lt;!--Emp getEmpAndDept(@Param(&quot;eid&quot;)Integer eid);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getEmpAndDept&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;empAndDeptResultMapTwo&quot;</span><span class="nt">&gt;</span>
    select * from t_emp left join t_dept on t_emp.eid = t_dept.did where t_emp.eid = #{eid}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></li>
</ul>
<h3 id="_19">分步查询<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<h4 id="1">1. 查询员工信息<a class="headerlink" href="#1" title="Permanent link">&para;</a></h4>
<ul>
<li>select：设置分布查询的sql的唯一标识（namespace.SQLId或mapper接口的全类名.方法名）</li>
<li>column：设置分步查询的条件
<div class="highlight"><pre><span></span><code><span class="c1">//EmpMapper里的方法</span><span class="w"></span>
<span class="cm">/**</span>
<span class="cm"> * 通过分步查询，员工及所对应的部门信息</span>
<span class="cm"> * 分步查询第一步：查询员工信息</span>
<span class="cm"> * @param  </span>
<span class="cm"> * @return com.atguigu.mybatis.pojo.Emp</span>
<span class="cm"> * @date 2022/2/27 20:17</span>
<span class="cm"> */</span><span class="w"></span>
<span class="n">Emp</span><span class="w"> </span><span class="nf">getEmpAndDeptByStepOne</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;eid&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">eid</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;empAndDeptByStepResultMap&quot;</span> <span class="na">type=</span><span class="s">&quot;Emp&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">property=</span><span class="s">&quot;eid&quot;</span> <span class="na">column=</span><span class="s">&quot;eid&quot;</span><span class="nt">&gt;&lt;/id&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;empName&quot;</span> <span class="na">column=</span><span class="s">&quot;emp_name&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;age&quot;</span> <span class="na">column=</span><span class="s">&quot;age&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;sex&quot;</span> <span class="na">column=</span><span class="s">&quot;sex&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;email&quot;</span> <span class="na">column=</span><span class="s">&quot;email&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;association</span> <span class="na">property=</span><span class="s">&quot;dept&quot;</span>
                 <span class="na">select=</span><span class="s">&quot;com.atguigu.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;</span>
                 <span class="na">column=</span><span class="s">&quot;did&quot;</span><span class="nt">&gt;&lt;/association&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
<span class="cm">&lt;!--Emp getEmpAndDeptByStepOne(@Param(&quot;eid&quot;) Integer eid);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getEmpAndDeptByStepOne&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;empAndDeptByStepResultMap&quot;</span><span class="nt">&gt;</span>
    select * from t_emp where eid = #{eid}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></li>
</ul>
<h4 id="2">2. 查询部门信息<a class="headerlink" href="#2" title="Permanent link">&para;</a></h4>
<p><div class="highlight"><pre><span></span><code><span class="c1">//DeptMapper里的方法</span><span class="w"></span>
<span class="cm">/**</span>
<span class="cm"> * 通过分步查询，员工及所对应的部门信息</span>
<span class="cm"> * 分步查询第二步：通过did查询员工对应的部门信息</span>
<span class="cm"> * @param</span>
<span class="cm"> * @return com.atguigu.mybatis.pojo.Emp</span>
<span class="cm"> * @date 2022/2/27 20:23</span>
<span class="cm"> */</span><span class="w"></span>
<span class="n">Dept</span><span class="w"> </span><span class="nf">getEmpAndDeptByStepTwo</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;did&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">did</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--此处的resultMap仅是处理字段和属性的映射关系--&gt;</span>
<span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;EmpAndDeptByStepTwoResultMap&quot;</span> <span class="na">type=</span><span class="s">&quot;Dept&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">property=</span><span class="s">&quot;did&quot;</span> <span class="na">column=</span><span class="s">&quot;did&quot;</span><span class="nt">&gt;&lt;/id&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;deptName&quot;</span> <span class="na">column=</span><span class="s">&quot;dept_name&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
<span class="cm">&lt;!--Dept getEmpAndDeptByStepTwo(@Param(&quot;did&quot;) Integer did);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getEmpAndDeptByStepTwo&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;EmpAndDeptByStepTwoResultMap&quot;</span><span class="nt">&gt;</span>
    select * from t_dept where did = #{did}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></p>
<h2 id="_20">一对多映射处理<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Dept</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">did</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">deptName</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">emps</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="c1">//...构造器、get、set方法等</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="collection">collection<a class="headerlink" href="#collection" title="Permanent link">&para;</a></h3>
<ul>
<li>collection：用来处理一对多的映射关系</li>
<li>ofType：表示该属性对饮的集合中存储的数据的类型
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;DeptAndEmpResultMap&quot;</span> <span class="na">type=</span><span class="s">&quot;Dept&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">property=</span><span class="s">&quot;did&quot;</span> <span class="na">column=</span><span class="s">&quot;did&quot;</span><span class="nt">&gt;&lt;/id&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;deptName&quot;</span> <span class="na">column=</span><span class="s">&quot;dept_name&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;collection</span> <span class="na">property=</span><span class="s">&quot;emps&quot;</span> <span class="na">ofType=</span><span class="s">&quot;Emp&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">property=</span><span class="s">&quot;eid&quot;</span> <span class="na">column=</span><span class="s">&quot;eid&quot;</span><span class="nt">&gt;&lt;/id&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;empName&quot;</span> <span class="na">column=</span><span class="s">&quot;emp_name&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;age&quot;</span> <span class="na">column=</span><span class="s">&quot;age&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;sex&quot;</span> <span class="na">column=</span><span class="s">&quot;sex&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;email&quot;</span> <span class="na">column=</span><span class="s">&quot;email&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;/collection&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
<span class="cm">&lt;!--Dept getDeptAndEmp(@Param(&quot;did&quot;) Integer did);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getDeptAndEmp&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;DeptAndEmpResultMap&quot;</span><span class="nt">&gt;</span>
    select * from t_dept left join t_emp on t_dept.did = t_emp.did where t_dept.did = #{did}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></li>
</ul>
<h3 id="_21">分步查询<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<h4 id="1_1">1. 查询部门信息<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h4>
<p><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 通过分步查询，查询部门及对应的所有员工信息</span>
<span class="cm"> * 分步查询第一步：查询部门信息</span>
<span class="cm"> * @param did </span>
<span class="cm"> * @return com.atguigu.mybatis.pojo.Dept</span>
<span class="cm"> * @date 2022/2/27 22:04</span>
<span class="cm"> */</span><span class="w"></span>
<span class="n">Dept</span><span class="w"> </span><span class="nf">getDeptAndEmpByStepOne</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;did&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">did</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&quot;DeptAndEmpByStepOneResultMap&quot;</span> <span class="na">type=</span><span class="s">&quot;Dept&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">property=</span><span class="s">&quot;did&quot;</span> <span class="na">column=</span><span class="s">&quot;did&quot;</span><span class="nt">&gt;&lt;/id&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&quot;deptName&quot;</span> <span class="na">column=</span><span class="s">&quot;dept_name&quot;</span><span class="nt">&gt;&lt;/result&gt;</span>
    <span class="nt">&lt;collection</span> <span class="na">property=</span><span class="s">&quot;emps&quot;</span>
                <span class="na">select=</span><span class="s">&quot;com.atguigu.mybatis.mapper.EmpMapper.getDeptAndEmpByStepTwo&quot;</span>
                <span class="na">column=</span><span class="s">&quot;did&quot;</span><span class="nt">&gt;&lt;/collection&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
<span class="cm">&lt;!--Dept getDeptAndEmpByStepOne(@Param(&quot;did&quot;) Integer did);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getDeptAndEmpByStepOne&quot;</span> <span class="na">resultMap=</span><span class="s">&quot;DeptAndEmpByStepOneResultMap&quot;</span><span class="nt">&gt;</span>
    select * from t_dept where did = #{did}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></p>
<h4 id="2-id">2. 根据部门id查询部门中的所有员工<a class="headerlink" href="#2-id" title="Permanent link">&para;</a></h4>
<p><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 通过分步查询，查询部门及对应的所有员工信息</span>
<span class="cm"> * 分步查询第二步：根据部门id查询部门中的所有员工</span>
<span class="cm"> * @param did</span>
<span class="cm"> * @return java.util.List&lt;com.atguigu.mybatis.pojo.Emp&gt;</span>
<span class="cm"> * @date 2022/2/27 22:10</span>
<span class="cm"> */</span><span class="w"></span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getDeptAndEmpByStepTwo</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;did&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">did</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--List&lt;Emp&gt; getDeptAndEmpByStepTwo(@Param(&quot;did&quot;) Integer did);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getDeptAndEmpByStepTwo&quot;</span> <span class="na">resultType=</span><span class="s">&quot;Emp&quot;</span><span class="nt">&gt;</span>
    select * from t_emp where did = #{did}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></p>
<h2 id="_22">延迟加载<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h2>
<ul>
<li>分步查询的优点：可以实现延迟加载，但是必须在核心配置文件中设置全局配置信息：</li>
<li>lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载  </li>
<li>aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。 否则，每个属性会按需加载  </li>
<li>此时就可以实现按需加载，获取的数据是什么，就只会执行相应的sql。此时可通过association和collection中的fetchType属性设置当前的分步查询是否使用延迟加载，fetchType="lazy(延迟加载)|eager(立即加载)"
<div class="highlight"><pre><span></span><code><span class="nt">&lt;settings&gt;</span>
    <span class="cm">&lt;!--开启延迟加载--&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">&quot;lazyLoadingEnabled&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/settings&gt;</span>
</code></pre></div></li>
</ul>
</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getEmpAndDeptByStepOne</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">EmpMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">EmpMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">Emp</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">getEmpAndDeptByStepOne</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">emp</span><span class="p">.</span><span class="na">getEmpName</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
- 关闭延迟加载，两条SQL语句都运行了<img alt="" src="Resources/延迟加载测试1.png" />
- 开启延迟加载，只运行获取emp的SQL语句
<img alt="" src="Resources/延迟加载测试2.png" />
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getEmpAndDeptByStepOne</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">EmpMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">EmpMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">Emp</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">getEmpAndDeptByStepOne</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">emp</span><span class="p">.</span><span class="na">getEmpName</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;----------------&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">emp</span><span class="p">.</span><span class="na">getDept</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
- 开启后，需要用到查询dept的时候才会调用相应的SQL语句<img alt="" src="Resources/延迟加载测试3.png" />
- fetchType：当开启了全局的延迟加载之后，可以通过该属性手动控制延迟加载的效果，fetchType="lazy(延迟加载)|eager(立即加载)"</p>
<div class="highlight"><pre><span></span><code>```xml
&lt;resultMap id=&quot;empAndDeptByStepResultMap&quot; type=&quot;Emp&quot;&gt;
    &lt;id property=&quot;eid&quot; column=&quot;eid&quot;&gt;&lt;/id&gt;
    &lt;result property=&quot;empName&quot; column=&quot;emp_name&quot;&gt;&lt;/result&gt;
    &lt;result property=&quot;age&quot; column=&quot;age&quot;&gt;&lt;/result&gt;
    &lt;result property=&quot;sex&quot; column=&quot;sex&quot;&gt;&lt;/result&gt;
    &lt;result property=&quot;email&quot; column=&quot;email&quot;&gt;&lt;/result&gt;
    &lt;association property=&quot;dept&quot;
                 select=&quot;com.atguigu.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;
                 column=&quot;did&quot;
                 fetchType=&quot;lazy&quot;&gt;&lt;/association&gt;
&lt;/resultMap&gt;
```
</code></pre></div>
<h1 id="sql_1">动态SQL<a class="headerlink" href="#sql_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Mybatis框架的动态SQL技术是一种根据特定条件动态拼装SQL语句的功能，它存在的意义是为了解决拼接SQL语句字符串时的痛点问题</li>
</ul>
<h2 id="if">if<a class="headerlink" href="#if" title="Permanent link">&para;</a></h2>
<ul>
<li>if标签可通过test属性（即传递过来的数据）的表达式进行判断，若表达式的结果为true，则标签中的内容会执行；反之标签中的内容不会执行</li>
<li>在where后面添加一个恒成立条件<code>1=1</code><ul>
<li>这个恒成立条件并不会影响查询的结果</li>
<li>这个<code>1=1</code>可以用来拼接<code>and</code>语句，例如：当empName为null时<ul>
<li>如果不加上恒成立条件，则SQL语句为<code>select * from t_emp where and age = ? and sex = ? and email = ?</code>，此时<code>where</code>会与<code>and</code>连用，SQL语句会报错</li>
<li>如果加上一个恒成立条件，则SQL语句为<code>select * from t_emp where 1= 1 and age = ? and sex = ? and email = ?</code>，此时不报错
<code>xml
&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;
&lt;select id="getEmpByCondition" resultType="Emp"&gt;
select * from t_emp where 1=1
&lt;if test="empName != null and empName !=''"&gt;
and emp_name = #{empName}
&lt;/if&gt;
&lt;if test="age != null and age !=''"&gt;
and age = #{age}
&lt;/if&gt;
&lt;if test="sex != null and sex !=''"&gt;
and sex = #{sex}
&lt;/if&gt;
&lt;if test="email != null and email !=''"&gt;
and email = #{email}
&lt;/if&gt;
&lt;/select&gt;</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="where">where<a class="headerlink" href="#where" title="Permanent link">&para;</a></h2>
<ul>
<li>where和if一般结合使用：<ul>
<li>若where标签中的if条件都不满足，则where标签没有任何功能，即不会添加where关键字  </li>
<li>若where标签中的if条件满足，则where标签会自动添加where关键字，并将条件最前方多余的and/or去掉<br />
<code>xml
&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;
&lt;select id="getEmpByCondition" resultType="Emp"&gt;
select * from t_emp
&lt;where&gt;
    &lt;if test="empName != null and empName !=''"&gt;
        emp_name = #{empName}
    &lt;/if&gt;
    &lt;if test="age != null and age !=''"&gt;
        and age = #{age}
    &lt;/if&gt;
    &lt;if test="sex != null and sex !=''"&gt;
        and sex = #{sex}
    &lt;/if&gt;
    &lt;if test="email != null and email !=''"&gt;
        and email = #{email}
    &lt;/if&gt;
&lt;/where&gt;
&lt;/select&gt;</code></li>
</ul>
</li>
<li>
<p>注意：where标签不能去掉条件后多余的and/or</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--这种用法是错误的，只能去掉条件前面的and/or，条件后面的不行--&gt;</span>
<span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&quot;empName != null and empName !=&#39;&#39;&quot;</span><span class="nt">&gt;</span>
emp_name = #{empName} and
<span class="nt">&lt;/if&gt;</span>
<span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&quot;age != null and age !=&#39;&#39;&quot;</span><span class="nt">&gt;</span>
    age = #{age}
<span class="nt">&lt;/if&gt;</span>
</code></pre></div>
<h2 id="trim">trim<a class="headerlink" href="#trim" title="Permanent link">&para;</a></h2>
<ul>
<li>trim用于去掉或添加标签中的内容  </li>
<li>常用属性</li>
<li>prefix：在trim标签中的内容的前面添加某些内容  </li>
<li>suffix：在trim标签中的内容的后面添加某些内容 </li>
<li>prefixOverrides：在trim标签中的内容的前面去掉某些内容  </li>
<li>suffixOverrides：在trim标签中的内容的后面去掉某些内容</li>
<li>若trim中的标签都不满足条件，则trim标签没有任何效果，也就是只剩下<code>select * from t_emp</code>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getEmpByCondition&quot;</span> <span class="na">resultType=</span><span class="s">&quot;Emp&quot;</span><span class="nt">&gt;</span>
    select * from t_emp
    <span class="nt">&lt;trim</span> <span class="na">prefix=</span><span class="s">&quot;where&quot;</span> <span class="na">suffixOverrides=</span><span class="s">&quot;and|or&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&quot;empName != null and empName !=&#39;&#39;&quot;</span><span class="nt">&gt;</span>
            emp_name = #{empName} and
        <span class="nt">&lt;/if&gt;</span>
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&quot;age != null and age !=&#39;&#39;&quot;</span><span class="nt">&gt;</span>
            age = #{age} and
        <span class="nt">&lt;/if&gt;</span>
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&quot;sex != null and sex !=&#39;&#39;&quot;</span><span class="nt">&gt;</span>
            sex = #{sex} or
        <span class="nt">&lt;/if&gt;</span>
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&quot;email != null and email !=&#39;&#39;&quot;</span><span class="nt">&gt;</span>
            email = #{email}
        <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;/trim&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//测试类</span><span class="w"></span>
<span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getEmpByCondition</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">DynamicSQLMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">DynamicSQLMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">emps</span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">getEmpByCondition</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Emp</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张三&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">emps</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<img alt="" src="Resources/trim测试结果.png" /></li>
</ul>
<h2 id="choosewhenotherwise">choose、when、otherwise<a class="headerlink" href="#choosewhenotherwise" title="Permanent link">&para;</a></h2>
<ul>
<li><code>choose、when、otherwise</code>相当于<code>if...else if..else</code></li>
<li>when至少要有一个，otherwise至多只有一个
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getEmpByChoose&quot;</span> <span class="na">resultType=</span><span class="s">&quot;Emp&quot;</span><span class="nt">&gt;</span>
    select * from t_emp
    <span class="nt">&lt;where&gt;</span>
        <span class="nt">&lt;choose&gt;</span>
            <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">&quot;empName != null and empName != &#39;&#39;&quot;</span><span class="nt">&gt;</span>
                emp_name = #{empName}
            <span class="nt">&lt;/when&gt;</span>
            <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">&quot;age != null and age != &#39;&#39;&quot;</span><span class="nt">&gt;</span>
                age = #{age}
            <span class="nt">&lt;/when&gt;</span>
            <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">&quot;sex != null and sex != &#39;&#39;&quot;</span><span class="nt">&gt;</span>
                sex = #{sex}
            <span class="nt">&lt;/when&gt;</span>
            <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">&quot;email != null and email != &#39;&#39;&quot;</span><span class="nt">&gt;</span>
                email = #{email}
            <span class="nt">&lt;/when&gt;</span>
            <span class="nt">&lt;otherwise&gt;</span>
                did = 1
            <span class="nt">&lt;/otherwise&gt;</span>
        <span class="nt">&lt;/choose&gt;</span>
    <span class="nt">&lt;/where&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getEmpByChoose</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">DynamicSQLMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">DynamicSQLMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">emps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">getEmpByChoose</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Emp</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张三&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;男&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;123@qq.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">emps</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<img alt="" src="Resources/choose测试结果.png" /></li>
<li>相当于<code>if a else if b else if c else d</code>，只会执行其中一个</li>
</ul>
<h2 id="foreach">foreach<a class="headerlink" href="#foreach" title="Permanent link">&para;</a></h2>
<ul>
<li>属性：  </li>
<li>collection：设置要循环的数组或集合  </li>
<li>item：表示集合或数组中的每一个数据  </li>
<li>separator：设置循环体之间的分隔符，分隔符前后默认有一个空格，如<code>,</code></li>
<li>open：设置foreach标签中的内容的开始符  </li>
<li>close：设置foreach标签中的内容的结束符</li>
<li>批量删除</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="cm">&lt;!--int deleteMoreByArray(Integer[] eids);--&gt;</span>
<span class="nt">&lt;delete</span> <span class="na">id=</span><span class="s">&quot;deleteMoreByArray&quot;</span><span class="nt">&gt;</span>
    delete from t_emp where eid in
    <span class="nt">&lt;foreach</span> <span class="na">collection=</span><span class="s">&quot;eids&quot;</span> <span class="na">item=</span><span class="s">&quot;eid&quot;</span> <span class="na">separator=</span><span class="s">&quot;,&quot;</span> <span class="na">open=</span><span class="s">&quot;(&quot;</span> <span class="na">close=</span><span class="s">&quot;)&quot;</span><span class="nt">&gt;</span>
        #{eid}
    <span class="nt">&lt;/foreach&gt;</span>
<span class="nt">&lt;/delete&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteMoreByArray</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">DynamicSQLMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">DynamicSQLMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">deleteMoreByArray</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Integer</span><span class="o">[]</span><span class="p">{</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">});</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">result</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<img alt="" src="Resources/foreach测试结果1.png" />
- 批量添加</p>
<p><div class="highlight"><pre><span></span><code><span class="cm">&lt;!--int insertMoreByList(@Param(&quot;emps&quot;) List&lt;Emp&gt; emps);--&gt;</span>
<span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&quot;insertMoreByList&quot;</span><span class="nt">&gt;</span>
    insert into t_emp values
    <span class="nt">&lt;foreach</span> <span class="na">collection=</span><span class="s">&quot;emps&quot;</span> <span class="na">item=</span><span class="s">&quot;emp&quot;</span> <span class="na">separator=</span><span class="s">&quot;,&quot;</span><span class="nt">&gt;</span>
        (null,#{emp.empName},#{emp.age},#{emp.sex},#{emp.email},null)
    <span class="nt">&lt;/foreach&gt;</span>
<span class="nt">&lt;/insert&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">insertMoreByList</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqlSessionUtils</span><span class="p">.</span><span class="na">getSqlSession</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">DynamicSQLMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">DynamicSQLMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">Emp</span><span class="w"> </span><span class="n">emp1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Emp</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;男&quot;</span><span class="p">,</span><span class="s">&quot;123@321.com&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">Emp</span><span class="w"> </span><span class="n">emp2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Emp</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;男&quot;</span><span class="p">,</span><span class="s">&quot;123@321.com&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">Emp</span><span class="w"> </span><span class="n">emp3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Emp</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;男&quot;</span><span class="p">,</span><span class="s">&quot;123@321.com&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">emps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="n">emp1</span><span class="p">,</span><span class="w"> </span><span class="n">emp2</span><span class="p">,</span><span class="w"> </span><span class="n">emp3</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">insertMoreByList</span><span class="p">(</span><span class="n">emps</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">result</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<img alt="" src="Resources/foreach测试结果2.png" /></p>
<h2 id="sql_2">SQL片段<a class="headerlink" href="#sql_2" title="Permanent link">&para;</a></h2>
<ul>
<li>sql片段，可以记录一段公共sql片段，在使用的地方通过include标签进行引入</li>
<li>声明sql片段：<code>&lt;sql&gt;</code>标签
<div class="highlight"><pre><span></span><code><span class="nt">&lt;sql</span> <span class="na">id=</span><span class="s">&quot;empColumns&quot;</span><span class="nt">&gt;</span>eid,emp_name,age,sex,email<span class="nt">&lt;/sql&gt;</span>
</code></pre></div></li>
<li>引用sql片段：<code>&lt;include&gt;</code>标签
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;getEmpByCondition&quot;</span> <span class="na">resultType=</span><span class="s">&quot;Emp&quot;</span><span class="nt">&gt;</span>
    select <span class="nt">&lt;include</span> <span class="na">refid=</span><span class="s">&quot;empColumns&quot;</span><span class="nt">&gt;&lt;/include&gt;</span> from t_emp
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></li>
</ul>
<h1 id="mybatis_10">MyBatis的缓存<a class="headerlink" href="#mybatis_10" title="Permanent link">&para;</a></h1>
<h2 id="mybatis_11">MyBatis的一级缓存<a class="headerlink" href="#mybatis_11" title="Permanent link">&para;</a></h2>
<ul>
<li>一级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就会从缓存中直接获取，不会从数据库重新访问  </li>
<li>
<p>使一级缓存失效的四种情况：  </p>
</li>
<li>
<p>不同的SqlSession对应不同的一级缓存  </p>
</li>
<li>同一个SqlSession但是查询条件不同</li>
<li>同一个SqlSession两次查询期间执行了任何一次增删改操作</li>
<li>同一个SqlSession两次查询期间手动清空了缓存</li>
</ul>
<h2 id="mybatis_12">MyBatis的二级缓存<a class="headerlink" href="#mybatis_12" title="Permanent link">&para;</a></h2>
<ul>
<li>二级缓存是SqlSessionFactory级别，通过同一个SqlSessionFactory创建的SqlSession查询的结果会被缓存；此后若再次执行相同的查询语句，结果就会从缓存中获取  </li>
<li>
<p>二级缓存开启的条件</p>
</li>
<li>
<p>在核心配置文件中，设置全局配置属性cacheEnabled="true"，默认为true，不需要设置</p>
</li>
<li>在映射文件中设置标签<cache /></li>
<li>二级缓存必须在SqlSession关闭或提交之后有效</li>
<li>查询的数据所转换的实体类类型必须实现序列化的接口</li>
<li>使二级缓存失效的情况：两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效</li>
</ul>
<h2 id="_23">二级缓存的相关配置<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h2>
<ul>
<li>在mapper配置文件中添加的cache标签可以设置一些属性</li>
<li>eviction属性：缓存回收策略  </li>
<li>LRU（Least Recently Used） – 最近最少使用的：移除最长时间不被使用的对象。  </li>
<li>FIFO（First in First out） – 先进先出：按对象进入缓存的顺序来移除它们。  </li>
<li>SOFT – 软引用：移除基于垃圾回收器状态和软引用规则的对象。  </li>
<li>WEAK – 弱引用：更积极地移除基于垃圾收集器状态和弱引用规则的对象。</li>
<li>默认的是 LRU</li>
<li>flushInterval属性：刷新间隔，单位毫秒</li>
<li>默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句（增删改）时刷新</li>
<li>size属性：引用数目，正整数</li>
<li>代表缓存最多可以存储多少个对象，太大容易导致内存溢出</li>
<li>readOnly属性：只读，true/false</li>
<li>true：只读缓存；会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了很重要的性能优势。  </li>
<li>false：读写缓存；会返回缓存对象的拷贝（通过序列化）。这会慢一些，但是安全，因此默认是false</li>
</ul>
<h2 id="mybatis_13">MyBatis缓存查询的顺序<a class="headerlink" href="#mybatis_13" title="Permanent link">&para;</a></h2>
<ul>
<li>先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用  </li>
<li>如果二级缓存没有命中，再查询一级缓存  </li>
<li>如果一级缓存也没有命中，则查询数据库  </li>
<li>SqlSession关闭之后，一级缓存中的数据会写入二级缓存</li>
</ul>
<h2 id="ehcache">整合第三方缓存EHCache（了解）<a class="headerlink" href="#ehcache" title="Permanent link">&para;</a></h2>
<h3 id="_24">添加依赖<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- Mybatis EHCache整合包 --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.mybatis.caches<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>mybatis-ehcache<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.2.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="cm">&lt;!-- slf4j日志门面的一个具体实现 --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>ch.qos.logback<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>logback-classic<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.2.3<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<h3 id="jar">各个jar包的功能<a class="headerlink" href="#jar" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>jar包名称</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>mybatis-ehcache</td>
<td>Mybatis和EHCache的整合包</td>
</tr>
<tr>
<td>ehcache</td>
<td>EHCache核心包</td>
</tr>
<tr>
<td>slf4j-api</td>
<td>SLF4J日志门面包</td>
</tr>
<tr>
<td>logback-classic</td>
<td>支持SLF4J门面接口的一个具体实现</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3 id="ehcacheehcachexml">创建EHCache的配置文件ehcache.xml<a class="headerlink" href="#ehcacheehcachexml" title="Permanent link">&para;</a></h3>
<ul>
<li>名字必须叫<code>ehcache.xml</code>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
<span class="nt">&lt;ehcache</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
         <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;../config/ehcache.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="cm">&lt;!-- 磁盘保存路径 --&gt;</span>
    <span class="nt">&lt;diskStore</span> <span class="na">path=</span><span class="s">&quot;D:\atguigu\ehcache&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;defaultCache</span>
            <span class="na">maxElementsInMemory=</span><span class="s">&quot;1000&quot;</span>
            <span class="na">maxElementsOnDisk=</span><span class="s">&quot;10000000&quot;</span>
            <span class="na">eternal=</span><span class="s">&quot;false&quot;</span>
            <span class="na">overflowToDisk=</span><span class="s">&quot;true&quot;</span>
            <span class="na">timeToIdleSeconds=</span><span class="s">&quot;120&quot;</span>
            <span class="na">timeToLiveSeconds=</span><span class="s">&quot;120&quot;</span>
            <span class="na">diskExpiryThreadIntervalSeconds=</span><span class="s">&quot;120&quot;</span>
            <span class="na">memoryStoreEvictionPolicy=</span><span class="s">&quot;LRU&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/defaultCache&gt;</span>
<span class="nt">&lt;/ehcache&gt;</span>
</code></pre></div></li>
</ul>
<h3 id="_25">设置二级缓存的类型<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h3>
<ul>
<li>在xxxMapper.xml文件中设置二级缓存类型
<div class="highlight"><pre><span></span><code><span class="nt">&lt;cache</span> <span class="na">type=</span><span class="s">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span><span class="nt">/&gt;</span>
</code></pre></div></li>
</ul>
<h3 id="logback">加入logback日志<a class="headerlink" href="#logback" title="Permanent link">&para;</a></h3>
<ul>
<li>存在SLF4J时，作为简易日志的log4j将失效，此时我们需要借助SLF4J的具体实现logback来打印日志。创建logback的配置文件<code>logback.xml</code>，名字固定，不可改变
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;configuration</span> <span class="na">debug=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
    <span class="cm">&lt;!-- 指定日志输出的位置 --&gt;</span>
    <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">&quot;STDOUT&quot;</span>
              <span class="na">class=</span><span class="s">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;encoder&gt;</span>
            <span class="cm">&lt;!-- 日志输出的格式 --&gt;</span>
            <span class="cm">&lt;!-- 按照顺序分别是：时间、日志级别、线程名称、打印日志的类、日志主体内容、换行 --&gt;</span>
            <span class="nt">&lt;pattern&gt;</span>[%d{HH:mm:ss.SSS}] [%-5level] [%thread] [%logger] [%msg]%n<span class="nt">&lt;/pattern&gt;</span>
        <span class="nt">&lt;/encoder&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>
    <span class="cm">&lt;!-- 设置全局日志级别。日志级别按顺序分别是：DEBUG、INFO、WARN、ERROR --&gt;</span>
    <span class="cm">&lt;!-- 指定任何一个日志级别都只打印当前级别和后面级别的日志。 --&gt;</span>
    <span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">&quot;DEBUG&quot;</span><span class="nt">&gt;</span>
        <span class="cm">&lt;!-- 指定打印日志的appender，这里通过“STDOUT”引用了前面配置的appender --&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&quot;STDOUT&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/root&gt;</span>
    <span class="cm">&lt;!-- 根据特殊需求指定局部日志级别 --&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">&quot;com.atguigu.crowd.mapper&quot;</span> <span class="na">level=</span><span class="s">&quot;DEBUG&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></li>
</ul>
<h3 id="ehcache_1">EHCache配置文件说明<a class="headerlink" href="#ehcache_1" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>属性名</th>
<th>是否必须</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>maxElementsInMemory</td>
<td>是</td>
<td>在内存中缓存的element的最大数目</td>
</tr>
<tr>
<td>maxElementsOnDisk</td>
<td>是</td>
<td>在磁盘上缓存的element的最大数目，若是0表示无穷大</td>
</tr>
<tr>
<td>eternal</td>
<td>是</td>
<td>设定缓存的elements是否永远不过期。 如果为true，则缓存的数据始终有效， 如果为false那么还要根据timeToIdleSeconds、timeToLiveSeconds判断</td>
</tr>
<tr>
<td>overflowToDisk</td>
<td>是</td>
<td>设定当内存缓存溢出的时候是否将过期的element缓存到磁盘上</td>
</tr>
<tr>
<td>timeToIdleSeconds</td>
<td>否</td>
<td>当缓存在EhCache中的数据前后两次访问的时间超过timeToIdleSeconds的属性取值时， 这些数据便会删除，默认值是0,也就是可闲置时间无穷大</td>
</tr>
<tr>
<td>timeToLiveSeconds</td>
<td>否</td>
<td>缓存element的有效生命期，默认是0.,也就是element存活时间无穷大</td>
</tr>
<tr>
<td>diskSpoolBufferSizeMB</td>
<td>否</td>
<td>DiskStore(磁盘缓存)的缓存区大小。默认是30MB。每个Cache都应该有自己的一个缓冲区</td>
</tr>
<tr>
<td>diskPersistent</td>
<td>否</td>
<td>在VM重启的时候是否启用磁盘保存EhCache中的数据，默认是false</td>
</tr>
<tr>
<td>diskExpiryThreadIntervalSeconds</td>
<td>否</td>
<td>磁盘缓存的清理线程运行间隔，默认是120秒。每个120s， 相应的线程会进行一次EhCache中数据的清理工作</td>
</tr>
<tr>
<td>memoryStoreEvictionPolicy</td>
<td>否</td>
<td>当内存缓存达到最大，有新的element加入的时候， 移除缓存中element的策略。 默认是LRU（最近最少使用），可选的有LFU（最不常使用）和FIFO（先进先出</td>
</tr>
<tr>
<td># MyBatis的逆向工程</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- 正向工程：先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程的</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- 逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源：</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- Java实体类</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- Mapper接口</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- Mapper映射文件</td>
<td></td>
<td></td>
</tr>
<tr>
<td>## 创建逆向工程的步骤</td>
<td></td>
<td></td>
</tr>
<tr>
<td>### 添加依赖和插件</td>
<td></td>
<td></td>
</tr>
<tr>
<td><div class="highlight"><pre><span></span><code><span class="nt">&lt;dependencies&gt;</span>
    <span class="cm">&lt;!-- MyBatis核心依赖包 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>mybatis<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>3.5.9<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="cm">&lt;!-- junit测试 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>4.13.2<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="cm">&lt;!-- MySQL驱动 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>8.0.27<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="cm">&lt;!-- log4j日志 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>log4j<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>log4j<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.2.17<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
<span class="cm">&lt;!-- 控制Maven在构建过程中相关配置 --&gt;</span>
<span class="nt">&lt;build&gt;</span>
    <span class="cm">&lt;!-- 构建过程中用到的插件 --&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
        <span class="cm">&lt;!-- 具体插件，逆向工程的操作是以构建过程中插件形式出现的 --&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.mybatis.generator<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>mybatis-generator-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.3.0<span class="nt">&lt;/version&gt;</span>
            <span class="cm">&lt;!-- 插件的依赖 --&gt;</span>
            <span class="nt">&lt;dependencies&gt;</span>
                <span class="cm">&lt;!-- 逆向工程的核心依赖 --&gt;</span>
                <span class="nt">&lt;dependency&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>org.mybatis.generator<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>mybatis-generator-core<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;/dependency&gt;</span>
                <span class="cm">&lt;!-- 数据库连接池 --&gt;</span>
                <span class="nt">&lt;dependency&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>com.mchange<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>c3p0<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;version&gt;</span>0.9.2<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;/dependency&gt;</span>
                <span class="cm">&lt;!-- MySQL驱动 --&gt;</span>
                <span class="nt">&lt;dependency&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;version&gt;</span>8.0.27<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;/dependency&gt;</span>
            <span class="nt">&lt;/dependencies&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></td>
<td></td>
<td></td>
</tr>
<tr>
<td>### 创建MyBatis的核心配置文件</td>
<td></td>
<td></td>
</tr>
<tr>
<td><div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE configuration</span>
<span class="cp">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;properties</span> <span class="na">resource=</span><span class="s">&quot;jdbc.properties&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;typeAliases&gt;</span>
        <span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/typeAliases&gt;</span>
    <span class="nt">&lt;environments</span> <span class="na">default=</span><span class="s">&quot;development&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">&quot;development&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;transactionManager</span> <span class="na">type=</span><span class="s">&quot;JDBC&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;dataSource</span> <span class="na">type=</span><span class="s">&quot;POOLED&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;driver&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.driver}&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;url&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.url}&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.username}&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">value=</span><span class="s">&quot;${jdbc.password}&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/dataSource&gt;</span>
        <span class="nt">&lt;/environment&gt;</span>
    <span class="nt">&lt;/environments&gt;</span>
    <span class="nt">&lt;mappers&gt;</span>
        <span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/mappers&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></td>
<td></td>
<td></td>
</tr>
<tr>
<td>### 创建逆向工程的配置文件</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- 文件名必须是：<code>generatorConfig.xml</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE generatorConfiguration</span>
<span class="cp">        PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;</span>
<span class="nt">&lt;generatorConfiguration&gt;</span>
    <span class="cm">&lt;!--</span>
<span class="cm">    targetRuntime: 执行生成的逆向工程的版本</span>
<span class="cm">    MyBatis3Simple: 生成基本的CRUD（清新简洁版）</span>
<span class="cm">    MyBatis3: 生成带条件的CRUD（奢华尊享版）</span>
<span class="cm">    --&gt;</span>
    <span class="nt">&lt;context</span> <span class="na">id=</span><span class="s">&quot;DB2Tables&quot;</span> <span class="na">targetRuntime=</span><span class="s">&quot;MyBatis3Simple&quot;</span><span class="nt">&gt;</span>
        <span class="cm">&lt;!-- 数据库的连接信息 --&gt;</span>
        <span class="nt">&lt;jdbcConnection</span> <span class="na">driverClass=</span><span class="s">&quot;com.mysql.cj.jdbc.Driver&quot;</span>
                        <span class="na">connectionURL=</span><span class="s">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>
                        <span class="na">userId=</span><span class="s">&quot;root&quot;</span>
                        <span class="na">password=</span><span class="s">&quot;123456&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/jdbcConnection&gt;</span>
        <span class="cm">&lt;!-- javaBean的生成策略--&gt;</span>
        <span class="nt">&lt;javaModelGenerator</span> <span class="na">targetPackage=</span><span class="s">&quot;com.atguigu.mybatis.pojo&quot;</span> <span class="na">targetProject=</span><span class="s">&quot;.\src\main\java&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;enableSubPackages&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;trimStrings&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/javaModelGenerator&gt;</span>
        <span class="cm">&lt;!-- SQL映射文件的生成策略 --&gt;</span>
        <span class="nt">&lt;sqlMapGenerator</span> <span class="na">targetPackage=</span><span class="s">&quot;com.atguigu.mybatis.mapper&quot;</span>
                         <span class="na">targetProject=</span><span class="s">&quot;.\src\main\resources&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;enableSubPackages&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/sqlMapGenerator&gt;</span>
        <span class="cm">&lt;!-- Mapper接口的生成策略 --&gt;</span>
        <span class="nt">&lt;javaClientGenerator</span> <span class="na">type=</span><span class="s">&quot;XMLMAPPER&quot;</span>
                             <span class="na">targetPackage=</span><span class="s">&quot;com.atguigu.mybatis.mapper&quot;</span> <span class="na">targetProject=</span><span class="s">&quot;.\src\main\java&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;enableSubPackages&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/javaClientGenerator&gt;</span>
        <span class="cm">&lt;!-- 逆向分析的表 --&gt;</span>
        <span class="cm">&lt;!-- tableName设置为*号，可以对应所有表，此时不写domainObjectName --&gt;</span>
        <span class="cm">&lt;!-- domainObjectName属性指定生成出来的实体类的类名 --&gt;</span>
        <span class="nt">&lt;table</span> <span class="na">tableName=</span><span class="s">&quot;t_emp&quot;</span> <span class="na">domainObjectName=</span><span class="s">&quot;Emp&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;table</span> <span class="na">tableName=</span><span class="s">&quot;t_dept&quot;</span> <span class="na">domainObjectName=</span><span class="s">&quot;Dept&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/context&gt;</span>
<span class="nt">&lt;/generatorConfiguration&gt;</span>
</code></pre></div></td>
<td></td>
<td></td>
</tr>
<tr>
<td>### 执行MBG插件的generate目标</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <img alt="" src="Resources/执行MBG插件的generate目标.png" /></td>
<td></td>
<td></td>
</tr>
<tr>
<td>- 如果出现报错：<code>Exception getting JDBC Driver</code>，可能是pom.xml中，数据库驱动配置错误</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- dependency中的驱动<img alt="" src="Resources/dependency中的驱动.png" /></td>
<td></td>
<td></td>
</tr>
<tr>
<td>- mybatis-generator-maven-plugin插件中的驱动<img alt="" src="Resources/插件中的驱动.png" /></td>
<td></td>
<td></td>
</tr>
<tr>
<td>- 两者的驱动版本应该相同</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- 执行结果<img alt="" src="Resources/逆向执行结果.png" /></td>
<td></td>
<td></td>
</tr>
<tr>
<td>## QBC</td>
<td></td>
<td></td>
</tr>
<tr>
<td>### 查询</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <code>selectByExample</code>：按条件查询，需要传入一个example对象或者null；如果传入一个null，则表示没有条件，也就是查询所有数据</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <code>example.createCriteria().xxx</code>：创建条件对象，通过andXXX方法为SQL添加查询添加，每个条件之间是and关系</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <code>example.or().xxx</code>：将之前添加的条件通过or拼接其他条件</td>
<td></td>
<td></td>
</tr>
<tr>
<td><img alt="" src="Resources/example的方法.png" /></td>
<td></td>
<td></td>
</tr>
<tr>
<td><div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testMBG</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">InputStream</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="s">&quot;mybatis-config.xml&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSessionFactoryBuilder</span><span class="w"> </span><span class="n">sqlSessionFactoryBuilder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactoryBuilder</span><span class="p">.</span><span class="na">build</span><span class="p">(</span><span class="n">is</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="p">.</span><span class="na">openSession</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">EmpMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">EmpMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">EmpExample</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">EmpExample</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">//名字为张三，且年龄大于等于20</span><span class="w"></span>
<span class="w">    </span><span class="n">example</span><span class="p">.</span><span class="na">createCriteria</span><span class="p">().</span><span class="na">andEmpNameEqualTo</span><span class="p">(</span><span class="s">&quot;张三&quot;</span><span class="p">).</span><span class="na">andAgeGreaterThanOrEqualTo</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//或者did不为空</span><span class="w"></span>
<span class="w">    </span><span class="n">example</span><span class="p">.</span><span class="na">or</span><span class="p">().</span><span class="na">andDidIsNotNull</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">emps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">selectByExample</span><span class="p">(</span><span class="n">example</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">emps</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td>
<td></td>
<td></td>
</tr>
<tr>
<td><img alt="" src="Resources/example测试结果.png" /></td>
<td></td>
<td></td>
</tr>
<tr>
<td>### 增改</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <code>updateByPrimaryKey</code>：通过主键进行数据修改，如果某一个值为null，也会将对应的字段改为null</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <code>mapper.updateByPrimaryKey(new Emp(1,"admin",22,null,"456@qq.com",3));</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <img alt="" src="Resources/增删改测试结果1.png" /></td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <code>updateByPrimaryKeySelective()</code>：通过主键进行选择性数据修改，如果某个值为null，则不修改这个字段</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <code>mapper.updateByPrimaryKeySelective(new Emp(2,"admin2",22,null,"456@qq.com",3));</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <img alt="" src="Resources/增删改测试结果2.png" /></td>
<td></td>
<td></td>
</tr>
<tr>
<td># 分页插件</td>
<td></td>
<td></td>
</tr>
<tr>
<td>## 分页插件使用步骤</td>
<td></td>
<td></td>
</tr>
<tr>
<td>### 添加依赖</td>
<td></td>
<td></td>
</tr>
<tr>
<td><div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.github.pagehelper<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>pagehelper<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>5.2.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></td>
<td></td>
<td></td>
</tr>
<tr>
<td>### 配置分页插件</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- 在MyBatis的核心配置文件（mybatis-config.xml）中配置插件</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- <img alt="" src="Resources/配置分页插件.png" /></td>
<td></td>
<td></td>
</tr>
<tr>
<td><div class="highlight"><pre><span></span><code><span class="nt">&lt;plugins&gt;</span>
    <span class="cm">&lt;!--设置分页插件--&gt;</span>
    <span class="nt">&lt;plugin</span> <span class="na">interceptor=</span><span class="s">&quot;com.github.pagehelper.PageInterceptor&quot;</span><span class="nt">&gt;&lt;/plugin&gt;</span>
<span class="nt">&lt;/plugins&gt;</span>
</code></pre></div></td>
<td></td>
<td></td>
</tr>
<tr>
<td>## 分页插件的使用</td>
<td></td>
<td></td>
</tr>
<tr>
<td>### 开启分页功能</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- 在查询功能之前使用<code>PageHelper.startPage(int pageNum, int pageSize)</code>开启分页功能</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- pageNum：当前页的页码</td>
<td></td>
<td></td>
</tr>
<tr>
<td>- pageSize：每页显示的条数</td>
<td></td>
<td></td>
</tr>
<tr>
<td><div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testPageHelper</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">InputStream</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="s">&quot;mybatis-config.xml&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSessionFactoryBuilder</span><span class="w"> </span><span class="n">sqlSessionFactoryBuilder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactoryBuilder</span><span class="p">.</span><span class="na">build</span><span class="p">(</span><span class="n">is</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="p">.</span><span class="na">openSession</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">EmpMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">EmpMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//访问第一页，每页四条数据</span><span class="w"></span>
<span class="w">    </span><span class="n">PageHelper</span><span class="p">.</span><span class="na">startPage</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">emps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">selectByExample</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">emps</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><img alt="" src="Resources/分页测试结果.png" /></p>
<h3 id="_26">分页相关数据<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<h4 id="_27">方法一：直接输出<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h4>
<p><div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testPageHelper</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">InputStream</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="s">&quot;mybatis-config.xml&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSessionFactoryBuilder</span><span class="w"> </span><span class="n">sqlSessionFactoryBuilder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactoryBuilder</span><span class="p">.</span><span class="na">build</span><span class="p">(</span><span class="n">is</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="p">.</span><span class="na">openSession</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">EmpMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">EmpMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//访问第一页，每页四条数据</span><span class="w"></span>
<span class="w">    </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PageHelper</span><span class="p">.</span><span class="na">startPage</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">emps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">selectByExample</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">//在查询到List集合后，打印分页数据</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">page</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
- 分页相关数据：</p>
<div class="highlight"><pre><span></span><code>```
Page{count=true, pageNum=1, pageSize=4, startRow=0, endRow=4, total=8, pages=2, reasonable=false, pageSizeZero=false}[Emp{eid=1, empName=&#39;admin&#39;, age=22, sex=&#39;男&#39;, email=&#39;456@qq.com&#39;, did=3}, Emp{eid=2, empName=&#39;admin2&#39;, age=22, sex=&#39;男&#39;, email=&#39;456@qq.com&#39;, did=3}, Emp{eid=3, empName=&#39;王五&#39;, age=12, sex=&#39;女&#39;, email=&#39;123@qq.com&#39;, did=3}, Emp{eid=4, empName=&#39;赵六&#39;, age=32, sex=&#39;男&#39;, email=&#39;123@qq.com&#39;, did=1}]
```
</code></pre></div>
<h4 id="pageinfo">方法二使用PageInfo<a class="headerlink" href="#pageinfo" title="Permanent link">&para;</a></h4>
<ul>
<li>在查询获取list集合之后，使用<code>PageInfo&lt;T&gt; pageInfo = new PageInfo&lt;&gt;(List&lt;T&gt; list, intnavigatePages)</code>获取分页相关数据<ul>
<li>list：分页之后的数据  </li>
<li>navigatePages：导航分页的页码数
<code>java
@Test
public void testPageHelper() throws IOException {
InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();
SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);
SqlSession sqlSession = sqlSessionFactory.openSession(true);
EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);
PageHelper.startPage(1, 4);
List&lt;Emp&gt; emps = mapper.selectByExample(null);
PageInfo&lt;Emp&gt; page = new PageInfo&lt;&gt;(emps,5);
System.out.println(page);
}</code></li>
</ul>
</li>
<li>
<p>分页相关数据：</p>
<p><div class="highlight"><pre><span></span><code>PageInfo{
pageNum=1, pageSize=4, size=4, startRow=1, endRow=4, total=8, pages=2, 
list=Page{count=true, pageNum=1, pageSize=4, startRow=0, endRow=4, total=8, pages=2, reasonable=false, pageSizeZero=false}[Emp{eid=1, empName=&#39;admin&#39;, age=22, sex=&#39;男&#39;, email=&#39;456@qq.com&#39;, did=3}, Emp{eid=2, empName=&#39;admin2&#39;, age=22, sex=&#39;男&#39;, email=&#39;456@qq.com&#39;, did=3}, Emp{eid=3, empName=&#39;王五&#39;, age=12, sex=&#39;女&#39;, email=&#39;123@qq.com&#39;, did=3}, Emp{eid=4, empName=&#39;赵六&#39;, age=32, sex=&#39;男&#39;, email=&#39;123@qq.com&#39;, did=1}], 
prePage=0, nextPage=2, isFirstPage=true, isLastPage=false, hasPreviousPage=false, hasNextPage=true, navigatePages=5, navigateFirstPage=1, navigateLastPage=2, navigatepageNums=[1, 2]}
</code></pre></div>
- 其中list中的数据等同于方法一中直接输出的page数据</p>
<h4 id="_28">常用数据：<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<ul>
<li>pageNum：当前页的页码  </li>
<li>pageSize：每页显示的条数  </li>
<li>size：当前页显示的真实条数  </li>
<li>total：总记录数  </li>
<li>pages：总页数  </li>
<li>prePage：上一页的页码  </li>
<li>nextPage：下一页的页码</li>
<li>isFirstPage/isLastPage：是否为第一页/最后一页  </li>
<li>hasPreviousPage/hasNextPage：是否存在上一页/下一页  </li>
<li>navigatePages：导航分页的页码数  </li>
<li>navigatepageNums：导航分页的页码，[1,2,3,4,5]</li>
</ul>
</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="../Maven/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Maven" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              Maven
            </div>
          </div>
        </a>
      
      
        
        <a href="../MyBatisPlus/" class="md-footer__link md-footer__link--next" aria-label="下一页: MyBatisPlus" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              MyBatisPlus
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 韩永琰
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://space.bilibili.com/358218864" target="_blank" rel="noopener" title="Bilibili | 愿你决定" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0s16.1 2.868 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0c8.8 0 16.1 2.868 21.9 8.603 5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1zm-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8 6.3-6.5 9.7-14.3 10.1-23.5V173.8zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5-9.6 0-17.5-3.2-23.6-9.5-6.1-6.3-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2 6.3-6.3 13.2-9.6 23.3-10 9.2.4 17 3.7 23.3 10zm191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.1 6.3-14 9.5-23.6 9.5-9.6 0-17.4-3.2-23.6-9.5-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2 6.3-6.3 14.1-9.6 23.3-10 9.2.4 17 3.7 23.3 10z"/></svg>
    </a>
  
    
    
    <a href="https://github.com/hanyongyan" target="_blank" rel="noopener" title="GitHub | hanyongyan" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.top", "navigation.indexes", "navigation.expand", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../../../mkdocs/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
    
  </body>
</html>