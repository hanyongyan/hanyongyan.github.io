
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="韩永琰的个人网站">
      
      
        <meta name="author" content="韩永琰">
      
      
        <link rel="canonical" href="https://hanyongyan.github.io/StudyNodes/JS/TypeScript%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>TypeScript - 韩永琰的个人网站</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../mkdocs/css/no-footer.css">
    
      <link rel="stylesheet" href="../../../mkdocs/css/unordered-list-symbols.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#typescript" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="韩永琰的个人网站" class="md-header__button md-logo" aria-label="韩永琰的个人网站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            韩永琰的个人网站
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              TypeScript
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="切换至夜间模式"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="切换至夜间模式" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="切换至日间模式"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="切换至日间模式" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hanyongyan/hanyongyan.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    hanyongyan.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        学习笔记
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="韩永琰的个人网站" class="md-nav__button md-logo" aria-label="韩永琰的个人网站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    韩永琰的个人网站
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hanyongyan/hanyongyan.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    hanyongyan.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">学习笔记</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="学习笔记" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          学习笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/Linux/" class="md-nav__link">
        Linux入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/Vim/" class="md-nav__link">
        Vim
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_3">
          MySql
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MySql" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          MySql
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../MySql/MySQL%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        Mysql
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_4">
          js
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="js" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          js
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Ajax/" class="md-nav__link">
        Ajax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jQuery/" class="md-nav__link">
        jQuery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../JS/" class="md-nav__link">
        javaScript
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          TypeScript
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        TypeScript
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#925-" class="md-nav__link">
    作者：925 -- 小余同学
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Node.js/" class="md-nav__link">
        nodejs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_5">
          java
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="java" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          java
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/JavaWeb/" class="md-nav__link">
        JavaWeb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/Maven/" class="md-nav__link">
        Maven
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/MyBatis%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        MyBatis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/MyBatisPlus/" class="md-nav__link">
        MyBatisPlus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/SSM/" class="md-nav__link">
        SSM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        瑞吉外卖笔记
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/" class="md-nav__link">
        Nacos
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_6">
          Git
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Git" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/Git/" class="md-nav__link">
        git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.1-Git%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97%28%E4%B8%8A%29/" class="md-nav__link">
        1.1Git简易指南
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.2-%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93/" class="md-nav__link">
        1.2创建代码仓库
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.3-%E4%BF%9D%E5%AD%98%E4%BD%A0%E7%9A%84%E6%9B%B4%E6%94%B9/" class="md-nav__link">
        1.3保存更改
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.4-%E6%9F%A5%E7%9C%8B%E4%BB%93%E5%BA%93%E7%8A%B6%E6%80%81/" class="md-nav__link">
        1.4查看仓库状态
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.5-检查以前的提交.md" class="md-nav__link">
        1.5检查以前的提交
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.6-%E5%9B%9E%E6%BB%9A%E9%94%99%E8%AF%AF%E7%9A%84%E4%BF%AE%E6%94%B9/" class="md-nav__link">
        1.6回滚错误的修改
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/2.7-%E9%87%8D%E5%86%99%E9%A1%B9%E7%9B%AE%E5%8E%86%E5%8F%B2/" class="md-nav__link">
        1.7重写项目历史
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/3.2-%E4%BF%9D%E6%8C%81%E4%BB%A3%E7%A0%81%E5%90%8C%E6%AD%A5/" class="md-nav__link">
        2.1保持代码同步
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/3.3-%E5%88%9B%E5%BB%BAPullRequest/" class="md-nav__link">
        2.2创建PullRequest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/3.4-%E4%BD%BF%E7%94%A8%E5%88%86%E6%94%AF/" class="md-nav__link">
        2.3使用分支
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/常见工作流比较.md" class="md-nav__link">
        2.4常见工作流比较
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/4-Git%E5%9B%BE%E8%A7%A3/" class="md-nav__link">
        3Git图解
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6Merge%E8%BF%98%E6%98%AFRebase/" class="md-nav__link">
        4.1代码合并Merge还是Rebase
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.2-%E5%9B%9E%E6%BB%9A%E5%91%BD%E4%BB%A4Reset%E3%80%81Checkout%E3%80%81Revert%E8%BE%A8%E6%9E%90/" class="md-nav__link">
        4.2回滚命令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.3-Git_log%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/" class="md-nav__link">
        4.3Git_log高级用法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.4-Git%E9%92%A9%E5%AD%90/" class="md-nav__link">
        4.4Git钩子
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/5.5-Git%E6%8F%90%E4%BA%A4%E5%BC%95%E7%94%A8/" class="md-nav__link">
        4.5Git提交引用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#925-" class="md-nav__link">
    作者：925 -- 小余同学
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  



  <a href="https://github.com/hanyongyan/hanyongyan.github.io/edit/main/docs/StudyNodes/JS/TypeScript基础笔记.md" title="编辑此页" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="typescript">TypeScript基础笔记(小满版本)<a class="headerlink" href="#typescript" title="Permanent link">&para;</a></h1>
<blockquote>
<h3 id="925-">作者：925 -- 小余同学<a class="headerlink" href="#925-" title="Permanent link">&para;</a></h3>
</blockquote>
<h1 id="ts-1">基础类型(TS -- 1)<a class="headerlink" href="#ts-1" title="Permanent link">&para;</a></h1>
<blockquote>
<p>我认为这个TypeScript跟C语言是很像的，对语言的定义都有严格的规范。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">str</span><span class="o">:</span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;这是字符串类型&quot;</span><span class="w"></span>
<span class="c1">//上方我们将str这个变量定义为了string类型，如果对他输入其他类型的内容就会报错，例如：</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">str</span><span class="o">:</span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">666</span><span class="w"></span>
<span class="c1">//这个就会报错了，会提示你不能将类型&quot;number&quot;分配给类型&quot;string&quot;</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">muban</span><span class="o">:</span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`web</span><span class="si">${</span><span class="nx">str</span><span class="si">}</span><span class="sb">`</span><span class="w"></span>
<span class="c1">//我们也可以使用ES6中的模板字符串</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">u</span><span class="o">:</span><span class="kt">void</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">undefined</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">u</span><span class="o">:</span><span class="kt">void</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="w"></span>
<span class="c1">//空值类型能够有这两种内容。void的内容也是不能去赋值给别人的</span><span class="w"></span>
<span class="c1">//某种程度上来说，void 类型像是与 any 类型相反，它表示没有任何类型。 当一个函数没有返回值时，你通常会见到其返回值类型是 void</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">fnvoid</span><span class="p">()</span><span class="o">:</span><span class="ow">void</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="c1">//函数也可以定义为空值，如果定义了void则不能返回内容</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">//undefined跟null类型的也可以交换着用的，具体区别放在了下面</span><span class="w"></span>
</code></pre></div>
<h2 id="_1">八种内置类型<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">str</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;jimmy&quot;</span><span class="p">;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">num</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">24</span><span class="p">;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">bool</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="c1">//这里接收的是布尔值，不是布尔值对象(let b:boolean = new Boolean())</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">u</span><span class="o">:</span><span class="w"> </span><span class="kt">undefined</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">undefined</span><span class="p">;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">n</span><span class="o">:</span><span class="w"> </span><span class="kt">null</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">obj</span><span class="o">:</span><span class="w"> </span><span class="kt">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">};</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">big</span><span class="o">:</span><span class="w"> </span><span class="kt">bigint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100n</span><span class="p">;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">sym</span><span class="o">:</span><span class="w"> </span><span class="kt">symbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Symbol</span><span class="p">(</span><span class="s2">&quot;me&quot;</span><span class="p">);</span><span class="w"> </span>
</code></pre></div>
<h2 id="_2">注意点<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="null-undefined">null 和 undefined<a class="headerlink" href="#null-undefined" title="Permanent link">&para;</a></h3>
<p>默认情况下 <code>null</code> 和 <code>undefined</code> 是所有类型的子类型。 就是说你可以把 <code>null</code> 和 <code>undefined</code> 赋值给其他类型。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// null和undefined赋值给string</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">str</span><span class="o">:</span><span class="nx">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;666&quot;</span><span class="p">;</span><span class="w"></span>
<span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="w"></span>
<span class="nx">str</span><span class="o">=</span><span class="w"> </span><span class="kc">undefined</span><span class="w"></span>

<span class="c1">// null和undefined赋值给number</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">num</span><span class="o">:</span><span class="nx">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">666</span><span class="p">;</span><span class="w"></span>
<span class="nx">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="w"></span>
<span class="nx">num</span><span class="o">=</span><span class="w"> </span><span class="kc">undefined</span><span class="w"></span>

<span class="c1">// null和undefined赋值给object</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">obj</span><span class="o">:</span><span class="nx">object</span><span class="w"> </span><span class="o">=</span><span class="p">{};</span><span class="w"></span>
<span class="nx">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="w"></span>
<span class="nx">obj</span><span class="o">=</span><span class="w"> </span><span class="kc">undefined</span><span class="w"></span>

<span class="c1">// null和undefined赋值给Symbol</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">sym</span><span class="o">:</span><span class="w"> </span><span class="nx">symbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Symbol</span><span class="p">(</span><span class="s2">&quot;me&quot;</span><span class="p">);</span><span class="w"> </span>
<span class="nx">sym</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="w"></span>
<span class="nx">sym</span><span class="o">=</span><span class="w"> </span><span class="kc">undefined</span><span class="w"></span>

<span class="c1">// null和undefined赋值给boolean</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">isDone</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="nx">isDone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="w"></span>
<span class="nx">isDone</span><span class="o">=</span><span class="w"> </span><span class="kc">undefined</span><span class="w"></span>

<span class="c1">// null和undefined赋值给bigint</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">big</span><span class="o">:</span><span class="w"> </span><span class="nx">bigint</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="mi">100n</span><span class="p">;</span><span class="w"></span>
<span class="nx">big</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="w"></span>
<span class="nx">big</span><span class="o">=</span><span class="w"> </span><span class="kc">undefined</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>如果你在 tsconfig.json 指定了 <code>"strictNullChecks":true</code> ，<code>null</code> 和 <code>undefined</code> 只能赋值给 <code>void</code> 和它们各自的类型。</p>
<h3 id="number-bigint">number 和 bigint<a class="headerlink" href="#number-bigint" title="Permanent link">&para;</a></h3>
<p>虽然 <code>number</code> 和 <code>bigint</code> 都表示数字，但是这两个类型不兼容。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">big</span><span class="o">:</span><span class="w"> </span><span class="nx">bigint</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="mi">100n</span><span class="p">;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">num</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6</span><span class="p">;</span><span class="w"></span>
<span class="nx">big</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">num</span><span class="p">;</span><span class="w"></span>
<span class="nx">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">big</span><span class="p">;</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>会抛出一个类型不兼容的 ts (2322) 错误。</p>
<h1 id="ts-2">任意类型(TS -- 2)<a class="headerlink" href="#ts-2" title="Permanent link">&para;</a></h1>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="nx">npm</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="kd">@types</span><span class="o">/</span><span class="nx">node</span><span class="w"> </span><span class="o">-</span><span class="nx">D</span><span class="w"></span>
<span class="nx">npm</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">ts</span><span class="o">-</span><span class="nx">node</span><span class="w"> </span><span class="o">-</span><span class="nx">g</span><span class="p">(</span><span class="nx">装全局的</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
</blockquote>
<h2 id="-any">类型(任意值) -- any<a class="headerlink" href="#-any" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">anys</span><span class="o">:</span><span class="kt">any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;小满穿黑丝&quot;</span><span class="w"></span>

<span class="nx">anys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="nx">anys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">18</span><span class="w"></span>
<span class="nx">anys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="nx">anys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Symbol</span><span class="p">(</span><span class="s1">&#39;666&#39;</span><span class="p">)</span><span class="w"></span>
<span class="c1">//any类型就跟原生的是一样的，能够给任意的类型进行定义，所以在在 TypeScript 中，任何类型都可以被归为 any 类型。这让 any 类型成为了类型系统的 顶级类型 (也被称作 全局超级类型 )。</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>作用的地方：</p>
<ol>
<li>
<p>有时候，我们会想要为那些在编程阶段还不清楚类型的变量指定一个类型。 这些值可能来自于动态的内容，比如来自用户输入或第三方代码库。 这种情况下，我们不希望类型检查器对这些值进行检查而是直接让它们通过编译阶段的检查。 那么我们可以使用 <code>any</code> 类型来标记这些变量</p>
</li>
<li>
<p>在对现有代码进行改写的时候，<code>any</code> 类型是十分有用的，它允许你在编译时可选择地包含或移除类型检查。 你可能认为 <code>Object</code> 有相似的作用，就像它在其它语言中那样。 但是 <code>Object</code> 类型的变量只是允许你给它赋任意值 - 但是却不能够在它上面调用任意的方法，即便它真的有这些方法</p>
</li>
<li>当你只知道一部分数据的类型时，<code>any</code> 类型也是有用的。 比如，你有一个数组，它包含了不同的类型的数据</li>
</ol>
</blockquote>
<h2 id="unknown">unknown类型<a class="headerlink" href="#unknown" title="Permanent link">&para;</a></h2>
<blockquote>
<p>unknow类型比any类型更安全</p>
<p>就像所有类型都可以被归为 <code>any</code>，所有类型也都可以被归为 <code>unknown</code>。这使得 <code>unknown</code> 成为 TypeScript 类型系统的另一种顶级类型（另一种的<code>any</code></p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">unknow</span><span class="o">:</span><span class="kt">unknown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="p">()</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="p">=&gt;</span><span class="mf">123</span><span class="p">}</span><span class="w"></span>
<span class="nx">unknow</span><span class="p">.</span><span class="nx">a</span><span class="p">()</span><span class="c1">//报错</span><span class="w"></span>
<span class="c1">//unkonwn类型是不能够去调用属性跟函数的，它是 any 类型对应的安全类型</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-3">接口和对象类型(TS -- 3)<a class="headerlink" href="#ts-3" title="Permanent link">&para;</a></h1>
<blockquote>
<p>在 <a href="https://so.csdn.net/so/search?from=pc_blog_highlight&amp;q=typescript">typescript</a> 中，我们定义对象的方式要用关键字 <strong>interface</strong>（接口），小满的理解是使用 <strong>interface</strong> 来定义一种约束，让数据的结构满足约束的格式。</p>
<p>我的理解是interface是一个国企部门只招一个人的话，他们会针对走后门的那个人量身定制招聘要求，到面试的时候，这些条件少一个都不行，多了也不行，毕竟已经内定了，再叼、这些条件不仅满足了而且还会更多的技能也没用，别人就是不要你。(留下心酸的眼泪)</p>
</blockquote>
<h2 id="interface">interface类型<a class="headerlink" href="#interface" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="k">readonly</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="c1">//这个readonly是只读属性，意思就是说只能读取，不能将其他值赋值给他</span><span class="w"></span>
<span class="w">    </span><span class="nx">age?</span><span class="o">:</span><span class="kt">number</span><span class="c1">//这个问号就是可选的意思，条件稍微宽松了一些，下面引用这个age的话有没有这个属性都可以，不会报错</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">obj</span><span class="o">:</span><span class="kt">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;小满嗷嗷叫&quot;</span><span class="c1">//这里如果不写name就会报错，因为我们在上面定义了A类型集合，并且在这个变量中引入了(里面必须要有name属性且类型为字符串)</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mf">18</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>注意：这个规定的属性不能多也不能少，参考我上面的案例</p>
</blockquote>
<h3 id="-">可选属性 --  <code>?</code>操作符<a class="headerlink" href="#-" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="k">readonly</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="nx">age?</span><span class="o">:</span><span class="kt">number</span><span class="c1">//这个问号就是可选的意思，条件稍微宽松了一些，下面引用这个age的话有没有这个属性都可以，不会报错</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">obj</span><span class="o">:</span><span class="kt">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;小满嗷嗷叫&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mf">18</span><span class="c1">//age写不写无所谓</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="-propnamestring">任意属性 -- [propName:string]<a class="headerlink" href="#-propnamestring" title="Permanent link">&para;</a></h3>
<blockquote>
<p>需要注意的是，<strong>一旦定义了任意属性，那么确定属性和可选属性的类型都必须是它的类型的子集</strong></p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">Person</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age?</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">propName</span><span class="o">:</span><span class="kt">stirng</span><span class="p">]</span><span class="o">:</span><span class="kt">string</span><span class="o">|</span><span class="kt">number</span><span class="c1">//这个属性一旦定义了，引用这个Person的对象就能够写入任意属性，属性的形式主要看冒号后面你定义了什么类型，比如在这里定义的类型就是string和number类型，不是这两者的类型就会报错，包括在Person里面定义除了string跟number之外其他类型也会报错</span><span class="w"></span>
<span class="w">    </span><span class="c1">//可以理解为这个 [propName:stirng]任意属性的优先度相当高</span><span class="w"></span>

<span class="w">    </span><span class="nx">注意string与number中间的</span><span class="w"> </span><span class="sb">`|`</span><span class="w"> </span><span class="nx">符号</span><span class="err">，</span><span class="nx">小飞棍来咯</span><span class="err">，</span><span class="nx">这是联合类型</span><span class="err">，</span><span class="nx">后面笔记会写</span><span class="err">，</span><span class="nx">这里就当作将string和number类型关系到了一块</span><span class="err">，</span><span class="nx">有点像逻辑或</span><span class="err">，</span><span class="nx">满足联合起来的其中一个条件都行</span><span class="err">，</span><span class="nx">两个也可以</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="-readonly">只读属性 -- readonly<a class="headerlink" href="#-readonly" title="Permanent link">&para;</a></h3>
<blockquote>
<p>只读属性必须在声明时或构造函数里被初始化。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="k">readonly</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="c1">//这个readonly是只读属性，意思就是说只能读取，不能将其他值赋值给他</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="kd">let</span><span class="w"> </span><span class="nx">obj</span><span class="o">:</span><span class="kt">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;小满嗷嗷叫&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;小满芳龄18&quot;</span><span class="c1">//报错</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span><span class="c1">//能够读取</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">name1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name1</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h3 id="-extends">继承属性 -- extends<a class="headerlink" href="#-extends" title="Permanent link">&para;</a></h3>
<blockquote>
<p>儿子在前面，父亲在后面。也就是说顺序是 儿子 继承于 父亲</p>
<p>父亲的部分会继承给儿子，父亲的部分如果没有使用?操作符的话，引用儿子的 对象 是必须将父亲的部分都写下去。一说到这个就想到现在有的地方买房子，出政策能够绑定3代人一起还款，父债子还，跑不掉的，连债务都继承了还不能摆脱，这政策太鸡儿黑心了，绝户计</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">p</span><span class="o">:</span><span class="kt">B</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;有看到小满的裤子吗？&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">88</span><span class="c1">//两种类型都要写</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-4">数组类型(TS -- 4)<a class="headerlink" href="#ts-4" title="Permanent link">&para;</a></h1>
<blockquote>
<p>普通的声明方式</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//类型加中括号</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">arr</span><span class="o">:</span><span class="kt">number</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">123</span><span class="p">]</span><span class="w"></span>
<span class="c1">//这样会报错定义了数字类型出现字符串是不允许的</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">arr</span><span class="o">:</span><span class="kt">number</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">]</span><span class="w"></span>
<span class="c1">//操作方法添加也是不允许的</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">arr</span><span class="o">:</span><span class="kt">number</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">,]</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">arr</span><span class="o">:</span><span class="kt">number</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="mf">4</span><span class="p">];</span><span class="c1">//数字类型的数组</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">arr2</span><span class="o">:</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="p">,</span><span class="s2">&quot;4&quot;</span><span class="p">];</span><span class="c1">//字符串类型的数组</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">arr3</span><span class="o">:</span><span class="kt">any</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="p">,</span><span class="kc">true</span><span class="p">,</span><span class="kc">undefined</span><span class="p">,[],{}];</span><span class="c1">//任意类型的数组</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">arr4</span><span class="o">:</span><span class="kt">number</span><span class="p">[][][]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[[]],[[]],[[]]]</span><span class="w"></span>
<span class="c1">//这个也能够决定你二维数组还是三维数组想要套几层就写几层</span><span class="w"></span>
</code></pre></div>
<h2 id="-array">泛型 -- Array &lt;类型&gt;<a class="headerlink" href="#-array" title="Permanent link">&para;</a></h2>
<blockquote>
<p>规则 Array &lt;类型&gt;</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">arr1</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="mf">4</span><span class="p">,</span><span class="mf">5</span><span class="p">]</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">arr2</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;1,2,3,4,5&quot;</span><span class="p">]</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">arr3</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="kt">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="kc">true</span><span class="p">]</span><span class="w"></span>

<span class="c1">//泛型数组套娃写法(还能够决定数组里面数组的类型之类的)</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">arr4</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="nb">Array</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="mf">123</span><span class="p">],[</span><span class="mf">456</span><span class="p">]]</span><span class="w"></span>
</code></pre></div>
<h2 id="-arguments">类数组 -- arguments<a class="headerlink" href="#-arguments" title="Permanent link">&para;</a></h2>
<blockquote>
<p>是所有参数的一个集合</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Arr</span><span class="p">(</span><span class="nx">...args</span><span class="o">:</span><span class="kt">any</span><span class="p">)</span><span class="o">:</span><span class="ow">void</span><span class="p">{</span><span class="c1">//...args为ES6的解构方式，任意类型，不能有返回值</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span><span class="c1">//输出{&#39;0&#39;:4,&#39;1&#39;:56,&#39;2&#39;:789}</span><span class="w"></span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">arr</span><span class="o">:</span><span class="kt">number</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arguments</span><span class="c1">//会报错，报缺少类型number[]的以下属性：pop,push,concat,join</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">arr</span><span class="o">:</span><span class="kt">IArguments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arguments</span><span class="c1">//解决方法</span><span class="w"></span>

<span class="w">    </span><span class="c1">//其中 IArguments 是 TypeScript 中定义好了的类型，它实际上就是：</span><span class="w"></span>
<span class="w">    </span><span class="kd">interface</span><span class="w"> </span><span class="nx">IArguments</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">length</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">callee</span><span class="o">:</span><span class="w"> </span><span class="kt">Function</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="nx">Arr</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="mf">56</span><span class="p">,</span><span class="mf">789</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h2 id="_3">接口表示数组<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<blockquote>
<p>一般用来描述类数组 </p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">ArrNumber</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span><span class="c1">//后面的才是定义类型的</span><span class="w"></span>
<span class="w">    </span><span class="c1">//[index: number]: string;这个就是定义字符串的了</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">Arr</span><span class="o">:</span><span class="w"> </span><span class="kt">ArrNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">];</span><span class="w"></span>
<span class="c1">//let Arr: ArrNumber = [&quot;1, 2, 3, 4, 5&quot;];</span><span class="w"></span>
<span class="c1">//表示：只要索引的类型是数字时，那么值的类型必须是数字。</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-5">函数扩展(TS -- 5)<a class="headerlink" href="#ts-5" title="Permanent link">&para;</a></h1>
<blockquote>
<p>函数内参数类型也是可以定义的</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="kt">string</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">age</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="s1">&#39;小满&#39;</span><span class="p">,</span><span class="mf">10000</span><span class="p">)</span><span class="c1">//输入不符合上述参数内定义的类型就会出错</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="c1">//输出小满10000</span><span class="w"></span>
<span class="o">--------------------------------------------------------------------</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">666</span><span class="p">)</span><span class="o">:</span><span class="kt">string</span><span class="p">{</span><span class="c1">//如果在下面使用的时候，没有参数传进来就会以你在这里设置的默认参数执行，比如这个666</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">age</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="s1">&#39;小满&#39;</span><span class="p">)</span><span class="c1">//输入不符合上述参数内定义的类型就会出错</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="c1">//输出小满666</span><span class="w"></span>
<span class="o">--------------------------------------------------------------------</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">age?</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">666</span><span class="p">)</span><span class="o">:</span><span class="kt">string</span><span class="p">{</span><span class="c1">//也可以使用这个`?`操作符，age传不传就变成可选的了</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">age</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="s1">&#39;小满穿女仆装&#39;</span><span class="p">)</span><span class="c1">//输入不符合上述参数内定义的类型就会出错</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="c1">//输出小满穿女仆装</span><span class="w"></span>
</code></pre></div>
<h2 id="_4">对象形式的定义<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<blockquote>
<p>跟定义对象差不多，但是在针对多个参数的时候会更加的方便，且记得引用的时候要写成({xxxx})形式，不然会报错，输出的是数组形式的</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">User</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="nx">user</span><span class="o">:</span><span class="kt">User</span><span class="p">)</span><span class="o">:</span><span class="nx">User</span><span class="p">{</span><span class="c1">//这里的参数填写方式就变得简单了</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">user</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fn</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;&#39;小满&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">18</span><span class="w"></span>
<span class="p">})</span><span class="c1">//输入不符合上述参数内定义的类型就会出错</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="c1">//输出{name:&#39;小满&#39;,age:18}</span><span class="w"></span>
</code></pre></div>
<h2 id="_5">函数重载<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<blockquote>
<p>重载是方法名字相同，而参数不同，返回类型可以相同也可以不同。</p>
<p>如果参数类型不同，则参数类型应设置为 <strong>any</strong>。</p>
<p>参数数量不同你可以将不同的参数设置为可选。</p>
<p>为了让编译器能够选择正确的检查类型，它与 JavaScript 里的处理流程相似。 它查找重载列表，尝试使用第一个重载定义。 如果匹配的话就使用这个。 因此，在定义重载的时候，一定要把最精确的定义放在最前面。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="nx">params</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="ow">void</span><span class="c1">//第一套规则</span><span class="w"></span>
<span class="kd">function</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="nx">params</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">params2</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="ow">void</span><span class="c1">//第二套规则</span><span class="w"></span>
<span class="kd">function</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="nx">params</span><span class="o">:</span><span class="kt">any</span><span class="p">,</span><span class="nx">params?</span><span class="o">:</span><span class="kt">any</span><span class="p">)</span><span class="o">:</span><span class="ow">void</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">params2</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">1</span><span class="p">)</span><span class="w"></span>
<span class="c1">//输出1跟undefined，因为遵循的是第一套规则</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="mf">1</span><span class="p">)</span><span class="w"></span>
<span class="c1">//输出&quot;1&quot;跟1，遵循的是第二套规则</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-6">联合类型|类型断言|交叉类型(TS -- 6)<a class="headerlink" href="#ts-6" title="Permanent link">&para;</a></h1>
<h2 id="_6">联合类型<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<blockquote>
<p>联合类型能够让我们可选我们自己需要的类型部分，如果需要的类型超过或者达到2个，那就可以使用。</p>
<p>那为什么不使用any呢？那是因为我们需要的并不是所有类型都能通过，我只希望这两个或者3个类型能够通过，如果需要的类型超过或着达到两个都使用any的话，那就和JavaScript原生没有区别了</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//例如我们的手机号通常是13XXXXXXX 为数字类型 这时候产品说需要支持座机</span><span class="w"></span>
<span class="c1">//所以我们就可以使用联合类型支持座机字符串</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">myPhone</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">string</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;010-820&#39;</span><span class="w"></span>


<span class="c1">//这样写是会报错的应为我们的联合类型只有数字和字符串并没有布尔值</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">myPhone</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">string</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="c1">//报错</span><span class="w"></span>
</code></pre></div>
<h3 id="_7">函数使用联合类型<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<blockquote>
<p>这个!!是怎么回事呢？</p>
<p>我们知道一串数字想变成字符串只要加上""就能隐式转换成字符串。</p>
<p>那一个类型只要<code>!</code>就能进行反转，!只有正反，也就是false跟true，这种就有点类似隐式转换了，我们连续转两次就相当于当前形式的布尔值类型了</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="kr">type</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">!!</span><span class="kr">type</span><span class="c1">//将type强行转化为布尔值类型，如果没用进行转化的话是会报错的</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="o">--------------------------------------------------------------------</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="kr">type</span><span class="o">:</span><span class="kt">number</span><span class="o">|</span><span class="kt">boolean</span><span class="p">)</span><span class="o">:</span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">!!</span><span class="kr">type</span><span class="c1">//将type强行转化为布尔值类型，如果没用进行转化的话是会报错的</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="c1">//true</span><span class="w"></span>
</code></pre></div>
<h2 id="_8">交叉类型<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<blockquote>
<p>多种类型的集合，联合对象将具有所联合类型的所有成员</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">Pople</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">interface</span><span class="w"> </span><span class="nx">Man</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">sex</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">xiaoman</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">man</span><span class="o">:</span><span class="kt">Pople</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nx">Man</span><span class="p">)</span><span class="o">:</span><span class="ow">void</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="c1">//这里通过了&amp;将Pople跟Man交叉在了一起，则man需要处理Pople也要处理Man。还可以继续跟更多个interface</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">man</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">xiaoman</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小满今天坏掉了&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">18</span><span class="w"></span>
<span class="w">    </span><span class="nx">sex</span><span class="o">:</span><span class="kt">1</span><span class="c1">//如果sex不写是会报错的，会提示你少写了一个sex</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<h2 id="_9">类型断言<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<blockquote>
<p>语法格式，值 as 类型 或者 &lt;类型&gt;值</p>
<p>需要注意的是，类型断言只能够「欺骗」TypeScript 编译器，无法避免运行时的错误，反而滥用类型断言可能会导致运行时错误</p>
<p>覆盖它的推断，并且能以你任何你想要的方式分析它，这种机制被称为「类型断言」。TypeScript 类型断言用来告诉编译器你比它更了解这个类型，并且它不应该再发出错误</p>
<p>当 <code>S</code> 类型是 <code>T</code> 类型的子集，或者 <code>T</code> 类型是 <code>S</code> 类型的子集时，<code>S</code> 能被成功断言成 <code>T</code>。这是为了在进行类型断言时提供额外的安全性，完全毫无根据的断言是危险的，如果你想这么做，你可以使用 <code>any</code>。</p>
<p>2、类型断言的用途</p>
<p>（1）将一个联合类型推断为其中一个类型</p>
<p>（2）将一个父类断言为更加具体的子类</p>
<p>（3）将任何一个类型断言为 any</p>
<p>（4）将 any 断言为一个具体的类型</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nx">原型</span><span class="err">：</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">num</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="ow">void</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">num</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span><span class="c1">//这里会报错，因为我们确实没有.length这个内容</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">fn</span><span class="p">(</span><span class="s2">&quot;12345&quot;</span><span class="p">)</span><span class="w"></span>
<span class="o">--------------------------------------------------------</span><span class="w"></span>
<span class="nx">断言写法</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">num</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="ow">void</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nx">num</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">).</span><span class="nx">length</span><span class="p">);</span><span class="c1">//用括号括起来，as断言他是string类型</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">fn</span><span class="p">(</span><span class="s2">&quot;12345&quot;</span><span class="p">)</span><span class="c1">//这样会打印出5</span><span class="w"></span>
<span class="nx">fn</span><span class="p">(</span><span class="mf">12345</span><span class="p">)</span><span class="c1">//这样会打印出undefined</span><span class="w"></span>
</code></pre></div>
<p>另一个例子</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">run</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">interface</span><span class="w"> </span><span class="nx">B</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">build</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">fn</span><span class="p">(</span><span class="kr">type</span><span class="o">:</span><span class="nx">A</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">B</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="o">&lt;</span><span class="nx">A</span><span class="o">&gt;</span><span class="kr">type</span><span class="p">).</span><span class="nx">run</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">fn</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">build</span><span class="o">:</span><span class="s2">&quot;123&quot;</span><span class="c1">//这里是没办法传过去的，断言是不能够滥用的，因为我们确实没有.run这个内容</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<h2 id="_10">临时断言<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<blockquote>
<p>1.使用any临时断言</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nb">window</span><span class="p">.</span><span class="nx">abc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">123</span><span class="w"></span>
<span class="c1">//这样写会报错因为window没有abc这个东西</span><span class="w"></span>
<span class="p">(</span><span class="nb">window</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">any</span><span class="p">).</span><span class="nx">abc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">123</span><span class="w"></span>
<span class="c1">//可以使用any临时断言在 any 类型的变量上，访问任何属性都是允许的。</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>在下面的例子中，将 something 断言为 boolean 虽然可以通过编译，但是并没有什么用 并不会影响结果，因为编译过程中会删除类型断言</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">toBoolean</span><span class="p">(</span><span class="nx">something</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">something</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">bbb</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="nx">toBoolean</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">bbb</span><span class="p">)</span><span class="w"></span>
<span class="c1">// 返回值为 1</span><span class="w"></span>
<span class="c1">//</span><span class="w"></span>
</code></pre></div>
<h3 id="as-const"><code>as const</code><a class="headerlink" href="#as-const" title="Permanent link">&para;</a></h3>
<blockquote>
<p>是对字面值的<strong>断言</strong>，与 const 直接定义常量是有区别的</p>
<p>如果是普通类型跟直接 const 声明是一样的</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;小满&#39;</span><span class="w"></span>
<span class="nx">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;aa&#39;</span><span class="w"> </span><span class="c1">//无法修改</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">names2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;小满&#39;</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kd">const</span><span class="w"></span>
<span class="nx">names2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;aa&#39;</span><span class="w"> </span><span class="c1">//无法修改</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// 数组</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">20</span><span class="p">]</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kd">const</span><span class="p">;</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">20</span><span class="p">];</span><span class="w"></span>

<span class="nx">a1</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="mf">30</span><span class="p">);</span><span class="w"> </span><span class="c1">// 错误，此时已经断言字面量为[10, 20],数据无法做任何修改</span><span class="w"></span>
<span class="nx">a2</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="mf">30</span><span class="p">);</span><span class="w"> </span><span class="c1">// 通过，没有修改指针。之所以没有修改指针是因为const的性质是决定了指针指向的位置是已经固定不会发生改变的了，这个30想要添加进去除非直接修改存储值的地方</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-7">内置对象(TS -- 7)<a class="headerlink" href="#ts-7" title="Permanent link">&para;</a></h1>
<h2 id="ecmascript">ECMAScript的内置对象<a class="headerlink" href="#ecmascript" title="Permanent link">&para;</a></h2>
<blockquote>
<p>JavaScript 中有很多内置对象，它们可以直接在 <code>TypeScript</code>中当做定义好了的类型。</p>
<p><strong><code>Boolean</code>、Number、<code>string</code>、<code>RegExp</code>、<code>Date</code>、<code>Error</code></strong></p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">regexp</span><span class="o">:</span><span class="kt">Regexp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">/\w\d\s/</span><span class="c1">//声明正则</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">date</span><span class="o">:</span><span class="kt">Date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">()</span><span class="c1">//对象类型</span><span class="w"></span>
<span class="c1">//const date:Date = new Date().getTime()  number类型</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">error</span><span class="o">:</span><span class="kt">Error</span><span class="p">(</span><span class="s1">&#39;错误&#39;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p><strong>总结</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="kt">Boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">n</span><span class="o">:</span><span class="w"> </span><span class="kt">Number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">s</span><span class="o">:</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">String</span><span class="p">(</span><span class="s1">&#39;小满今天穿白丝&#39;</span><span class="p">)</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">d</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">()</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">r</span><span class="o">:</span><span class="w"> </span><span class="kt">RegExp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">/^1/</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">e</span><span class="o">:</span><span class="w"> </span><span class="kt">Error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;error!&quot;</span><span class="p">)</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span>
</code></pre></div>
<h2 id="dom-bom">DOM 和 BOM 的内置对象<a class="headerlink" href="#dom-bom" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong><code>Document</code>、<code>HTMLElement</code>、<code>Event</code>、<code>NodeList</code> 等</strong></p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">list</span><span class="o">:</span><span class="kt">NodeList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;#list li&#39;</span><span class="p">)</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span><span class="w"></span>
<span class="c1">//NodeList 实例对象是一个类似数组的对象，它的成员是节点对象。Node.childNodes、document.querySelectorAll () 返回的都是 NodeList 实例对象。 [1]  NodeList 对象代表一个有序的节点列表。</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">body</span><span class="o">:</span><span class="kt">HTMLElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">div</span><span class="o">:</span><span class="kt">HTMLDivElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">div</span><span class="p">)</span><span class="w"></span>

<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,(</span><span class="nx">e</span><span class="o">:</span><span class="kt">MouseEvent</span><span class="p">)=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="c1">//promise</span><span class="w"></span>
<span class="kd">function</span><span class="w"> </span><span class="nx">promise</span><span class="p">()</span><span class="o">:</span><span class="nb">Promise</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="p">{</span><span class="c1">//Promise是类型,number是泛型</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="nx">rejuct</span><span class="p">)=&gt;{</span><span class="w"></span>
<span class="w">        </span><span class="nx">resolve</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="c1">//如果不进行断言的话会报错</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">promise</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span><span class="c1">//返回1，这里会提示你res应该输入number类型</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="kt">HTMLElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">allDiv</span><span class="o">:</span><span class="w"> </span><span class="kt">NodeList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span><span class="w"></span>
<span class="c1">//读取div 这种需要类型断言 或者加个判断应为读不到返回null</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">div</span><span class="o">:</span><span class="kt">HTMLElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">HTMLDivElement</span><span class="w"></span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="w"> </span><span class="kt">MouseEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="p">});</span><span class="w"></span>
<span class="c1">//dom元素的映射表</span><span class="w"></span>
<span class="kd">interface</span><span class="w"> </span><span class="nx">HTMLElementTagNameMap</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;a&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLAnchorElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;abbr&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;address&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;applet&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLAppletElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;area&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLAreaElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;article&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;aside&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;audio&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLAudioElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;b&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;base&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLBaseElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;bdi&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;bdo&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;blockquote&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLQuoteElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;body&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLBodyElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;br&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLBRElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;button&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLButtonElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;canvas&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLCanvasElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;caption&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTableCaptionElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;cite&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;code&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;col&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTableColElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;colgroup&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTableColElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLDataElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;datalist&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLDataListElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;dd&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;del&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLModElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;details&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLDetailsElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;dfn&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;dialog&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLDialogElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;dir&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLDirectoryElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;div&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLDivElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;dl&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLDListElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;dt&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;em&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;embed&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLEmbedElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;fieldset&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLFieldSetElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;figcaption&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;figure&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;font&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLFontElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;footer&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;form&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLFormElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;frame&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLFrameElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;frameset&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLFrameSetElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;h1&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLHeadingElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;h2&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLHeadingElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;h3&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLHeadingElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;h4&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLHeadingElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;h5&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLHeadingElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;h6&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLHeadingElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;head&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLHeadElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;header&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;hgroup&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;hr&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLHRElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;html&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLHtmlElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;i&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;iframe&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLIFrameElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;img&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLImageElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;input&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLInputElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;ins&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLModElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;kbd&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;label&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLLabelElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;legend&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLLegendElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;li&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLLIElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;link&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLLinkElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;main&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;map&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLMapElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;mark&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;marquee&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLMarqueeElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;menu&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLMenuElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;meta&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLMetaElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;meter&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLMeterElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;nav&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;noscript&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;object&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLObjectElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;ol&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLOListElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;optgroup&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLOptGroupElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;option&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLOptionElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;output&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLOutputElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;p&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLParagraphElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;param&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLParamElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;picture&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLPictureElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;pre&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLPreElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;progress&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLProgressElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;q&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLQuoteElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;rp&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;rt&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;ruby&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;s&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;samp&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;script&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLScriptElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;section&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;select&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLSelectElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;slot&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLSlotElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;small&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;source&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLSourceElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;span&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLSpanElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;strong&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;style&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLStyleElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;sub&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;summary&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;sup&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;table&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTableElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;tbody&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTableSectionElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;td&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTableDataCellElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;template&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTemplateElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;textarea&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTextAreaElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;tfoot&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTableSectionElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;th&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTableHeaderCellElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;thead&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTableSectionElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;time&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTimeElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTitleElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;tr&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTableRowElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;track&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLTrackElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;u&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;ul&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLUListElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;var&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;video&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLVideoElement</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;wbr&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">HTMLElement</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h1 id="classts-8">Class类(TS -- 8)<a class="headerlink" href="#classts-8" title="Permanent link">&para;</a></h1>
<blockquote>
<p><code>ES6</code>提供了更接近传统语言的写法，引入了 Class（类）这个概念，作为对象的模板。通过 <code>class</code> 关键字，可以定义类。基本上，ES6 的 <code>class</code> 可以看作只是一个<code>语法糖</code>，它的绝大部分功能，ES5 都可以做到，新的 <code>class</code> 写法只是让对象原型的写法更加清晰、更像<code>面向对象</code>编程的语法而已。上面的代码用 ES6 的 “类” 改写</p>
<p>JavaScript写法</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//定义类      JavaScript写法</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">age</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sub</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="ow">new</span><span class="w"> </span><span class="nx">Person</span><span class="p">(</span><span class="s2">&quot;小满&quot;</span><span class="p">,</span><span class="mf">22</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>TypeScript写法</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//在TypeScript中是需要提前声明类型的</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="w">    </span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="c1">//没错，没使用标红的是这些</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">age</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sub</span><span class="c1">//上面定义了变量就需要使用，如果没用使用的话声明的变量就会标红(就算不标红不提示，真运行下去也会报错)，不能就那么放着，要么就用上，要么就给他个默认值0塞着</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="ow">new</span><span class="w"> </span><span class="nx">Person</span><span class="p">(</span><span class="s2">&quot;小满&quot;</span><span class="p">,</span><span class="mf">22</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h3 id="public">public<a class="headerlink" href="#public" title="Permanent link">&para;</a></h3>
<blockquote>
<p>public内部外部都可以访问，如果定义了public，像p就能够访问constructor内部的变量了。当然，默认情况下也是public</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//在TypeScript中是需要提前声明类型的</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="c1">//没错，没使用标红的是这些</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">age</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sub</span><span class="c1">//上面定义了变量就需要使用，如果没用使用的话声明的变量就会标红(就算不标红不提示，真运行下去也会报错)，不能就那么放着，要么就用上，要么就给他个默认值0塞着</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Person</span><span class="p">(</span><span class="s2">&quot;小满&quot;</span><span class="p">,</span><span class="mf">22</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="nx">p</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">sub</span><span class="c1">//都可以访问</span><span class="w"></span>
</code></pre></div>
<h3 id="private">private<a class="headerlink" href="#private" title="Permanent link">&para;</a></h3>
<blockquote>
<p>private 私有变量只能在内部访问</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//在TypeScript中是需要提前声明类型的</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="c1">//没错，没使用标红的是这些</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">age</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sub</span><span class="c1">//上面定义了变量就需要使用，如果没用使用的话声明的变量就会标红(就算不标红不提示，真运行下去也会报错)，不能就那么放着，要么就用上，要么就给他个默认值0塞着</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Person</span><span class="p">(</span><span class="s2">&quot;小满&quot;</span><span class="p">,</span><span class="mf">22</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="nx">p</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">sub</span><span class="c1">//都访问不到了</span><span class="w"></span>
</code></pre></div>
<h3 id="protected">protected<a class="headerlink" href="#protected" title="Permanent link">&para;</a></h3>
<blockquote>
<p>protected内部和子类中访问</p>
<p>provate跟protectd他们的区别是一个是只能在内部使用，一个是内部与子类访问，例子如下</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//在TypeScript中是需要提前声明类型的</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="c1">//没错，没使用标红的是这些</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">age</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sub</span><span class="c1">//上面定义了变量就需要使用，如果没用使用的话声明的变量就会标红(就算不标红不提示，真运行下去也会报错)，不能就那么放着，要么就用上，要么就给他个默认值0塞着</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Man</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Person</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">super</span><span class="p">(</span><span class="s2">&quot;小满&quot;</span><span class="p">,</span><span class="mf">22</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="c1">//这两个都可以访问到，this.age访问不到。因为age是private，private只能在内部使用而不能在子类访问，Man是Person的子类</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Person</span><span class="p">(</span><span class="s2">&quot;小满&quot;</span><span class="p">,</span><span class="mf">22</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="nx">p</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">sub</span><span class="w"></span>
</code></pre></div>
<h2 id="static">static 静态属性 和 静态方法<a class="headerlink" href="#static" title="Permanent link">&para;</a></h2>
<blockquote>
<ul>
<li>
<p><strong>静态属性和非静态属性的区别：</strong></p>
</li>
<li>
<p>在内存中存放的位置不同：所有 static 修饰的属性和方法都存放在内存的方法区里，而非静态的都存在堆内存中</p>
</li>
<li>出现的时机不同：静态属性和方法在没创建对象之前就存在，而非静态的需要在创建对象才存在</li>
<li>静态属性是整个类都公用的</li>
<li>生命周期不一样，静态在类消失后被销毁，非静态在对象销毁后销毁</li>
<li>
<p>用法：静态的可以直接通过类名访问，非静态只能通过对象进行访问</p>
</li>
<li>
<p>使用<code>static</code>注意事项</p>
</li>
<li>
<p><strong>带静态修饰符的方法只能访问静态属性</strong></p>
</li>
<li><strong>非静态方法既能访问静态属性也能访问非静态属性</strong></li>
<li><strong>非静态方法不能定义静态变量</strong></li>
<li><strong>静态方法不能使用 this 关键字</strong></li>
<li>
<p><strong>静态方法不能调用非静态方法，反之可以</strong></p>
</li>
<li>
<p>父子类中静态和非静态的关系</p>
</li>
<li>
<p>对于非静态属性，子类可以继承父类非静态属性，但是当父子类出现相同的非静态属性时，不会发生子类的重写并覆盖父类的非静态属性，而是隐藏父类的非静态属性</p>
</li>
<li>对于非静态方法，子类可以继承并重写父类的非静态方法</li>
<li>对于静态属性，子类可以继承父类的静态属性，但是如何和非静态属性一样时，会被隐藏</li>
<li>对于静态方法，子类可以继承父类的静态方法，但是不能重写静态方法，同名时会隐藏父类的</li>
</ul>
<p>注：静态属性、静态方法、非静态属性都可以被继承和隐藏，但是不可以被重写，非静态方法可以被重写和继承</p>
<ul>
<li><strong>静态代码块的作用</strong>：
  一般情况下，有些代码需要在项目启动的时候就执行，这时候就需要静态代码块，比如一个项目启动需要加载配置文件，或初始化内容等。</li>
<li><strong>静态代码块不能出现在任何方法体内</strong>
  对于普通方法：普通方法是需要加载类 new 出一个实例化对象，通过运行这个对象才能运行代码块，而静态方法随着类加载就运行了。
  对于静态方法：在类加载时静态方法也加载了，但是必须需要类名或者对象名才可以访问，相比于静态代码块，静态方法是被动运行，而静态代码块是主动运行</li>
<li><strong>静态代码块不能访问普通变量</strong>
  普通变量只能通过对象调用的，所以普通变量不能放在静态代码块中。</li>
</ul>
<p>普通代码块和构造代码块</p>
<ul>
<li><strong>静态代码块和构造代码块在声明上少一个 static 关键字</strong></li>
<li><strong>执行时机</strong>：
  构造代码块在创建对象时被调用，每次创建对象都会调用一次，且优先于构造函数执行。
  注：不是优先于构造函数执行，而是依托于构造函数，如果不创建对象就不会执行构造代码块</li>
<li><strong>普通代码块和构造代码块的区别在于</strong>，构造代码块是在类中定于的，而普通代码块是在方法体中定义的，执行顺序和书写顺序一致。</li>
</ul>
<p>执行顺序</p>
<p>​      <strong>静态代码块 &gt; 构造代码块 &gt; 构造函数 &gt; 普通代码块</strong></p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="c1">//没错，没使用标红的是这些</span><span class="w"></span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nx">aaa</span><span class="o">:</span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;123456&#39;</span><span class="c1">//静态属性</span><span class="w"></span>

<span class="w">    </span><span class="kr">constructor</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="nx">sub</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">age</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sub</span><span class="c1">//上面定义了变量就需要使用，如果没用使用的话声明的变量就会标红(就算不标红不提示，真运行下去也会报错)，不能就那么放着，要么就用上，要么就给他个默认值0塞着</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">run</span><span class="p">()</span><span class="c1">//会报错，调用不了。互斥的，不能够通过静态函数去访问内部的变量，或者是在内部的变量去调用外部的静态函数</span><span class="w"></span>
<span class="w">        </span><span class="nx">Person</span><span class="p">.</span><span class="nx">run</span><span class="p">()</span><span class="c1">//只能这样去调用</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">dev</span><span class="p">()</span><span class="c1">//静态函数之间可以互相调用</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">aaa</span><span class="c1">//用this的话只能访问上面static类型的，其他的不管是public还是private或者是protected都是不能够访问的(会报不存在属性的错误)   因为这里的this指的是当前这个类，而构造函数里面的this指的是新的实例对象</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;789&#39;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nx">dev</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">aaa</span><span class="c1">//静态函数之间可以互相调用</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;dev&#39;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Person</span><span class="p">.</span><span class="nx">run</span><span class="p">())</span><span class="c1">//返回789</span><span class="w"></span>

<span class="nx">Person</span><span class="p">.</span><span class="nx">aaa</span><span class="c1">//能够直接访问，不需要再new一下</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Person</span><span class="p">.</span><span class="nx">aaa</span><span class="p">)</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Person</span><span class="p">(</span><span class="s2">&quot;小满&quot;</span><span class="p">,</span><span class="mf">22</span><span class="p">,</span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h2 id="interface_1">interface 定义 类<a class="headerlink" href="#interface_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>ts interface 定义类 使用关键字 implements  后面跟 interface 的名字多个用逗号隔开 继承还是用 extends</p>
<p>通过接口去约束类</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">Person</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">run</span><span class="p">(</span><span class="kr">type</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="o">:</span><span class="kt">boolean</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Man</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">Person</span><span class="p">{</span><span class="c1">//会提示我们Man中缺少属性run，但类型Person中需要该属性</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//通过接口去约束类</span><span class="w"></span>
<span class="kd">interface</span><span class="w"> </span><span class="nx">Person</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">run</span><span class="p">(</span><span class="kr">type</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="o">:</span><span class="kt">boolean</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">H</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">set</span><span class="p">()</span><span class="o">:</span><span class="ow">void</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Man</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">Person</span><span class="p">,</span><span class="nx">H</span><span class="p">{</span><span class="c1">//会报错，提示我们缺少set属性</span><span class="w"></span>
<span class="w">       </span><span class="nx">run</span><span class="p">(</span><span class="kr">type</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="o">:</span><span class="kt">boolean</span><span class="p">{</span><span class="w"></span>
<span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="kr">type</span><span class="w"></span>
<span class="w">       </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">Person</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">run</span><span class="p">(</span><span class="kr">type</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="o">:</span><span class="kt">boolean</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">H</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">set</span><span class="p">()</span><span class="o">:</span><span class="ow">void</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="c1">//也可以使用继承去使用</span><span class="w"></span>
<span class="w">    </span><span class="nx">params</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">params</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">params</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Man</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">Person</span><span class="p">,</span><span class="nx">H</span><span class="p">{</span><span class="w"></span>
<span class="w">       </span><span class="nx">run</span><span class="p">(</span><span class="kr">type</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="o">:</span><span class="kt">boolean</span><span class="p">{</span><span class="w"></span>
<span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="kr">type</span><span class="w"></span>
<span class="w">       </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nx">set</span><span class="p">(){</span><span class="w"></span>
<span class="w">            </span><span class="c1">//啥也没有，这就是用接口去描述类</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h1 id="typescript8">抽象类(TypeScript8)<a class="headerlink" href="#typescript8" title="Permanent link">&para;</a></h1>
<blockquote>
<p>用关键词<code>abstract</code>修饰的类称为 abstract 类（<strong>抽象类</strong>）</p>
<p>应用场景如果你写的类实例化之后毫无用处此时我可以把他定义为抽象类</p>
<p>或者你也可以把他作为一个基类 -&gt; 通过继承一个<strong>派生类</strong>去实现基类的一些方法</p>
<p>对于 abstract 方法只允许声明，不允许实现（因为没有方法体）（毕竟叫抽象，当然不能实实在在的让你实现），并且不允许使用 final 和 abstract 同时修饰一个方法或者类，也不允许使用 static 修饰 abstract 方法。也就是说，abstract 方法只能是实例方法，不能是类方法。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="k">abstract</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="nx">construct</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">){</span><span class="c1">//construct：构造器</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="c1">//abstract getName(){//方法getName不能具有实现，因为它标记为抽象。定义抽象类的函数</span><span class="w"></span>
<span class="c1">//    return 213</span><span class="w"></span>
<span class="c1">//}</span><span class="w"></span>
<span class="w">    </span><span class="nx">setName</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">abstract</span><span class="w"> </span><span class="nx">getName</span><span class="p">()</span><span class="o">:</span><span class="kt">string</span><span class="c1">//抽象类</span><span class="w"></span>


<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="c1">//派生类。定义了抽象类必须在派生类里实现</span><span class="w"></span>
<span class="w">        </span><span class="c1">//B类是继承A类的，此时A类就是一个抽象类</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">super</span><span class="p">(</span><span class="s1">&#39;小满&#39;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">getName</span><span class="p">()</span><span class="o">:</span><span class="kt">string</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//此时A类是无法被创建实例的(new A)，也就是无法创建抽象类的实例</span><span class="w"></span>
<span class="c1">//B类是可以创建实例的(new B)</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">B</span><span class="w"></span>
<span class="nx">b</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s2">&quot;小满2&quot;</span><span class="p">)</span><span class="c1">//通过抽象类的设置，成功修改掉子类的内容</span><span class="w"></span>
<span class="c1">//    setName(name:string){</span><span class="w"></span>
<span class="c1">//        this.name = name</span><span class="w"></span>
<span class="c1">//    }</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">getName</span><span class="p">())</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-9">元组类型(TS -- 9)<a class="headerlink" href="#ts-9" title="Permanent link">&para;</a></h1>
<blockquote>
<p>数组合并了相同类型的对象，而元组（Tuple）合并了不同类型的对象。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">arr</span><span class="o">:</span><span class="p">[</span><span class="kt">string</span><span class="p">,</span><span class="kt">number</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;小满&#39;</span><span class="p">,</span><span class="mf">22</span><span class="p">]</span><span class="c1">//这样的方式就叫做元组，定义了每个位置需要满足的不同类型</span><span class="w"></span>
<span class="nx">arr</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">length</span><span class="c1">//有</span><span class="w"></span>
<span class="nx">arr</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">length</span><span class="c1">//无，因为上面的定义类型会自动帮我们推断是否有该方法</span><span class="w"></span>
<span class="c1">//Number 类型是没有 length 属性的</span><span class="w"></span>
</code></pre></div>
<h3 id="_11">越界的元组<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<blockquote>
<p>当添加的元组越界的时候，越界的类型会被限制为元组类型中每个类型的联合类型</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">arr</span><span class="o">:</span><span class="p">[</span><span class="kt">string</span><span class="p">,</span><span class="kt">number</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;小满&#39;</span><span class="p">,</span><span class="mf">22</span><span class="p">]</span><span class="c1">//这样的方式就叫做元组，定义了每个位置需要满足的不同类型</span><span class="w"></span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="c1">//会报错，因为类型boolean参数不能赋值给string|number的类型</span><span class="w"></span>
<span class="c1">//这个就是元组对越界元素的处理</span><span class="w"></span>

<span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;111&#39;</span><span class="p">,</span><span class="mf">2222</span><span class="p">)</span><span class="c1">//这种就可以</span><span class="w"></span>
<span class="c1">//也可以对二维数组进行限制规定类型</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-10">枚举类型(TS -- 10)<a class="headerlink" href="#ts-10" title="Permanent link">&para;</a></h1>
<blockquote>
<p>在 javaScript 中是没有<code>枚举</code>的概念的     TS 帮我们定义了枚举这个类型</p>
</blockquote>
<h2 id="enum">enum 关键字定义枚举<a class="headerlink" href="#enum" title="Permanent link">&para;</a></h2>
<h3 id="_12">数字定义枚举<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<blockquote>
<p>默认从0开始的</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">enum</span><span class="w"> </span><span class="nx">Color</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">red</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">green</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">blue</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Color</span><span class="p">.</span><span class="nx">red</span><span class="p">,</span><span class="nx">Color</span><span class="p">.</span><span class="nx">blue</span><span class="p">,</span><span class="nx">Color</span><span class="p">.</span><span class="nx">green</span><span class="p">)</span><span class="c1">//能够得到他们的顺序数字，这里返回0，2，1</span><span class="w"></span>
</code></pre></div>
<h4 id="_13">增长枚举<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<blockquote>
<p>能够通过自定义开头决定从哪个数字开始枚举，其他位置的都可以定义，后面的数字就按顺序枚举</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">enum</span><span class="w"> </span><span class="nx">Color</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">red</span><span class="o">=</span><span class="mf">2</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">green</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">blue</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Color</span><span class="p">.</span><span class="nx">red</span><span class="p">,</span><span class="nx">Color</span><span class="p">.</span><span class="nx">blue</span><span class="p">,</span><span class="nx">Color</span><span class="p">.</span><span class="nx">green</span><span class="p">)</span><span class="c1">//能够得到他们的顺序数字，这里返回2，4，3</span><span class="w"></span>
</code></pre></div>
<h3 id="_14">字符串枚举<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<blockquote>
<p>字符串枚举的概念很简单。 在一个字符串枚举里，每个成员都必须用字符串字面量，或另外一个字符串枚举成员进行初始化。</p>
<p>由于字符串枚举没有自增长的行为，字符串枚举可以很好的序列化。 换句话说，如果你正在调试并且必须要读一个数字枚举的运行时的值，这个值通常是很难读的 - 它并不能表达有用的信息，字符串枚举允许你提供一个运行时有意义的并且可读的值，独立于枚举成员的名字。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">enum</span><span class="w"> </span><span class="nx">Types</span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nx">Red</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nx">Green</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;green&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nx">BLue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;blue&#39;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="_15">异构枚举<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<blockquote>
<p>枚举可以混合字符串和数字成员</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">enum</span><span class="w"> </span><span class="nx">Types</span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nx">No</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;No&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nx">Yes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Types</span><span class="p">.</span><span class="nx">NO</span><span class="p">,</span><span class="nx">Types</span><span class="p">.</span><span class="nx">Yes</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h3 id="_16">接口枚举<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<blockquote>
<p>定义一个枚举 Types 定义一个接口 A 他有一个属性 red 值为 Types.yyds</p>
<p>声明对象的时候要遵循这个规则</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="nx">Color</span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="nx">no</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;NO&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="nx">yes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">red</span><span class="o">:</span><span class="kt">Color.yes</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">B</span><span class="o">:</span><span class="kt">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">red</span><span class="o">:</span><span class="kt">Color.yes</span><span class="w"></span>
<span class="w">    </span><span class="c1">//或者直接red:1，只能填入这两个内容其中之一，其他的会报错</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="const">const枚举<a class="headerlink" href="#const" title="Permanent link">&para;</a></h3>
<blockquote>
<p>let 和 var 都是不允许的声明只能使用 const</p>
<p>大多数情况下，枚举是十分有效的方案。 然而在某些情况下需求很严格。 为了避免在额外生成的代码上的开销和额外的非直接的对枚举成员的访问，我们可以使用 <code>const</code> 枚举。 常量枚举通过在枚举上使用 <code>const</code> 修饰符来定义</p>
<p>const 声明的枚举会被编译成常量</p>
<p>普通声明的枚举编译完后是个对象</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="nx">Types</span><span class="p">{</span><span class="c1">//有没有const决定是编译成对象还是编译成常量</span><span class="w"></span>
<span class="w">    </span><span class="nx">sucess</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">fail</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">code</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="w"></span>
<span class="k">if</span><span class="p">(</span><span class="nx">code</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">sucess</span><span class="p">){</span><span class="c1">//是能执行的</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;我在人民广场吃炸鸡&quot;</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="_17">反向映射<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<blockquote>
<p>它包含了正向映射（ <code>name</code> -&gt; <code>value</code>）和反向映射（ <code>value</code> -&gt; <code>name</code>）</p>
<p>要注意的是 <em>不会</em>为字符串枚举成员生成反向映射。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">enum</span><span class="w"> </span><span class="nx">Types</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">one</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">success</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Types</span><span class="p">.</span><span class="nx">success</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">success</span><span class="p">)</span><span class="c1">//读取得出来为0</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">enum</span><span class="w"> </span><span class="nx">Types</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">success</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">success</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Types</span><span class="p">.</span><span class="nx">success</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Types</span><span class="p">[</span><span class="nx">success</span><span class="p">]</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`value---</span><span class="si">${</span><span class="nx">success</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="sb">`key----</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span><span class="c1">//value---0,key----success</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-11">类型推论|类型别名(TS -- 11)<a class="headerlink" href="#ts-11" title="Permanent link">&para;</a></h1>
<h2 id="_18">类型推论<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>
<blockquote>
<p>我声明了一个变量但是没有定义类型</p>
<p><code>TypeScript</code>会在没有明确的指定类型的时候推测出一个类型，这就是类型推论</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;小满&quot;</span><span class="w"></span>
<span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">123</span><span class="c1">//会报错，虽然我们没用明确限制类型，但是TS编辑器会自动推论为string类型。就不能够在赋值给别的类型</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>如果你声明变量没有定义类型也没有赋值这时候 TS 会推断成 any 类型可以进行任何操作</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">str</span><span class="c1">//为any类型</span><span class="w"></span>
<span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">123</span><span class="w"></span>
<span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;马杀鸡&quot;</span><span class="w"></span>
<span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
</code></pre></div>
<h5 id="_19">联合类型<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h5>
<blockquote>
<p>指定多种类型，在前文有提到</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="o">|</span><span class="kt">number</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">str</span><span class="o">:</span><span class="kt">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;永恒的紫罗兰花园&quot;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">num</span><span class="o">:</span><span class="kt">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">520</span><span class="c1">//这有这两种类型可以</span><span class="w"></span>
</code></pre></div>
<h3 id="_20">函数式的类型别名<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<blockquote>
<p>type 关键字（可以给一个类型定义一个名字）<strong>多用于符合类型</strong>，但也可以要求有固定的东西</p>
</blockquote>
<h4 id="_21">定义类型别名<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">s</span><span class="o">:</span><span class="kt">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;我是小满&quot;</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<h4 id="_22">定义函数别名<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">s</span><span class="o">:</span><span class="w"> </span><span class="kt">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;我是小满&quot;</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<h4 id="_23">定义联合类型别名<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">number</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">s</span><span class="o">:</span><span class="w"> </span><span class="kt">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">123</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">s2</span><span class="o">:</span><span class="w"> </span><span class="kt">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;123&#39;</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">s2</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<h4 id="_24">定义值的别名<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;213&#39;</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">s</span><span class="o">:</span><span class="kt">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
<span class="c1">//变量s的值  只能是上面value定义的值</span><span class="w"></span>
</code></pre></div>
<h1 id="neverts-12">never类型(TS -- 12)<a class="headerlink" href="#neverts-12" title="Permanent link">&para;</a></h1>
<blockquote>
<p>TypeScript将使用 never 类型来表示不应该存在的状态</p>
<p><em>返回never的函数必须存在无法达到的终点</em></p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">error</span><span class="p">(</span><span class="nx">message</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="nx">never</span><span class="w"> </span><span class="p">{</span><span class="c1">//因为必定抛出异常，所以 error 将不会有返回值</span><span class="w"></span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">loop</span><span class="p">()</span><span class="o">:</span><span class="nx">never</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="kc">true</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="c1">//因为这个是死循环，永远不会去返回的</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="s2">&quot;保安&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">B</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="s2">&quot;草莓&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">C</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="s2">&quot;卷心菜&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">All</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">A</span><span class="o">|</span><span class="nx">B</span><span class="w"></span>
<span class="kd">function</span><span class="w"> </span><span class="kr">type</span><span class="p">(</span><span class="nx">val</span><span class="o">:</span><span class="kt">All</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="nx">val</span><span class="p">.</span><span class="kr">type</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;保安&quot;</span><span class="o">:</span><span class="k">break</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;草莓&quot;</span><span class="o">:</span><span class="k">break</span><span class="w"></span>
<span class="w">        </span><span class="c1">//case &quot;卷心菜&quot;:break</span><span class="w"></span>
<span class="w">        </span><span class="k">default</span><span class="o">:</span><span class="c1">//兜底机制，此时C没有用上就会报错提示。这就算never的作用</span><span class="w"></span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">check</span><span class="o">:</span><span class="kt">never</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">val</span><span class="w"></span>
<span class="w">        </span><span class="k">break</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h1 id="symbol">Symbol类型<a class="headerlink" href="#symbol" title="Permanent link">&para;</a></h1>
<blockquote>
<p><code>symbol</code> 是一种新的原生类型，就像 <code>number</code> 和 <code>string</code> 一样</p>
<p>symbol<code>类型的值是通过</code>Symbol构造函数创建的</p>
<p>可以传递参做为唯一标识 只支持 string 和 number 类型的参数</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">s</span><span class="o">:</span><span class="kt">symbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Symbol</span><span class="p">(</span><span class="s1">&#39;小满&#39;</span><span class="p">)</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">num</span><span class="o">:</span><span class="kt">symbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Symbol</span><span class="p">(</span><span class="s1">&#39;小满&#39;</span><span class="p">)</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">num</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;value&quot;</span><span class="c1">//Symbol</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">s</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;草莓&quot;</span><span class="c1">//Symbol</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小满&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nx">sex</span><span class="o">:</span><span class="s2">&quot;男&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.[</span><span class="nx">num</span><span class="p">])</span><span class="c1">//取到value</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">num</span><span class="p">)</span><span class="c1">//返回Symbol(小满)Symbol(小满)</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">num</span><span class="p">)</span><span class="c1">//false</span><span class="w"></span>
<span class="c1">//这个值看似一样，其实因为内存地址指针位置不同，所以是唯一值</span><span class="w"></span>

<span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">boj</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="c1">//只会打印出name跟sex，[num]与[s]将打印不出来</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">obj</span><span class="p">))</span><span class="c1">//[&quot;name&quot;,&quot;sex&quot;]</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">obj</span><span class="p">))</span><span class="c1">//[&quot;name&quot;,&quot;sex&quot;]，跟上面一样，打印不出来</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span><span class="c1">//[&quot;name&quot;:&quot;小满&quot;,&quot;sex&quot;:&quot;男&quot;]，一样打印不出来</span><span class="w"></span>
</code></pre></div>
<h2 id="symbol_1">能够读取到Symbol的两种方式<a class="headerlink" href="#symbol_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>静态方法 <strong><code>Reflect.ownKeys()</code></strong> 返回一个由目标对象自身的属性键组成的数组(Array)。</p>
<p>语法：Reflect.ownKeys(target)   =&gt;  <code>target</code>获取自身属性键的目标对象。</p>
<p><code>Reflect.ownKeys</code> 方法返回一个由目标对象自身的属性键组成的数组。它的返回值等同于 <code>Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))</code>。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertySymbol</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span><span class="c1">//能打印出来两个Symbol，另外两个普通的不会打印出来</span><span class="w"></span>

<span class="nb">Reflect</span><span class="p">.</span><span class="nx">ownKeys</span><span class="p">()</span><span class="c1">//此属性是将所有的属性都列出来</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Reflect</span><span class="p">.</span><span class="nx">ownKeys</span><span class="p">())</span><span class="c1">//四个全部圆满的打印出来</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-13">迭代器|生成器(TS -- 13)<a class="headerlink" href="#ts-13" title="Permanent link">&para;</a></h1>
<blockquote>
<p>迭代器:Symbol.iterator </p>
<p>迭代器（Iterator）是⼀种对象，它能够⽤来遍历标准模板库容器中的部分或全部元素，每个迭代器对象代表容器中的确定的地址
通俗点说，迭代器表现的像指针，读取集合或者数组中的⼀个值，读完以后⼜指向下⼀条数据，⼀个个数过去。</p>
<p>生成器: for of</p>
</blockquote>
<h2 id="_25">迭代器<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h2>
<blockquote>
<h2 id="interator"><code>迭代器</code>Interator 的用法<a class="headerlink" href="#interator" title="Permanent link">&para;</a></h2>
<p>1.<code>Interator</code>是 es6 引入的一种新的遍历机制。两个核心：</p>
<p>(1) 迭代器是一个统一的接口，它的作用是使各种<code>数据结构</code>可被便捷的访问，它是通过一个键为 Symbol.iterator 的方法来实现。
(2) 迭代器是用于<code>遍历</code>数据结构元素的指针（如数据库中的游标）。</p>
<p>使用迭代</p>
<ol>
<li>
<p>使用<code>Symbol.interator</code> 创建一个迭代器</p>
</li>
<li>
<p>调用 next 方法向下迭代，next 方法会返回当前的位置</p>
</li>
<li>
<p>当 done 为 true 时则遍历结束</p>
</li>
</ol>
<p>注意点：</p>
<ol>
<li>在迭代器迭代元素的过程中，不允许使⽤集合对象改变集合中的元素个数，如果需要添加或者删除只能使⽤迭代器的⽅法操作。</li>
<li>如果使⽤了集合对象改变集合中的元素个数那么就会报错：不改变个数即可，替换也可以的。</li>
<li>
<p>迭代器的⽣存周期为创建到使⽤结束的时段。</p>
</li>
<li>
<p>foreach : Iterator 的封装变形，变得⽐ Iterator更简单。但是他也需要知道数组或集合的类型。并且，Iterator 需要注意的，foreach
同样需要注意。</p>
</li>
</ol>
</blockquote>
<ul>
<li>存在interator迭代器的有 =&gt; </li>
<li>数组[]里能够找到 Symbol(Symbol.interator)</li>
<li>argument内找到 Symbol(Symbol.interator)</li>
<li>NodeList内找到Symbol(Symbol.interator)</li>
<li>new set()内的Prototype下一层Symbol(Symbol.interator)</li>
<li>new Map同理，一样有Symbol(Symbol.interator)</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">arr</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">5</span><span class="p">,</span><span class="mf">6</span><span class="p">]</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">it</span><span class="o">:</span><span class="kt">Intertor</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">interator</span><span class="p">]()</span><span class="c1">//注意这里的接收类型&lt;number&gt;是固定要写的</span><span class="w"></span>

<span class="c1">//next一次只遍历一个数，下一次调用将从上一次遍历到的位置开始下一个</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">());</span><span class="w">  </span><span class="c1">//{ value: 1, done: false }</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">());</span><span class="w">  </span><span class="c1">//{ value: 5, done: false }</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">());</span><span class="w">  </span><span class="c1">//{ value: 6, done: false }</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">());</span><span class="w">  </span><span class="c1">//{ value: undefined, done: true }</span><span class="w"></span>
<span class="c1">//返回的有两个属性，一个value，一个done。value当读取到值的时候，done为false、读取不到为true</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">mapKeys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="o">|</span><span class="kt">number</span><span class="c1">//相当于起别名，在下方使用的时候集合了string与number就会相对方便不少</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">set</span><span class="o">:</span><span class="kt">Set</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Set</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">])</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">map</span><span class="o">:</span><span class="kt">Map</span><span class="o">&lt;</span><span class="nx">mapKeys</span><span class="p">,</span><span class="nx">mapKeys</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">()</span><span class="c1">//这里断言两个mapKeys，一个对应key，一个对应value</span><span class="w"></span>
<span class="nx">map</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;小满&#39;</span><span class="p">)</span><span class="w"></span>
<span class="nx">map</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;看看腿&#39;</span><span class="p">)</span><span class="w"></span>

<span class="c1">//小迭代器的实现</span><span class="w"></span>
<span class="kd">function</span><span class="w"> </span><span class="nx">gen</span><span class="p">(</span><span class="nx">erg</span><span class="o">:</span><span class="kt">any</span><span class="p">){</span><span class="c1">//这里定义为any类型是因为上面要传到这里的有多种不同类型</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">it</span><span class="o">:</span><span class="kt">interator</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">erg</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">interator</span><span class="p">]()</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">next</span><span class="o">:</span><span class="kt">any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">done</span><span class="o">:</span><span class="kt">false</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="nx">next</span><span class="p">.</span><span class="nx">done</span><span class="p">){</span><span class="c1">//判断next，由于next默认为fasle，while循环只有true会通过，所以需要取反</span><span class="w"></span>
<span class="w">        </span><span class="nx">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">it</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span><span class="c1">//刚开始是声明next给个默认值，等到开始循环的时候再把真正的值赋给他</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">next</span><span class="p">.</span><span class="nx">done</span><span class="p">){</span><span class="w"></span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">next</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">gen</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span><span class="c1">//调用第一个代码块的arr，输出了与console.log(iterator.next());一样的内容</span><span class="w"></span>
<span class="c1">//对象是不支持迭代器的使用的，其实我们在控制台输出一个对象，查找他内置的属性，也是找不到Symbol.interator的</span><span class="w"></span>
</code></pre></div>
<h3 id="symbol_2">Symbol列表<a class="headerlink" href="#symbol_2" title="Permanent link">&para;</a></h3>
<p><strong>Symbol.hasInstance</strong>
方法，会被 instanceof 运算符调用。构造器对象用来识别一个对象是否是其实例。</p>
<p><strong>Symbol.isConcatSpreadable</strong>
布尔值，表示当在一个对象上调用 Array.prototype.concat 时，这个对象的数组元素是否可展开。</p>
<p><strong>Symbol.iterator</strong>
方法，被 for-of 语句调用。返回对象的默认迭代器。</p>
<p><strong>Symbol.match</strong>
方法，被 String.prototype.match 调用。正则表达式用来匹配<a href="https://so.csdn.net/so/search?q=字符串&amp;spm=1001.2101.3001.7020">字符串</a>。</p>
<p><strong>Symbol.replace</strong>
方法，被 String.prototype.replace 调用。正则表达式用来替换字符串中匹配的子串。</p>
<p><strong>Symbol.search</strong>
方法，被 String.prototype.search 调用。正则表达式返回被匹配部分在字符串中的索引。</p>
<p><strong>Symbol.species</strong>
函数值，为一个构造函数。用来创建派生对象。</p>
<p><strong>Symbol.split</strong>
方法，被 String.prototype.split 调用。正则表达式来用分割字符串。</p>
<p><strong>Symbol.toPrimitive</strong>
方法，被 ToPrimitive 抽象操作调用。把对象转换为相应的原始值。</p>
<p><strong>Symbol.toStringTag</strong>
方法，被内置方法 Object.prototype.toString 调用。返回创建对象时默认的字符串描述。</p>
<p><strong>Symbol.unscopables</strong>
对象，它自己拥有的属性会被 with 作用域排除在外。</p>
<hr />
<h2 id="builder">生成器（Builder）<a class="headerlink" href="#builder" title="Permanent link">&para;</a></h2>
<blockquote>
<p>又称建造者模式，该模式是一种创建型设计模式，能够分步骤创建复杂对象。该模式允许使用相同的创建代码生成不同类型和形式的对象。</p>
<p>具体内容请跳转链接查看：<a href="https://zhuanlan.zhihu.com/p/551870461">设计模式-生成器</a></p>
<h3 id="forof">for…of 语句<a class="headerlink" href="#forof" title="Permanent link">&para;</a></h3>
<p>for…of 会遍历可迭代的对象，调用对象上的 <code>Symbol.iterator</code>方法。(此对象非彼对象，这个对象是指你即将下手的目标)</p>
<p>对象也是不支持的，因为对象没用<code>Symbol.iterator</code>方法。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">mapKeys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="o">|</span><span class="kt">number</span><span class="c1">//相当于起别名，在下方使用的时候集合了string与number就会相对方便不少</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">set</span><span class="o">:</span><span class="kt">Set</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Set</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">])</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">map</span><span class="o">:</span><span class="kt">Map</span><span class="o">&lt;</span><span class="nx">mapKeys</span><span class="p">,</span><span class="nx">mapKeys</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">()</span><span class="c1">//这里断言两个mapKeys，一个对应key，一个对应value</span><span class="w"></span>
<span class="nx">map</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;小满&#39;</span><span class="p">)</span><span class="w"></span>
<span class="nx">map</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;看看腿&#39;</span><span class="p">)</span><span class="w"></span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">set</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="c1">//打印出1 2 3</span><span class="w"></span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">arr</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="c1">//打印出4 5 6</span><span class="w"></span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">map</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="c1">//打印出[&#39;1&#39;,&#39;小满&#39;]    [&#39;2&#39;,&#39;看看腿&#39;]</span><span class="w"></span>
<span class="c1">//其实这就是一个语法糖，将of后面的内容遍历存储到of前面的变量中</span><span class="w"></span>
</code></pre></div>
<h3 id="for-in">跟for in 的区别<a class="headerlink" href="#for-in" title="Permanent link">&para;</a></h3>
<blockquote>
<p>for in循环出来的是索引而不是内容，这个应该是最本质的区别了</p>
<p>因为for of会调用底层interator里面那个list的.value</p>
</blockquote>
<h1 id="generic-ts-14">泛型(generic) =&gt; (TS -- 14上)<a class="headerlink" href="#generic-ts-14" title="Permanent link">&para;</a></h1>
<blockquote>
<p>泛型简单来说就是类型变量，在 ts 中存在类型，如 number、string、boolean等。泛型就是使用一个类型变量来表示一种类型，类型值通常是在使用的时候才会设置。泛型的使用场景非常多，可以在函数、类、interface 接口中使用</p>
<p>TypeScript中不建议使用 any 类型，不能保证类型安全，调试时缺乏完整的信息。</p>
<p>TypeScript 可以使用泛型来创建可重用的组件。支持当前数据类型，同时也能支持未来的数据类型。扩展灵活，可以在编译时发现类型错误，从而保证了类型安全。</p>
</blockquote>
<h2 id="_26">无泛型用法<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1">//数字类型</span><span class="w"></span>
<span class="kd">function</span><span class="w"> </span><span class="nx">num</span><span class="p">(</span><span class="nx">A</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="nx">B</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="nb">Array</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="p">{</span><span class="c1">//Array&lt;number&gt;为希望返回number类型的数组</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">num</span><span class="p">(</span><span class="mf">6</span><span class="p">,</span><span class="mf">9</span><span class="p">)</span><span class="w"></span>
<span class="c1">//字符串类型</span><span class="w"></span>
<span class="kd">function</span><span class="w"> </span><span class="nx">str</span><span class="p">(</span><span class="nx">A</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">B</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="nb">Array</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">{</span><span class="c1">//Array&lt;number&gt;为希望返回number类型的数组</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">str</span><span class="p">(</span><span class="s1">&#39;小满&#39;</span><span class="p">,</span><span class="s1">&#39;穿女装&#39;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>一个笨的方法就像上面那样，也就是说 JS 提供多少种类型，就需要复制多少份代码，然后改下类型签名。这对程序员来说是致命的。这种复制粘贴增加了出错的概率，使得代码难以维护，牵一发而动全身。并且将来 JS 新增新的类型，你仍然需要修改代码，也就是说你的代码<strong>对修改开放</strong>，这样不好。</p>
<p>如果你使用 any 的话，怎么写都是 ok 的， 这就丧失了类型检查的效果。实际上我知道我传给你的是 string，返回来的也一定是 string，而 string 上没有 toFixed 方法，因此需要报错才是我想要的。也就是说我真正想要的效果是：<code>当我用到id的时候，你根据我传给你的类型进行推导</code>。比如我传入的是 string，但是使用了 number 上的方法，你就应该报错。</p>
</blockquote>
<h2 id="_27">使用泛型优化<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h2>
<blockquote>
<p>为了解决上面的这些问题，我们<strong>使用泛型对上面的代码进行重构</strong>。和我们的定义不同，这里用了一个 类型 T，这个 <strong>T 是一个抽象类型，只有在调用的时候才确定它的值</strong>，这就不用我们复制粘贴无数份代码了。</p>
<p>其中 <code>T</code> 代表 <strong>Type</strong>，在定义泛型时通常用作第一个类型变量名称。但实际上 <code>T</code> 可以用任何有效名称代替。除了 <code>T</code> 之外，以下是常见泛型变量代表的意思：</p>
<ul>
<li>K（Key）：表示对象中的键类型；</li>
<li>V（Value）：表示对象中的值类型；</li>
<li>E（Element）：表示元素类型。</li>
</ul>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">add</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">T</span><span class="p">,</span><span class="nx">b</span><span class="o">:</span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="nb">Array</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">{</span><span class="c1">//通常定义的时候类型是不明确的，所以一般使用T来定义</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">add</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">)</span><span class="c1">//1对应a，2对应b、返回的都是number类型</span><span class="w"></span>
<span class="nx">add</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">)</span><span class="c1">//这个时候，我们只需要改动这个string，传递到上面的时候就会自动推断为string类型了</span><span class="w"></span>

<span class="c1">//甚至我们可以简写</span><span class="w"></span>
<span class="nx">add</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">)</span><span class="w"></span>
<span class="nx">add</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">)</span><span class="c1">//编辑器会自动推断类型，但最好还是写一下，如果你知道你具体需要的是什么的话</span><span class="w"></span>

<span class="c1">//对泛型进行总结就是：定义前不明确类型，使用的时候再明确类型，能够给我们保留有足够的自由度，又不会像any丧失类型检查的效果</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>我们也可以使用不同的泛型参数名，只要在数量上和使用方式上能对应上就可以。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Sub</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="nx">U</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">T</span><span class="p">,</span><span class="nx">b</span><span class="o">:</span><span class="kt">U</span><span class="p">)</span><span class="o">:</span><span class="nb">Array</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">|</span><span class="nx">U</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="c1">//这个T跟U随便起名字都行，没有强制规范</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">params</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">|</span><span class="nx">U</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">params</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="nx">Sub</span><span class="o">&lt;</span><span class="nb">Boolean</span><span class="p">,</span><span class="kt">number</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span><span class="mf">1</span><span class="p">)</span><span class="c1">//我们这里就将其定义为布尔值类型跟数字类型</span><span class="w"></span>
</code></pre></div>
<h3 id="_28">定义泛型接口<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<blockquote>
<p>声明接口的时候 在名字后面加一个 &lt;参数&gt;</p>
<p>使用的时候传递类型</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">MyInter</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="p">(</span><span class="nx">arg</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">fn</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">arg</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nx">arg</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="o">:</span><span class="w"> </span><span class="kt">MyInter</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fn</span><span class="w"></span>

<span class="nx">result</span><span class="p">(</span><span class="mf">123</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h3 id="_29">对象字面量泛型<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">foo</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">arg</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="nx">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">arg</span><span class="o">:</span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="nx">T</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nx">arg</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">foo</span><span class="p">(</span><span class="mf">123</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h2 id="_30">泛型约束(函数类)<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h2>
<blockquote>
<p>我们期望在一个泛型的变量上面，获取其 <code>length</code> 参数，但是，有的数据类型是没有 <code>length</code> 属性的</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">getLegnth</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">arg</span><span class="o">:</span><span class="kt">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">arg</span><span class="p">.</span><span class="nx">length</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ul>
<li>这个时候，我们就可以对其进行约束</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">Len</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">length</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">getLegnth</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Len</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">arg</span><span class="o">:</span><span class="kt">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="c1">//使用接口让泛型T继承了Len</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">arg</span><span class="p">.</span><span class="nx">length</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">getLength</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="c1">//这个时候我们这样使用就会提示我们类型&quot;number&quot;的参数不能赋给&quot;Len&quot;的参数</span><span class="w"></span>
<span class="c1">//我们依次对数组、字符串、布尔值都进行尝试，分别为可以、可以、不可以</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-14">泛型约束|泛型类(TS -- 14下)<a class="headerlink" href="#ts-14" title="Permanent link">&para;</a></h1>
<h2 id="keyof">使用 keyof 约束对象<a class="headerlink" href="#keyof" title="Permanent link">&para;</a></h2>
<blockquote>
<p>其中使用了 TS 泛型和泛型约束。首先定义了 T 类型并使用 extends 关键字继承 object 类型的子类型，然后使用 keyof 操作符获取 T 类型的所有键，它的返回 类型是联合 类型，最后利用 extends 关键字约束 K 类型必须为 keyof T 联合类型的子类型</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">prop</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">obj</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">,</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="kt">K</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="nx">prop</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="w"> </span>
<span class="nx">prop</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;d&#39;</span><span class="p">)</span><span class="w"> </span><span class="c1">//，我们需要约束一下这个o里面并没有的东西，此时就会报错发现找不到</span><span class="w"></span>
<span class="c1">//通过提示，我门可以看到类型&quot;d&quot;的参数不能赋给类型&quot;a&quot;|&quot;b&quot;|&quot;c&quot;的参数</span><span class="w"></span>
</code></pre></div>
<h2 id="_31">泛型类<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h2>
<blockquote>
<p>声明方法跟函数类似名称后面定义 &lt;类型&gt;</p>
<p>使用的时候确定类型 new Sub<number>()</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//定义泛型的一个类</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Sub</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">attr</span><span class="o">:</span><span class="kt">T</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="c1">//这里的:只是普通的：</span><span class="w"></span>
<span class="w">    </span><span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="nx">T</span><span class="p">[]{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Sub</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="p">()</span><span class="c1">//这里已经使用泛型固定为number了</span><span class="w"></span>
<span class="nx">s</span><span class="p">.</span><span class="nx">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">123</span><span class="p">]</span><span class="c1">//正常运行</span><span class="w"></span>
<span class="nx">s</span><span class="p">.</span><span class="nx">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;123&#39;</span><span class="p">]</span><span class="c1">//报错</span><span class="w"></span>
<span class="nx">s</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="mf">123</span><span class="p">)</span><span class="c1">//也是只能传数字</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Sub</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">()</span><span class="c1">//这里已经使用泛型固定为number了</span><span class="w"></span>
<span class="nx">str</span><span class="p">.</span><span class="nx">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">123</span><span class="p">]</span><span class="c1">//报错</span><span class="w"></span>
<span class="nx">str</span><span class="p">.</span><span class="nx">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;123&#39;</span><span class="p">]</span><span class="c1">//正常运行</span><span class="w"></span>
<span class="nx">str</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span><span class="c1">//也是只能传字符串</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">str</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h2 id="_32">泛型工具类型(大量补充额外内容)<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h2>
<blockquote>
<p>作者使用了Typora作为写笔记的编辑器，这里可以对目录进行折叠方面我们查阅我们想要的部分</p>
</blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/925/image-20221008104110335.png" alt="image-20221008104110335" style="zoom:45%;" /></p>
<p>为了方便开发者 TypeScript 内置了一些常用的工具类型，比如 Partial、Required、Readonly、Record 和 ReturnType 等。不过在具体介绍之前，我们得先介绍一些相关的基础知识，方便读者可以更好的学习其它的工具类型。</p>
<h3 id="1typeof">1.typeof<a class="headerlink" href="#1typeof" title="Permanent link">&para;</a></h3>
<p>typeof 的主要用途是在类型上下文中获取变量或者属性的类型，下面我们通过一个具体示例来理解一下。</p>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">sem</span><span class="o">:</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;semlinker&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="mf">30</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">Sem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">sem</span><span class="p">;</span><span class="w"> </span><span class="c1">// type Sem = Person</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>在上面代码中，我们通过 <code>typeof</code> 操作符获取 sem 变量的类型并赋值给 Sem 类型变量，之后我们就可以使用 Sem 类型：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">lolo</span><span class="o">:</span><span class="w"> </span><span class="nx">Sem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;lolo&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>你也可以对嵌套对象执行相同的操作：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">Message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;jimmy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="mf">18</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">address</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nx">province</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;四川&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nx">city</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;成都&#39;</span><span class="w">   </span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">Message</span><span class="p">;</span><span class="w"></span>
<span class="cm">/*</span>
<span class="cm"> type message = {</span>
<span class="cm">    name: string;</span>
<span class="cm">    age: number;</span>
<span class="cm">    address: {</span>
<span class="cm">        province: string;</span>
<span class="cm">        city: string;</span>
<span class="cm">    };</span>
<span class="cm">}</span>
<span class="cm">*/</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>此外，<code>typeof</code> 操作符除了可以获取对象的结构类型之外，它也可以用来获取函数对象的类型，比如：</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">toArray</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Array</span><span class="o">&lt;</span><span class="nx">number</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nx">x</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">Func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">toArray</span><span class="p">;</span><span class="w"> </span><span class="c1">// -&gt; (x: number) =&gt; number[]</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="2keyof">2.keyof<a class="headerlink" href="#2keyof" title="Permanent link">&para;</a></h3>
<p><code>keyof</code> 操作符是在 TypeScript 2.1 版本引入的，该操作符可以用于获取某种类型的所有键，其返回类型是联合类型。</p>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">type</span><span class="w"> </span><span class="nx">K1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">Person</span><span class="p">;</span><span class="w"> </span><span class="c1">// &quot;name&quot; | &quot;age&quot;</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">K2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">Person</span><span class="p">[];</span><span class="w"> </span><span class="c1">// &quot;length&quot; | &quot;toString&quot; | &quot;pop&quot; | &quot;push&quot; | &quot;concat&quot; | &quot;join&quot; </span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">K3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">};</span><span class="w">  </span><span class="c1">// string | number</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>在 TypeScript 中支持两种索引签名，数字索引和字符串索引：</p>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">StringArray</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 字符串索引 -&gt; keyof StringArray =&gt; string | number</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"> </span>
<span class="p">}</span><span class="w"></span>

<span class="kr">interface</span><span class="w"> </span><span class="nx">StringArray1</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 数字索引 -&gt; keyof StringArray1 =&gt; number</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>为了同时支持两种索引类型，就得要求数字索引的返回值必须是字符串索引返回值的子类。<strong>其中的原因就是当使用数值索引时，JavaScript 在执行索引操作时，会先把数值索引先转换为字符串索引</strong>。所以 <code>keyof { [x: string]: Person }</code> 的结果会返回 <code>string | number</code>。</p>
<p>keyof 也支持基本数据类型：</p>
<div class="highlight"><pre><span></span><code><span class="k">let</span><span class="w"> </span><span class="n">K1</span><span class="p">:</span><span class="w"> </span><span class="n">keyof</span><span class="w"> </span><span class="kt">boolean</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">let</span><span class="w"> </span><span class="n">K1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;valueOf&quot;</span><span class="w"></span>
<span class="k">let</span><span class="w"> </span><span class="n">K2</span><span class="p">:</span><span class="w"> </span><span class="n">keyof</span><span class="w"> </span><span class="n">number</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">let</span><span class="w"> </span><span class="n">K2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;toString&quot;</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="s">&quot;toFixed&quot;</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="s">&quot;toExponential&quot;</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="p">...</span><span class="w"></span>
<span class="k">let</span><span class="w"> </span><span class="n">K3</span><span class="p">:</span><span class="w"> </span><span class="n">keyof</span><span class="w"> </span><span class="n">symbol</span><span class="err">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">let</span><span class="w"> </span><span class="n">K1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;valueOf&quot;</span><span class="w"></span>
<span class="err">复制代码</span><span class="w"></span>
</code></pre></div>
<h4 id="keyof_1">keyof 的作用<a class="headerlink" href="#keyof_1" title="Permanent link">&para;</a></h4>
<p>JavaScript 是一种高度动态的语言。有时在静态类型系统中捕获某些操作的语义可能会很棘手。以一个简单的 <code>prop</code> 函数为例：</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">prop</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="w"> </span><span class="nx">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>该函数接收 obj 和 key 两个参数，并返回对应属性的值。对象上的不同属性，可以具有完全不同的类型，我们甚至不知道 obj 对象长什么样。</p>
<p>那么在 TypeScript 中如何定义上面的 <code>prop</code> 函数呢？我们来尝试一下：</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">prop</span><span class="p">(</span><span class="nx">obj</span><span class="o">:</span><span class="w"> </span><span class="nx">object</span><span class="p">,</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>在上面代码中，为了避免调用 prop 函数时传入错误的参数类型，我们为 obj 和 key 参数设置了类型，分别为 <code>{}</code> 和 <code>string</code> 类型。然而，事情并没有那么简单。针对上述的代码，TypeScript 编译器会输出以下错误信息：</p>
<div class="highlight"><pre><span></span><code><span class="nx">Element</span><span class="w"> </span><span class="nx">implicitly</span><span class="w"> </span><span class="nx">has</span><span class="w"> </span><span class="nx">an</span><span class="w"> </span><span class="s1">&#39;any&#39;</span><span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="nx">because</span><span class="w"> </span><span class="nx">expression</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="w"> </span><span class="nx">can</span><span class="s1">&#39;t be used to index type &#39;</span><span class="p">{}</span><span class="err">&#39;</span><span class="p">.</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>元素隐式地拥有 <code>any</code> 类型，因为 <code>string</code> 类型不能被用于索引 <code>{}</code> 类型。要解决这个问题，你可以使用以下非常暴力的方案：</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">prop</span><span class="p">(</span><span class="nx">obj</span><span class="o">:</span><span class="w"> </span><span class="nx">object</span><span class="p">,</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">obj</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">any</span><span class="p">)[</span><span class="nx">key</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>很明显该方案并不是一个好的方案，我们来回顾一下 <code>prop</code> 函数的作用，该函数用于获取某个对象中指定属性的属性值。因此我们期望用户输入的属性是对象上已存在的属性，那么如何限制属性名的范围呢？这时我们可以利用本文的主角 <code>keyof</code> 操作符：</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">prop</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">object</span><span class="p">,</span><span class="w"> </span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">obj</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="nx">K</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>在以上代码中，我们使用了 TypeScript 的泛型和泛型约束。<strong>首先定义了 T 类型并使用 <code>extends</code> 关键字约束该类型必须是 object 类型的子类型，然后使用 <code>keyof</code> 操作符获取 T 类型的所有键，其返回类型是联合类型，最后利用 <code>extends</code> 关键字约束 K 类型必须为 <code>keyof T</code> 联合类型的子类型。</strong> 是骡子是马拉出来遛遛就知道了，我们来实际测试一下：</p>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Todo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">done</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">todo</span><span class="o">:</span><span class="w"> </span><span class="nx">Todo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Learn TypeScript keyof&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">done</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">prop</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">object</span><span class="p">,</span><span class="w"> </span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">obj</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="nx">K</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prop</span><span class="p">(</span><span class="nx">todo</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;id&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// const id: number</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prop</span><span class="p">(</span><span class="nx">todo</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// const text: string</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prop</span><span class="p">(</span><span class="nx">todo</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;done&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// const done: boolean</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>很明显使用泛型，重新定义后的 <code>prop&lt;T extends object, K extends keyof T&gt;(obj: T, key: K)</code> 函数，已经可以正确地推导出指定键对应的类型。那么当访问 todo 对象上不存在的属性时，会出现什么情况？比如：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prop</span><span class="p">(</span><span class="nx">todo</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;date&quot;</span><span class="p">);</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>对于上述代码，TypeScript 编译器会提示以下错误：</p>
<div class="highlight"><pre><span></span><code><span class="nx">Argument</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="s1">&#39;&quot;date&quot;&#39;</span><span class="w"> </span><span class="nx">is</span><span class="w"> </span><span class="nx">not</span><span class="w"> </span><span class="nx">assignable</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">parameter</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="s1">&#39;&quot;id&quot; | &quot;text&quot; | &quot;done&quot;&#39;</span><span class="p">.</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>这就阻止我们尝试读取不存在的属性。</p>
<h3 id="3in">3.in<a class="headerlink" href="#3in" title="Permanent link">&para;</a></h3>
<p><code>in</code> 用来遍历枚举类型：</p>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="w"></span>

<span class="nx">type</span><span class="w"> </span><span class="nx">Obj</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nx">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">Keys</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="c1">// -&gt; { a: any, b: any, c: any }</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="4infer">4.infer<a class="headerlink" href="#4infer" title="Permanent link">&para;</a></h3>
<p>在条件类型语句中，可以用 <code>infer</code> 声明一个类型变量并且对它进行使用。</p>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">ReturnType</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="nx">args</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">[]</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">infer</span><span class="w"> </span><span class="nx">R</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">R</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">;</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>以上代码中 <code>infer R</code> 就是声明一个变量来承载传入函数签名的返回值类型，简单说就是用它取到函数返回值的类型方便之后使用。</p>
<h3 id="5extends">5.extends<a class="headerlink" href="#5extends" title="Permanent link">&para;</a></h3>
<p>有时候我们定义的泛型不想过于灵活或者说想继承某些类等，可以通过 extends 关键字添加泛型约束。</p>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">Lengthwise</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">length</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">loggingIdentity</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Lengthwise</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">arg</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arg</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">arg</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>现在这个泛型函数被定义了约束，因此它不再是适用于任意类型：</p>
<div class="highlight"><pre><span></span><code><span class="nx">loggingIdentity</span><span class="p">(</span><span class="mf">3</span><span class="p">);</span><span class="w">  </span><span class="c1">// Error, number doesn&#39;t have a .length property</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>这时我们需要传入符合约束类型的值，必须包含 length 属性：</p>
<div class="highlight"><pre><span></span><code><span class="nx">loggingIdentity</span><span class="p">({</span><span class="nx">length</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">});</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="_33">索引类型<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h3>
<p>在实际开发中，我们经常能遇到这样的场景，在对象中获取一些属性的值，然后建立对应的集合。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;musion&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="mf">35</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">getValues</span><span class="p">(</span><span class="nx">person</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">,</span><span class="w"> </span><span class="nx">keys</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">keys</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">person</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getValues</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;age&#39;</span><span class="p">]))</span><span class="w"> </span><span class="c1">// [&#39;musion&#39;, 35]</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getValues</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]))</span><span class="w"> </span><span class="c1">// [undefined]</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>在上述例子中，可以看到 getValues (persion, ['gender']) 打印出来的是 [undefined]，但是 ts 编译器并没有给出报错信息，那么如何使用 ts 对这种模式进行类型约束呢？这里就要用到了索引类型，改造一下 getValues 函数，通过 <strong>索引类型查询</strong>和 <strong>索引访问</strong> 操作符：</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">getValues</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">person</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">keys</span><span class="o">:</span><span class="w"> </span><span class="nx">K</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">][]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">keys</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">person</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">interface</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">person</span><span class="o">:</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;musion&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="mf">35</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">getValues</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span><span class="w"> </span><span class="c1">// [&#39;musion&#39;]</span><span class="w"></span>
<span class="nx">getValues</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">])</span><span class="w"> </span><span class="c1">// 报错：</span><span class="w"></span>
<span class="c1">// Argument of Type &#39;&quot;gender&quot;[]&#39; is not assignable to parameter of type &#39;(&quot;name&quot; | &quot;age&quot;)[]&#39;.</span><span class="w"></span>
<span class="c1">// Type &quot;gender&quot; is not assignable to type &quot;name&quot; | &quot;age&quot;.</span><span class="w"></span>

<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>编译器会检查传入的值是否是 Person 的一部分。通过下面的概念来理解上面的代码：</p>
<div class="highlight"><pre><span></span><code><span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span><span class="nx">表示对象T的属性K所表示的类型</span><span class="err">，</span><span class="nx">在上述例子中</span><span class="err">，</span><span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">][]</span><span class="w"> </span><span class="nx">表示变量T取属性K的值的数组</span><span class="w"></span>

<span class="c1">// 通过[]索引类型访问操作符, 我们就能得到某个索引的类型</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="nx">number</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="nx">MyType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Person</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span><span class="w">  </span><span class="c1">//Person中name的类型为string type MyType = string</span><span class="w"></span>

<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>介绍完概念之后，应该就可以理解上面的代码了。首先看泛型，这里有 T 和 K 两种类型，根据类型推断，第一个参数 person 就是 person，类型会被推断为 Person。而第二个数组参数的类型推断（K extends keyof T），keyof 关键字可以获取 T，也就是 Person 的所有属性名，即 ['name', 'age']。而 extends 关键字让泛型 K 继承了 Person 的所有属性名，即 ['name', 'age']。这三个特性组合保证了代码的动态性和准确性，也让代码提示变得更加丰富了</p>
<div class="highlight"><pre><span></span><code><span class="nx">getValues</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">])</span><span class="w"> </span><span class="c1">// 报错：</span><span class="w"></span>
<span class="c1">// Argument of Type &#39;&quot;gender&quot;[]&#39; is not assignable to parameter of type &#39;(&quot;name&quot; | &quot;age&quot;)[]&#39;.</span><span class="w"></span>
<span class="c1">// Type &quot;gender&quot; is not assignable to type &quot;name&quot; | &quot;age&quot;.</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="_34">映射类型<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h3>
<blockquote>
<p>根据旧的类型创建出新的类型，我们称之为映射类型</p>
</blockquote>
<p>比如我们定义一个接口</p>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">TestInterface</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="nx">number</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>我们把上面定义的接口里面的属性全部变成可选</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 我们可以通过+/-来指定添加还是删除</span><span class="w"></span>

<span class="nx">type</span><span class="w"> </span><span class="nx">OptionalTestInterface</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nx">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="o">+?:</span><span class="nx">T</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">type</span><span class="w"> </span><span class="nx">newTestInterface</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">OptionalTestInterface</span><span class="o">&lt;</span><span class="nx">TestInterface</span><span class="o">&gt;</span><span class="w"></span>
<span class="c1">// type newTestInterface = {</span><span class="w"></span>
<span class="c1">//    name?:string,</span><span class="w"></span>
<span class="c1">//    age?:number</span><span class="w"></span>
<span class="c1">// }</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>比如我们再加上只读</p>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">OptionalTestInterface</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="o">+</span><span class="nx">readonly</span><span class="w"> </span><span class="p">[</span><span class="nx">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="o">+?:</span><span class="nx">T</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">type</span><span class="w"> </span><span class="nx">newTestInterface</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">OptionalTestInterface</span><span class="o">&lt;</span><span class="nx">TestInterface</span><span class="o">&gt;</span><span class="w"></span>
<span class="c1">// type newTestInterface = {</span><span class="w"></span>
<span class="c1">//   readonly name?:string,</span><span class="w"></span>
<span class="c1">//   readonly age?:number</span><span class="w"></span>
<span class="c1">// }</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>由于生成只读属性和可选属性比较常用，所以 TS 内部已经给我们提供了现成的实现 Readonly / Partial, 会面内置的工具类型会介绍.</p>
<p><strong>内置的工具类型</strong></p>
<h3 id="partial">Partial<a class="headerlink" href="#partial" title="Permanent link">&para;</a></h3>
<blockquote>
<p><code>Partial&lt;T&gt;</code> 将类型的属性变成可选</p>
</blockquote>
<h4 id="_35">定义<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Partial</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="o">?:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">P</span><span class="p">];</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>在以上代码中，首先通过 <code>keyof T</code> 拿到 <code>T</code> 的所有属性名，然后使用 <code>in</code> 进行遍历，将值赋给 <code>P</code>，最后通过 <code>T[P]</code> 取得相应的属性值的类。中间的 <code>?</code> 号，用于将所有属性变为可选。</p>
<h4 id="_36">举例说明<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">UserInfo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">// error：Property &#39;id&#39; is missing in type &#39;{ name: string; }&#39; but required in type &#39;UserInfo&#39;</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xiaoming</span><span class="o">:</span><span class="w"> </span><span class="nx">UserInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;xiaoming&#39;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>使用  <code>Partial&lt;T&gt;</code></p>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">NewUserInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Partial</span><span class="o">&lt;</span><span class="nx">UserInfo</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xiaoming</span><span class="o">:</span><span class="w"> </span><span class="nx">NewUserInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;xiaoming&#39;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>这个  NewUserInfo 就相当于</p>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">NewUserInfo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">id</span><span class="o">?:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">?:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>但是 <code>Partial&lt;T&gt;</code> 有个局限性，就是只支持处理第一层的属性，如果我的接口定义是这样的</p>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">UserInfo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">fruits</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">appleNumber</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="nx">orangeNumber</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">type</span><span class="w"> </span><span class="nx">NewUserInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Partial</span><span class="o">&lt;</span><span class="nx">UserInfo</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Property &#39;appleNumber&#39; is missing in type &#39;{ orangeNumber: number; }&#39; but required in type &#39;{ appleNumber: number; orangeNumber: number; }&#39;.</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xiaoming</span><span class="o">:</span><span class="w"> </span><span class="nx">NewUserInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;xiaoming&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">fruits</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">orangeNumber</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>可以看到，第二层以后就不会处理了，如果要处理多层，就可以自己实现</p>
<h4 id="deeppartial">DeepPartial<a class="headerlink" href="#deeppartial" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">DeepPartial</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="c1">// 如果是 object，则递归类型</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">U</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="o">?:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">U</span><span class="p">]</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">object</span><span class="w"></span>
<span class="w">      </span><span class="o">?</span><span class="w"> </span><span class="nx">DeepPartial</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">[</span><span class="nx">U</span><span class="p">]</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">U</span><span class="p">]</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="nx">type</span><span class="w"> </span><span class="nx">PartialedWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DeepPartial</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// 现在T上所有属性都变成了可选啦</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="required">Required<a class="headerlink" href="#required" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Required 将类型的属性变成必选</p>
</blockquote>
<h4 id="_37">定义<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Required</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="o">-?:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">P</span><span class="p">]</span><span class="w"> </span>
<span class="p">};</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>其中 <code>-?</code> 是代表移除 <code>?</code> 这个 modifier 的标识。再拓展一下，除了可以应用于 <code>?</code> 这个 modifiers ，还有应用在 <code>readonly</code> ，比如 <code>Readonly&lt;T&gt;</code> 这个类型</p>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Readonly</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">readonly</span><span class="w"> </span><span class="p">[</span><span class="nx">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">p</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="readonly">Readonly<a class="headerlink" href="#readonly" title="Permanent link">&para;</a></h3>
<blockquote>
<p><code>Readonly&lt;T&gt;</code> 的作用是将某个类型所有属性变为只读属性，也就意味着这些属性不能被重新赋值。</p>
</blockquote>
<h4 id="_38">定义<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Readonly</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="nx">readonly</span><span class="w"> </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">P</span><span class="p">];</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h4 id="_39">举例说明<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">Todo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">todo</span><span class="o">:</span><span class="w"> </span><span class="nx">Readonly</span><span class="o">&lt;</span><span class="nx">Todo</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Delete inactive users&quot;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="nx">todo</span><span class="p">.</span><span class="nx">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hello&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Error: cannot reassign a readonly property</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="pick">Pick<a class="headerlink" href="#pick" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Pick 从某个类型中挑出一些属性出来</p>
</blockquote>
<h4 id="_40">定义<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Pick</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">K</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">P</span><span class="p">];</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h4 id="_41">举例说明<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">Todo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">type</span><span class="w"> </span><span class="nx">TodoPreview</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Pick</span><span class="o">&lt;</span><span class="nx">Todo</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;title&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;completed&quot;</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">todo</span><span class="o">:</span><span class="w"> </span><span class="nx">TodoPreview</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Clean room&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>可以看到 NewUserInfo 中就只有个 name 的属性了。</p>
<h3 id="record">Record<a class="headerlink" href="#record" title="Permanent link">&para;</a></h3>
<blockquote>
<p><code>Record&lt;K extends keyof any, T&gt;</code> 的作用是将 <code>K</code> 中所有的属性的值转化为 <code>T</code> 类型。</p>
</blockquote>
<h4 id="_42">定义<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Record</span><span class="o">&lt;</span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">any</span><span class="p">,</span><span class="w"> </span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">K</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h4 id="_43">举例说明<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">PageInfo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">type</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;home&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;about&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;contact&quot;</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="nx">Record</span><span class="o">&lt;</span><span class="nx">Page</span><span class="p">,</span><span class="w"> </span><span class="nx">PageInfo</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">about</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;about&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nx">contact</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;contact&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nx">home</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;home&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="returntype">ReturnType<a class="headerlink" href="#returntype" title="Permanent link">&para;</a></h3>
<blockquote>
<p>用来得到一个函数的返回值类型</p>
</blockquote>
<h4 id="_44">定义<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">ReturnType</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">(...</span><span class="nx">args</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">[])</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="nx">args</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">[]</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">infer</span><span class="w"> </span><span class="nx">R</span><span class="w"></span>
<span class="w">  </span><span class="o">?</span><span class="w"> </span><span class="nx">R</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">;</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p><code>infer</code> 在这里用于提取函数类型的返回值类型。<code>ReturnType&lt;T&gt;</code> 只是将 infer R 从参数位置移动到返回值位置，因此此时 R 即是表示待推断的返回值类型。</p>
<h4 id="_45">举例说明<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">foo</span><span class="o">:</span><span class="w"> </span><span class="nx">ReturnType</span><span class="o">&lt;</span><span class="nx">Func</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">;</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p><code>ReturnType</code> 获取到 <code>Func</code> 的返回值类型为 <code>string</code>，所以，<code>foo</code> 也就只能被赋值为字符串了。</p>
<h3 id="exclude">Exclude<a class="headerlink" href="#exclude" title="Permanent link">&para;</a></h3>
<blockquote>
<p><code>Exclude&lt;T, U&gt;</code> 的作用是将某个类型中属于另一个的类型移除掉。</p>
</blockquote>
<h4 id="_46">定义<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Exclude</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">U</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">U</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">never</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">;</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<p>如果 <code>T</code> 能赋值给 <code>U</code> 类型的话，那么就会返回 <code>never</code> 类型，否则返回 <code>T</code> 类型。最终实现的效果就是将 <code>T</code> 中某些属于 <code>U</code> 的类型移除掉。</p>
<h4 id="_47">举例说明<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">T0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Exclude</span><span class="o">&lt;</span><span class="s2">&quot;a&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// &quot;b&quot; | &quot;c&quot;</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">T1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Exclude</span><span class="o">&lt;</span><span class="s2">&quot;a&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// &quot;c&quot;</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">T2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Exclude</span><span class="o">&lt;</span><span class="nx">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">),</span><span class="w"> </span><span class="nb">Function</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// string | number</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="extract">Extract<a class="headerlink" href="#extract" title="Permanent link">&para;</a></h3>
<blockquote>
<p><code>Extract&lt;T, U&gt;</code> 的作用是从 <code>T</code> 中提取出 <code>U</code>。</p>
</blockquote>
<h4 id="_48">定义<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Extract</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">U</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">U</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">never</span><span class="p">;</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h4 id="_49">举例说明<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">T0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Extract</span><span class="o">&lt;</span><span class="s2">&quot;a&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;f&quot;</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// &quot;a&quot;</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">T1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Extract</span><span class="o">&lt;</span><span class="nx">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">),</span><span class="w"> </span><span class="nb">Function</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// () =&gt;void</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="omit">Omit<a class="headerlink" href="#omit" title="Permanent link">&para;</a></h3>
<blockquote>
<p><code>Omit&lt;T, K extends keyof any&gt;</code> 的作用是使用 <code>T</code> 类型中除了 <code>K</code> 类型的所有属性，来构造一个新的类型。</p>
</blockquote>
<h4 id="_50">定义<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Omit</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Pick</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">Exclude</span><span class="o">&lt;</span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">K</span><span class="o">&gt;&gt;</span><span class="p">;</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h4 id="_51">举例说明<a class="headerlink" href="#_51" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kr">interface</span><span class="w"> </span><span class="nx">Todo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">type</span><span class="w"> </span><span class="nx">TodoPreview</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Omit</span><span class="o">&lt;</span><span class="nx">Todo</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;description&quot;</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">todo</span><span class="o">:</span><span class="w"> </span><span class="nx">TodoPreview</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Clean room&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="nonnullable">NonNullable<a class="headerlink" href="#nonnullable" title="Permanent link">&para;</a></h3>
<blockquote>
<p><code>NonNullable&lt;T&gt;</code> 的作用是用来过滤类型中的 <code>null</code> 及 <code>undefined</code> 类型。</p>
</blockquote>
<h4 id="_52">定义<a class="headerlink" href="#_52" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">NonNullable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="nx">extendsnull</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">never</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">;</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h4 id="_53">举例说明<a class="headerlink" href="#_53" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">T0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">NonNullable</span><span class="o">&lt;</span><span class="nx">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// string | number</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">T1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">NonNullable</span><span class="o">&lt;</span><span class="nx">string</span><span class="p">[]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// string[]</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h3>
<blockquote>
<p><code>Parameters&lt;T&gt;</code> 的作用是用于获得函数的参数类型组成的元组类型。</p>
</blockquote>
<h4 id="_54">定义<a class="headerlink" href="#_54" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">Parameters</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">(...</span><span class="nx">args</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">(...</span><span class="nx">args</span><span class="o">:</span><span class="w"> </span><span class="nx">infer</span><span class="w"> </span><span class="nx">P</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">any</span><span class="w"></span>
<span class="o">?</span><span class="w"> </span><span class="nx">P</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">never</span><span class="p">;</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h4 id="_55">举例说明<a class="headerlink" href="#_55" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">type</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Parameters</span><span class="o">&lt;</span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// []</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Parameters</span><span class="o">&lt;</span><span class="nx">typeofArray</span><span class="p">.</span><span class="nx">isArray</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// [any]</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Parameters</span><span class="o">&lt;</span><span class="nx">typeofparseInt</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// [string, (number | undefined)?]</span><span class="w"></span>
<span class="nx">type</span><span class="w"> </span><span class="nx">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Parameters</span><span class="o">&lt;</span><span class="nx">typeofMath</span><span class="p">.</span><span class="nx">max</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// number[]</span><span class="w"></span>
<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h1 id="tsconfigjsonts-15">tsconfig.json配置文件(TS -- 15)<a class="headerlink" href="#tsconfigjsonts-15" title="Permanent link">&para;</a></h1>
<h2 id="tsconfigjson">生成 tsconfig.json 文件<a class="headerlink" href="#tsconfigjson" title="Permanent link">&para;</a></h2>
<blockquote>
<p>这个文件是通过 <code>tsc --init</code> 命令生成的</p>
<p>tsconfig.json 是 TypeScript 项目的配置文件。如果一个目录下存在一个 tsconfig.json 文件，那么往往意味着这个目录就是 TypeScript 项目的根目录。</p>
<p>tsconfig.json 包含 TypeScript 编译的相关配置，通过更改编译配置项，我们可以让 TypeScript 编译出 ES6、ES5、node 的代码。</p>
</blockquote>
<h3 id="_56">配置详解<a class="headerlink" href="#_56" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;compilerOptions&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;incremental&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// TS编译器在第一次编译之后会生成一个存储编译信息的文件，第二次编译会在第一次的基础上进行增量编译，可以提高编译的速度</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;tsBuildInfoFile&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./buildFile&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 增量编译文件的存储位置</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;diagnostics&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 打印诊断信息 </span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;target&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ES5&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 目标语言的版本</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;module&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;CommonJS&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 生成代码的模板标准</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;outFile&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./app.js&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 将多个相互依赖的文件生成一个文件，可以用在AMD模块中，即开启时应设置&quot;module&quot;: &quot;AMD&quot;,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;lib&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;DOM&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ES2015&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ScriptHost&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ES2019.Array&quot;</span><span class="p">],</span><span class="w"> </span><span class="c1">// TS需要引用的库，即声明文件，es5 默认引用dom、es5、scripthost,如需要使用es的高级版本特性，通常都需要配置，如es8的数组新特性需要引入&quot;ES2019.Array&quot;,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;allowJS&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 允许编译器编译JS，JSX文件</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;checkJs&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 允许在JS文件中报错，通常与allowJS一起使用</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;outDir&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./dist&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 指定输出目录</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;rootDir&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 指定输出文件目录(用于输出)，用于控制输出目录结构</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;declaration&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 生成声明文件，开启后会自动生成声明文件</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;declarationDir&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./file&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 指定生成声明文件存放目录</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;emitDeclarationOnly&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 只生成声明文件，而不会生成js文件</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;sourceMap&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 生成目标文件的sourceMap文件</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;inlineSourceMap&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 生成目标文件的inline SourceMap，inline SourceMap会包含在生成的js文件中</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;declarationMap&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 为声明文件生成sourceMap</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;typeRoots&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="c1">// 声明文件目录，默认时node_modules/@types</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;types&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="c1">// 加载的声明文件包</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;removeComments&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 删除注释 </span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;noEmit&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 不输出文件,即编译后不会生成任何js文件</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;noEmitOnError&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 发送错误时不输出任何文件</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;noEmitHelpers&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 不生成helper函数，减小体积，需要额外安装，常配合importHelpers一起使用</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;importHelpers&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 通过tslib引入helper函数，文件必须是模块</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;downlevelIteration&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 降级遍历器实现，如果目标源是es3/5，那么遍历器会有降级的实现</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;strict&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 开启所有严格的类型检查</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;alwaysStrict&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 在代码中注入&#39;use strict&#39;</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;noImplicitAny&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 不允许隐式的any类型</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;strictNullChecks&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 不允许把null、undefined赋值给其他类型的变量</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;strictFunctionTypes&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 不允许函数参数双向协变</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;strictPropertyInitialization&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 类的实例属性必须初始化</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;strictBindCallApply&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 严格的bind/call/apply检查</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;noImplicitThis&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 不允许this有隐式的any类型</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;noUnusedLocals&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 检查只声明、未使用的局部变量(只提示不报错)</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;noUnusedParameters&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 检查未使用的函数参数(只提示不报错)</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;noFallthroughCasesInSwitch&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 防止switch语句贯穿(即如果没有break语句后面不会执行)</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;noImplicitReturns&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">//每个分支都会有返回值</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;esModuleInterop&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 允许export=导出，由import from 导入</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;allowUmdGlobalAccess&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 允许在模块中全局变量的方式访问umd模块</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;moduleResolution&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;node&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 模块解析策略，ts默认用node的解析策略，即相对的方式导入</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;baseUrl&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 解析非相对模块的基地址，默认是当前目录</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;paths&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 路径映射，相对于baseUrl</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 如使用jq时不想使用默认版本，而需要手动指定版本，可进行如下配置</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;jquery&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;node_modules/jquery/dist/jquery.min.js&quot;</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;rootDirs&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">,</span><span class="s2">&quot;out&quot;</span><span class="p">],</span><span class="w"> </span><span class="c1">// 将多个目录放在一个虚拟目录下，用于运行时，即编译后引入文件的位置可能发生变化，这也设置可以虚拟src和out在同一个目录下，不用再去改变路径也不会报错</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;listEmittedFiles&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 打印输出文件</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;listFiles&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="c1">// 打印编译的文件(包括引用的声明文件)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// 指定一个匹配列表（属于自动指定该路径下的所有ts相关文件）</span><span class="w"></span>
<span class="s2">&quot;include&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">   </span><span class="s2">&quot;src/**/*&quot;</span><span class="w"></span>
<span class="p">],</span><span class="w"></span>
<span class="c1">// 指定一个排除列表（include的反向操作）</span><span class="w"></span>
<span class="w"> </span><span class="s2">&quot;exclude&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">   </span><span class="s2">&quot;demo.ts&quot;</span><span class="w"></span>
<span class="p">],</span><span class="w"></span>
<span class="c1">// 指定哪些文件使用该配置（属于手动一个个指定文件）</span><span class="w"></span>
<span class="w"> </span><span class="s2">&quot;files&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">   </span><span class="s2">&quot;demo.ts&quot;</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>上面的配置详解有点繁杂，我们或许可以将其分类一下</p>
</blockquote>
<h4 id="compileroptions">配置分类(compilerOptions 选项)<a class="headerlink" href="#compileroptions" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;compilerOptions&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* 基本选项 */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;target&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;es5&quot;</span><span class="p">,</span><span class="w">                       </span><span class="c1">// 指定 ECMAScript 目标版本: &#39;ES3&#39; (default), &#39;ES5&#39;, &#39;ES6&#39;/&#39;ES2015&#39;, &#39;ES2016&#39;, &#39;ES2017&#39;, or &#39;ESNEXT&#39;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;module&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;commonjs&quot;</span><span class="p">,</span><span class="w">                  </span><span class="c1">// 指定使用模块: &#39;commonjs&#39;, &#39;amd&#39;, &#39;system&#39;, &#39;umd&#39; or &#39;es2015&#39;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;lib&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w">                             </span><span class="c1">// 指定要包含在编译中的库文件</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;allowJs&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                       </span><span class="c1">// 允许编译 javascript 文件</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;checkJs&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                       </span><span class="c1">// 报告 javascript 文件中的错误</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;jsx&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;preserve&quot;</span><span class="p">,</span><span class="w">                     </span><span class="c1">// 指定 jsx 代码的生成: &#39;preserve&#39;, &#39;react-native&#39;, or &#39;react&#39;</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;declaration&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                   </span><span class="c1">// 生成相应的 &#39;.d.ts&#39; 文件</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;sourceMap&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                     </span><span class="c1">// 生成相应的 &#39;.map&#39; 文件</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;outFile&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./&quot;</span><span class="p">,</span><span class="w">                       </span><span class="c1">// 将输出文件合并为一个文件</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;outDir&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./&quot;</span><span class="p">,</span><span class="w">                        </span><span class="c1">// 指定输出目录</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;rootDir&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./&quot;</span><span class="p">,</span><span class="w">                       </span><span class="c1">// 用来控制输出目录结构 --outDir.</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;removeComments&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                </span><span class="c1">// 删除编译后的所有的注释</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;noEmit&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                        </span><span class="c1">// 不生成输出文件</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;importHelpers&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                 </span><span class="c1">// 从 tslib 导入辅助工具函数</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;isolatedModules&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">               </span><span class="c1">// 将每个文件做为单独的模块 （与 &#39;ts.transpileModule&#39; 类似）.</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* 严格的类型检查选项 */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;strict&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                        </span><span class="c1">// 启用所有严格类型检查选项</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;noImplicitAny&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                 </span><span class="c1">// 在表达式和声明上有隐含的 any类型时报错</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;strictNullChecks&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">              </span><span class="c1">// 启用严格的 null 检查</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;noImplicitThis&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                </span><span class="c1">// 当 this 表达式值为 any 类型的时候，生成一个错误</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;alwaysStrict&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                  </span><span class="c1">// 以严格模式检查每个模块，并在每个文件里加入 &#39;use strict&#39;</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* 额外的检查 */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;noUnusedLocals&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                </span><span class="c1">// 有未使用的变量时，抛出错误</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;noUnusedParameters&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">            </span><span class="c1">// 有未使用的参数时，抛出错误</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;noImplicitReturns&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">             </span><span class="c1">// 并不是所有函数里的代码都有返回值时，抛出错误</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;noFallthroughCasesInSwitch&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">    </span><span class="c1">// 报告 switch 语句的 fallthrough 错误。（即，不允许 switch 的 case 语句贯穿）</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* 模块解析选项 */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;moduleResolution&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;node&quot;</span><span class="p">,</span><span class="w">            </span><span class="c1">// 选择模块解析策略： &#39;node&#39; (Node.js) or &#39;classic&#39; (TypeScript pre-1.6)</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;baseUrl&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./&quot;</span><span class="p">,</span><span class="w">                       </span><span class="c1">// 用于解析非相对模块名称的基目录</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;paths&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span><span class="w">                           </span><span class="c1">// 模块名到基于 baseUrl 的路径映射的列表</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;rootDirs&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w">                        </span><span class="c1">// 根文件夹列表，其组合内容表示项目运行时的结构内容</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;typeRoots&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w">                       </span><span class="c1">// 包含类型声明的文件列表</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;types&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w">                           </span><span class="c1">// 需要包含的类型声明文件名列表</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;allowSyntheticDefaultImports&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">  </span><span class="c1">// 允许从没有设置默认导出的模块中默认导入。</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Source Map Options */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;sourceRoot&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./&quot;</span><span class="p">,</span><span class="w">                    </span><span class="c1">// 指定调试器应该找到 TypeScript 文件而不是源文件的位置</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;mapRoot&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./&quot;</span><span class="p">,</span><span class="w">                       </span><span class="c1">// 指定调试器应该找到映射文件而不是生成文件的位置</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;inlineSourceMap&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">               </span><span class="c1">// 生成单个 soucemaps 文件，而不是将 sourcemaps 生成不同的文件</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;inlineSources&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                 </span><span class="c1">// 将代码与 sourcemaps 生成到一个文件中，要求同时设置了 --inlineSourceMap 或 --sourceMap 属性</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* 其他选项 */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;experimentalDecorators&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">        </span><span class="c1">// 启用装饰器</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;emitDecoratorMetadata&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w">          </span><span class="c1">// 为装饰器提供元数据的支持</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">复制代码</span><span class="w"></span>
</code></pre></div>
<h3 id="_57">常用的配置<a class="headerlink" href="#_57" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>终端命令</p>
</li>
<li>
<p>echo ''&gt;index.ts(创建一个空的名叫index.ts的文件)</p>
</li>
<li>
<p>tsc -init(创建一个tsconfig.json)</p>
</li>
<li>
<p>del index.js(删除名叫index.js文件)</p>
</li>
<li>
<p>mkdir dist(创建一个名叫dist的文件夹)</p>
</li>
<li>
<p>tsc(运行)</p>
</li>
</ul>
<blockquote>
<h1 id="1include">1.include<a class="headerlink" href="#1include" title="Permanent link">&para;</a></h1>
<p>指定编译文件默认是编译当前目录下所有的 ts 文件</p>
</blockquote>
<ul>
<li>这个是在中括号中填入路径，路径指向的那个ts文件会被编译出一个js文件出来。这个我们就可以用来编译指定文件</li>
</ul>
<blockquote>
<h1 id="2exclude">2.exclude<a class="headerlink" href="#2exclude" title="Permanent link">&para;</a></h1>
<p>指定排除的文件</p>
</blockquote>
<ul>
<li>跟<code>include</code>反过来了，除了写入的路径之外，其他全部编译</li>
</ul>
<blockquote>
<h1 id="3target">3.target<a class="headerlink" href="#3target" title="Permanent link">&para;</a></h1>
<p>指定编译 js 的版本例如 es5 es6</p>
</blockquote>
<ul>
<li>有些低配置的浏览器是不兼容es6的，这个时候我们就可以将其编译成es5使其适配</li>
</ul>
<blockquote>
<h1 id="4allowjs">4.allowJS<a class="headerlink" href="#4allowjs" title="Permanent link">&para;</a></h1>
<p>是否允许编译 js 文件</p>
</blockquote>
<ul>
<li>是否允许TypeScript帮你编译js文件，默认是不允许的</li>
</ul>
<blockquote>
<h1 id="5removecomments">5.removeComments<a class="headerlink" href="#5removecomments" title="Permanent link">&para;</a></h1>
<p>是否在编译过程中删除文件中的注释</p>
<h1 id="6rootdir">6.rootDir<a class="headerlink" href="#6rootdir" title="Permanent link">&para;</a></h1>
<p>编译文件的目录</p>
<h1 id="7outdir">7.outDir<a class="headerlink" href="#7outdir" title="Permanent link">&para;</a></h1>
<p>输出的目录</p>
</blockquote>
<ul>
<li>改变输出的目录，也就是编译后输出到这里设置的文件夹目录中</li>
</ul>
<blockquote>
<h1 id="8sourcemap">8.sourceMap<a class="headerlink" href="#8sourcemap" title="Permanent link">&para;</a></h1>
<p>代码源文件</p>
</blockquote>
<ul>
<li>这个文件会打包压缩成一行，sourceMap会记录行数，到时候会比较好找</li>
</ul>
<blockquote>
<h1 id="9strict">9.strict<a class="headerlink" href="#9strict" title="Permanent link">&para;</a></h1>
<p>严格模式</p>
</blockquote>
<h4 id="_58">严格模式的限制<a class="headerlink" href="#_58" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>严格模式主要有以下限制：</p>
</li>
<li>
<p>变量必须声明后再使用</p>
</li>
<li>函数的参数不能有同名属性，否则报错</li>
<li>不能使用 with 语句</li>
<li>不能对只读属性赋值，否则报错</li>
<li>不能使用前缀 0 表示八进制数，否则报错</li>
<li>不能删除不可删除的属性，否则报错</li>
<li>不能删除变量 delete prop，会报错，只能删除属性 delete global [prop]</li>
<li>eval 不会在它的外层作用域引入变量</li>
<li>eval 和 arguments 不能被重新赋值</li>
<li>arguments 不会自动反映函数参数的变化</li>
<li>不能使用 arguments.callee</li>
<li>不能使用 arguments.caller</li>
<li>禁止 this 指向全局对象</li>
<li>不能使用 fn.caller 和 fn.arguments 获取函数调用的堆栈</li>
<li>增加了保留字（比如 protected、static 和 interface）</li>
</ul>
<p>要注意 this 的限制。ES6 模块之中，顶层的 this 指向 undefined，即不应该在顶层代码使用 this。</p>
<blockquote>
<h1 id="10module">10.module<a class="headerlink" href="#10module" title="Permanent link">&para;</a></h1>
<p>默认 common.js 可选 es6 模式 amd umd 等</p>
</blockquote>
<h1 id="namespacets-16">namespace命名空间(TS -- 16)<a class="headerlink" href="#namespacets-16" title="Permanent link">&para;</a></h1>
<p>我们在工作中无法避免<code>全局变量</code>造成的污染，TypeScript 提供了 namespace 避免这个问题出现</p>
<ul>
<li>内部模块，主要用于组织代码，避免命名冲突。</li>
<li>命名空间内的类默认私有</li>
<li>通过 <code>export</code> 暴露</li>
<li>通过 <code>namespace</code> 关键字定义</li>
</ul>
<blockquote>
<p>TypeScript与 ECMAScript 2015 一样，任何包含顶级 <code>import</code> 或者 <code>export</code> 的文件都被当成一个模块。相反地，如果一个文件不带有顶级的 <code>import</code> 或者 <code>export</code> 声明，那么它的内容被视为全局可见的（因此对模块也是可见的）</p>
<p><code>命名空间</code>中通过 <code>export</code> 将想要暴露的部分导出</p>
<p>如果不用 export 导出是无法读取其值的</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nx">namespace</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">Time</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1000</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">arg</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">arg</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">fn</span><span class="p">(</span><span class="nx">Time</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="nx">namespace</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">Time</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1000</span><span class="w"></span>
<span class="w">     </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">arg</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">arg</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">fn</span><span class="p">(</span><span class="nx">Time</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">a</span><span class="p">.</span><span class="nx">Time</span><span class="w"></span>
<span class="nx">b</span><span class="p">.</span><span class="nx">Time</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>案例</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//文件1与文件2位于同一文件夹下</span><span class="w"></span>
<span class="c1">//文件1 =&gt; index.ts</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">aa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">23</span><span class="w"></span>
<span class="c1">//文件3 =&gt; index2.ts</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">aa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">66</span><span class="c1">//此时就会报错，因为我们在文件1已经声明过aa了</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">//文件1 =&gt; index.ts</span><span class="w"></span>
<span class="nx">namespace</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">aa</span><span class="w"> </span><span class="o">=</span><span class="mf">23</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//文件2 =&gt; index.ts</span><span class="w"></span>
<span class="nx">namespace</span><span class="w"> </span><span class="nx">B</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">aa</span><span class="w"> </span><span class="o">=</span><span class="mf">66</span><span class="w"></span>
<span class="p">}</span><span class="c1">//不会报错</span><span class="w"></span>

<span class="c1">//要读取的话怎么做呢？此时在文件1</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">A</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span><span class="c1">//像使用对象一样。实际上也确实包了一层对象</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>实际编译成js文件的样子</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;use strict&quot;</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">A</span><span class="p">;</span><span class="w"></span>
<span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">A</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="nx">A</span><span class="p">.</span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"></span>
<span class="p">})(</span><span class="nx">A</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="nx">A</span><span class="w"> </span><span class="o">=</span><span class="p">{}));</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="w"></span>
<span class="c1">//到此js文件所在目录下使用node index.js运行，输出1</span><span class="w"></span>
</code></pre></div>
<h2 id="_59">嵌套命名空间<a class="headerlink" href="#_59" title="Permanent link">&para;</a></h2>
<blockquote>
<p>就是提取内容的时候需要多.几次。比如下方，原本只需要a.b，现在需要a.b.value</p>
<p>编译成js文件的话，就是在function又套了一层</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nx">namespace</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="nx">namespace</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Vue</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>
<span class="w">            </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parameters</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">Vue</span><span class="w"></span>

<span class="ow">new</span><span class="w"> </span><span class="nx">v</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h2 id="_60">抽离命名空间<a class="headerlink" href="#_60" title="Permanent link">&para;</a></h2>
<blockquote>
<p>将命名空间的内容抽离出来，通过import引入到其他文件中使用</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//在index2.ts文件下</span><span class="w"></span>
<span class="nx">expost</span><span class="w"> </span><span class="nx">namespace</span><span class="w"> </span><span class="nx">B</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//在index.ts文件下</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="nx">xx</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./index2.ts&#39;</span><span class="w"></span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="nx">namespace</span><span class="w"> </span><span class="nx">C</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">A</span><span class="p">.</span><span class="nx">C</span><span class="p">.</span><span class="nx">D</span><span class="p">,</span><span class="nx">B</span><span class="p">)</span><span class="c1">//将B抽离成了文件</span><span class="w"></span>
<span class="c1">//将此文件用dsc进行终端编译，然后在tscondig.json将module修改为CommonJs(node.js不认识defined，node.js是基于CommonJS的)，进去js文件夹、终端运行node index</span><span class="w"></span>
</code></pre></div>
<h2 id="_61">简化命名空间<a class="headerlink" href="#_61" title="Permanent link">&para;</a></h2>
<blockquote>
<p>可以给命名空间路径起个名字，然后直接使用这个名字就可以代替命名空间路径了</p>
<p>这个是不能够在ts-node的环境下去使用的</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//在index2.ts文件下</span><span class="w"></span>
<span class="nx">expost</span><span class="w"> </span><span class="nx">namespace</span><span class="w"> </span><span class="nx">B</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//在index.ts文件下</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="nx">xx</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./index2.ts&#39;</span><span class="w"></span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="nx">namespace</span><span class="w"> </span><span class="nx">C</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">A</span><span class="p">.</span><span class="nx">C</span><span class="p">.</span><span class="nx">D</span><span class="p">,</span><span class="nx">B</span><span class="p">)</span><span class="c1">//将B抽离成了文件</span><span class="w"></span>

<span class="k">import</span><span class="w"> </span><span class="nx">AAA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">C</span><span class="p">.</span><span class="nx">D</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">AAA</span><span class="p">)</span><span class="c1">//起到跟A.C.D一样的作用</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="nx">AAA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">C</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">AAA</span><span class="p">.</span><span class="nx">D</span><span class="p">)</span><span class="c1">//起到跟A.C.D一样的作用</span><span class="w"></span>
</code></pre></div>
<h2 id="_62">命名空间的合并<a class="headerlink" href="#_62" title="Permanent link">&para;</a></h2>
<blockquote>
<p>如果命名空间的命名一样的话(重名)，会自动合并</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//案例1</span><span class="w"></span>
<span class="nx">namespace</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//案例2</span><span class="w"></span>
<span class="nx">namespace</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="c1">//案例1跟案例2是一模一样的，会自动合并</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-17">三斜线指令(TS -- 17)<a class="headerlink" href="#ts-17" title="Permanent link">&para;</a></h1>
<blockquote>
<p>三斜线指令是包含单个<code>XML</code>标签的单行注释。 注释的内容会做为编译器指令使用。</p>
<p>三斜线指令<em>仅</em>可放在包含它的文件的最顶端。 一个三斜线指令的前面只能出现单行或多行注释，这包括其它的三斜线指令。 如果它们出现在一个语句或声明之后，那么它们会被当做普通的单行注释，并且不具有特殊的涵义。</p>
<p><code>/// &lt;reference path="..." /&gt;</code>指令是三斜线指令中最常见的一种。 它用于声明文件间的 <em>依赖</em>。</p>
<p>三斜线引用告诉<code>编译器</code>在编译过程中要引入的额外的文件。也可以认为是另一个import</p>
<p>你也可以把它理解能 <code>import</code>，它可以告诉编译器在编译过程中要引入的额外的文件</p>
<p>相较于抽离命名空间。范围更广，将整个文件都抽离出来了。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//在a.ts</span><span class="w"></span>
<span class="nx">namespace</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//在b.ts</span><span class="w"></span>
<span class="nx">namespace</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">fn2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">//在index.ts</span><span class="w"></span>

<span class="c1">///&lt;reference path=&quot;./index2.ts&quot; /&gt;</span><span class="w"></span>
<span class="c1">///&lt;reference path=&quot;./index3.ts&quot; /&gt; </span><span class="w"></span>
<span class="c1">//引入之后直接可以使用变量 A</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">A</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>这个时候小满将outFile打开了，这个的作用是：将输出文件合并为一个文件，并编译到指定的路径中</p>
<p>这个时候<reference path="./index2.ts" />样式的还在</p>
<p>这个时候，我们再打开removeComments，他的作用是：删除编译后的所有的注释</p>
<p>编译好后，那些样式就不在了</p>
</blockquote>
<h2 id="_63">引入声明文件<a class="headerlink" href="#_63" title="Permanent link">&para;</a></h2>
<blockquote>
<p>例如，把 <code>/// &lt;reference types="node" /&gt;</code> 引入到声明文件，表明这个文件使用了 <code>@types/node/index.d.ts</code> 里面声明的名字； 并且，这个包需要在编译阶段与声明文件一起被包含进来。</p>
<p>仅当在你需要写一个 <code>d.ts</code> 文件时才使用这个指令。</p>
<p>使用的话，需要将声明文件装起来(npm install @types/node -D)</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">///&lt;reference types=&quot;node&quot; /&gt;</span><span class="w"></span>
<span class="c1">//这个node文件他会自己去找</span><span class="w"></span>
</code></pre></div>
<h1 id="dtsts-18">声明文件d.ts(TS -- 18)<a class="headerlink" href="#dtsts-18" title="Permanent link">&para;</a></h1>
<blockquote>
<p>声明文件 declare </p>
<p>当使用<code>第三方库</code>时，我们需要引用它的声明文件，才能获得对应的代码补全、接口提示等功能。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">declare</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nx">声明全局变量</span><span class="w"></span>
<span class="kr">declare</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">声明全局方法</span><span class="w"></span>
<span class="kr">declare</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">声明全局类</span><span class="w"></span>
<span class="kr">declare</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="nx">声明全局枚举类型</span><span class="w"></span>
<span class="kr">declare</span><span class="w"> </span><span class="nx">namespace</span><span class="w"> </span><span class="nx">声明</span><span class="err">（</span><span class="nx">含有子属性的</span><span class="err">）</span><span class="nx">全局对象</span><span class="w"></span>
<span class="kd">interface</span><span class="w"> </span><span class="nx">和</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">声明全局类型</span><span class="w"></span>
<span class="c1">/// &lt;reference /&gt; 三斜线指令</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>先：npm init -y </p>
<p>npm init -y 在文件夹下生成默认的 package.json 文件，使用命令生成的 package.json 文件内容与不使用命令生产的不一样</p>
<p>后：npm install express -S  正式线安装</p>
<p>npm install axios</p>
</blockquote>
<ul>
<li>从node_modules的axios的package.json可以发现types:"index.d.ts"，可以发现声明文件已经被指定了</li>
<li>我们在去看index.d.ts文件可以看到最后通过declare将其导出了</li>
<li>在引入使用的时候，发现express在引入的时候爆红了</li>
<li>同样的在node_nodules可以找到express中的package.json，发现他根本没有types，也就是说没有指定声明文件。所以才会有爆红的这个问题</li>
<li>我们可以在根目录下创建一个express.d.ts文件</li>
<li>在文件中写入<code>declare var express:() =&gt; any</code></li>
<li>这个时候，我们在使用express的时候，就发现可以使用了<code>express()</code>，不会爆红了</li>
<li>另一种方法就是按照提示去装包，然后去tsconfig.json去导出一下<code>"allowSyntheticDefaultImports":true</code>进行补全</li>
</ul>
<p><a href="https://www.npmjs.com/~types?activeTab=packages">npm收录包大全</a></p>
<h1 id="mixinsts-19">Mixins混入(TS -- 19)<a class="headerlink" href="#mixinsts-19" title="Permanent link">&para;</a></h1>
<blockquote>
<p>TypeScript 混入 Mixins 其实 vue 也有 mixins 这个东西 你可以把他看作为合并</p>
</blockquote>
<h2 id="_64">对象混入<a class="headerlink" href="#_64" title="Permanent link">&para;</a></h2>
<blockquote>
<p>可以使用 <code>ES6</code> 的 Object.assign 合并多个对象</p>
<p>此时 people 会被推断成一个交差类型 Name &amp; Age &amp; sex;</p>
<h3 id="objectassign">Object.assign()<a class="headerlink" href="#objectassign" title="Permanent link">&para;</a></h3>
<ul>
<li>Object.assign () 这个方法来实现浅复制</li>
<li>主要的用途是用来合并多个 JavaScript 的对象</li>
<li>Object.assign () 接口可以接收多个参数，第一个参数是目标对象，后面的都是源对象，assign 方法将多个原对象的属性和方法都合并到了目标对象上面，如果在这个过程中出现同名的属性（方法），后合并的属性（方法）会覆盖之前的同名属性（方法）</li>
<li>Object.assign 拷贝的属性是有限制的，只会拷贝对象本身的属性（不会拷贝继承属性），也不会拷贝不可<a href="https://so.csdn.net/so/search?q=枚举&amp;spm=1001.2101.3001.7020">枚举</a>的属性</li>
<li>Object.assign 不会跳过那些值为 [null] 或 [undefined] 的源对象</li>
</ul>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">interface</span><span class="w"> </span><span class="nx">Age</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">interface</span><span class="w"> </span><span class="nx">Sex</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">sex</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">people1</span><span class="o">:</span><span class="w"> </span><span class="kt">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;小满&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">people2</span><span class="o">:</span><span class="w"> </span><span class="kt">Age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">people3</span><span class="o">:</span><span class="w"> </span><span class="kt">Sex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sex</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="c1">//Object.assign(a,b,c)</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">people</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">people1</span><span class="p">,</span><span class="nx">people2</span><span class="p">,</span><span class="nx">people3</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h2 id="_65">类的混入<a class="headerlink" href="#_65" title="Permanent link">&para;</a></h2>
<blockquote>
<p>首先声明两个 mixins 类 （严格模式要关闭不然编译不过）</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//混入类</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="kt">boolean</span><span class="w"></span>
<span class="w">    </span><span class="nx">changeType</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="kr">type</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">B</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="nx">getName</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">//实现类   首先应该注意到的是，没使用 extends 而是使用 implements。 把类当成了接口。我们可以这么做来达到目的，为将要 mixin 进来的属性方法创建出占位属性。 这告诉编译器这些成员在运行时是可用的。 这样就能使用 mixin 带来的便利，虽说需要提前定义一些占位属性</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">C</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">A</span><span class="p">,</span><span class="nx">B</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//这个时候编辑器会给出提示类&quot;C&quot;错误实现&quot;A&quot;。你是想扩展&quot;A&quot;并将其成员作为子继承吗？</span><span class="w"></span>
<span class="w">    </span><span class="c1">//类型&quot;C&quot;缺少类型&quot;A&quot;中的以下属性:type,changeType</span><span class="w"></span>
<span class="w">    </span><span class="c1">//B类同理</span><span class="w"></span>
<span class="w">    </span><span class="c1">//这个时候就需要我们提前定义占位符</span><span class="w"></span>
<span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;小余&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">changeType</span><span class="o">:</span><span class="p">()=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="w"></span>
<span class="w">    </span><span class="nx">getName</span><span class="o">:</span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">mixins</span><span class="p">(</span><span class="nx">C</span><span class="p">,[</span><span class="nx">A</span><span class="p">,</span><span class="nx">B</span><span class="p">])</span><span class="c1">//第一个为目标对象，后面为要混入的对象</span><span class="w"></span>
<span class="c1">//最后，创建这个帮助函数，帮我们做混入操作。 它会遍历 mixins 上的所有属性，并复制到目标上去，把之前的占位属性替换成真正的实现代码</span><span class="w"></span>
<span class="c1">//帮助函数，把我们在实现类中写的去进行一个实现</span><span class="w"></span>
<span class="kd">function</span><span class="w"> </span><span class="nx">mixins</span><span class="w"> </span><span class="p">(</span><span class="nx">curClas</span><span class="o">:</span><span class="kt">any</span><span class="p">,</span><span class="nx">itemCls</span><span class="o">:</span><span class="kt">any</span><span class="p">[]){</span><span class="w"></span>
<span class="w">    </span><span class="nx">itemCls</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">item</span><span class="p">()=&gt;{</span><span class="w"></span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span><span class="c1">//输出[class A][class B]，我们要读取的不是这个，而是他原型上的一些属性</span><span class="w"></span>
<span class="w">        </span><span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="nx">prototype</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">            </span><span class="c1">//Object.getOwnPropertyNames () 可以获取对象自身的属性，除去他继承来的属性，对它所有的属性遍历，它是一个数组，遍历一下它所有的属性名</span><span class="w"></span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span><span class="c1">//打印出来了changeType跟getName</span><span class="w"></span>
<span class="w">            </span><span class="nx">curClas</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">item</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">ccc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">C</span><span class="p">()</span><span class="c1">//实例化一下</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ccc</span><span class="p">.</span><span class="kr">type</span><span class="p">);</span><span class="c1">//false</span><span class="w"></span>
<span class="nx">ccc</span><span class="p">.</span><span class="nx">changeType</span><span class="p">()</span><span class="c1">//这里切换了布尔值</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ccc</span><span class="p">.</span><span class="kr">type</span><span class="p">);</span><span class="c1">//true</span><span class="w"></span>
</code></pre></div>
<h1 id="decoratorts-20">装饰器Decorator(TS -- 20)<a class="headerlink" href="#decoratorts-20" title="Permanent link">&para;</a></h1>
<blockquote>
<p>Decorator <a href="https://so.csdn.net/so/search?q=装饰器&amp;spm=1001.2101.3001.7020">装饰器</a>是一项实验性特性，在未来的版本中可能会发生改变</p>
<p>它们不仅增加了代码的可读性，清晰地表达了意图，而且提供一种方便的手段，增加或修改类的功能</p>
<p>若要启用实验性的装饰器特性，你必须在<code>命令行</code>或 <code>tsconfig.json</code> 里启用<code>编译器</code>选项</p>
<p>启用的名字叫<code>experimentalDecorators</code></p>
</blockquote>
<h2 id="_66">装饰器<a class="headerlink" href="#_66" title="Permanent link">&para;</a></h2>
<blockquote>
<p><em>装饰器</em>是一种特殊类型的声明，它能够被附加到类声明、方法、访问符、属性或者参数上</p>
<p>通过<code>@</code>语法糖实现</p>
<p>使用方法：对于这个的实现我认为就是定义好了之后直接盖在你想对其使用目标的头顶上</p>
</blockquote>
<ul>
<li>以下两个代码块的watcher都是不支持传参的</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">watcher</span><span class="o">:</span><span class="kt">ClassDecorator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">target</span><span class="o">:</span><span class="kt">Function</span><span class="p">)=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">@watcher</span><span class="c1">//通过@去使用，会回传一个构造函数，也就是target</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="c1">//通过ts-node xxx打印出来的结果为[class A]</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>知识点复习：</p>
<p>prototype 对象是实现面向对象的一个重要机制。每个函数也是一个对象，它们对应的类就是 function，每个函数对象都具有一个子对象 prototype。</p>
<p>Prototype 表示了该函数的原型，prototype 表示了一个类的属性的集合。当通过 new 来生成一个类的对象时，prototype 对象的属性就会成为实例化对象的属性。</p>
<p><a href="https://zhuanlan.zhihu.com/p/523215502">Prototype与 prototype的区别</a></p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">watcher</span><span class="o">:</span><span class="kt">ClassDecorator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">target</span><span class="o">:</span><span class="kt">Function</span><span class="p">)=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="nx">target</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="nx">T</span><span class="w"> </span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">@watcher</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">()</span><span class="w"></span>

<span class="nx">a</span><span class="p">.</span><span class="nx">getName</span><span class="p">()</span><span class="c1">//会报类型&quot;A&quot;上不存在属性&quot;getName&quot;</span><span class="w"></span>
<span class="c1">//(&lt;any&gt;a).getName()//我们将其断言成any类型</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">).</span><span class="nx">getName</span><span class="p">(</span><span class="s2">&quot;小满深夜骑单车&quot;</span><span class="p">))</span><span class="c1">//对其进行使用，输出 小满深夜骑单车</span><span class="w"></span>

<span class="kd">@watcher</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">B</span><span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">B</span><span class="p">()</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">getname</span><span class="p">(</span><span class="s1">&#39;666&#39;</span><span class="p">))</span><span class="c1">//也是可以的</span><span class="w"></span>
</code></pre></div>
<h2 id="_67">装饰器工厂<a class="headerlink" href="#_67" title="Permanent link">&para;</a></h2>
<ul>
<li>支持传参的写法</li>
</ul>
<blockquote>
<p>我认为其实就是多了一层壳，这层壳用来接收@watcher的参数。里面return的那一层再用来接收class A这个构造器</p>
<p>其实也就是一个高阶函数 外层的函数接受值 里层的函数最终接受类的构造函数</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">watcher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">=</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="nx">ClassDecorator</span><span class="w"> </span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">target</span><span class="o">:</span><span class="kt">Function</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">        </span><span class="nx">target</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="nx">T</span><span class="w"> </span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nx">target</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">@watcher</span><span class="p">(</span><span class="s2">&quot;小余的笔记&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">()</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">).</span><span class="nx">getNames</span><span class="p">())</span><span class="c1">//返回 小余的笔记</span><span class="w"></span>
</code></pre></div>
<h2 id="_68">装饰器组合<a class="headerlink" href="#_68" title="Permanent link">&para;</a></h2>
<blockquote>
<p>就是可以使用多个装饰器</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">//装饰器组合组合</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">watcher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="nx">ClassDecorator</span><span class="w"> </span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">target</span><span class="o">:</span><span class="kt">Function</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">        </span><span class="nx">target</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()=&gt;{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">log</span><span class="o">:</span><span class="kt">ClassDecorator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">target</span><span class="o">:</span><span class="kt">Function</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="nx">target</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">213</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">@log</span><span class="w"></span>
<span class="kd">@watcher</span><span class="p">(</span><span class="s1">&#39;小满&#39;</span><span class="p">)</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">watcher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">ClassDecorator</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="kt">Function</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">target</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">params</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">params</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nx">target</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">watcher2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">ClassDecorator</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="kt">Function</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">target</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="o">:</span><span class="kt">string</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">@watcher2</span><span class="p">(</span><span class="s1">&#39;name2&#39;</span><span class="p">)</span><span class="w"></span>
<span class="kd">@watcher</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="kd">const</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">();</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nx">a</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">any</span><span class="p">).</span><span class="nx">getOptions</span><span class="p">());</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nx">a</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">any</span><span class="p">).</span><span class="nx">getNames</span><span class="p">());</span><span class="w"></span>
</code></pre></div>
<h2 id="_69">方法装饰器<a class="headerlink" href="#_69" title="Permanent link">&para;</a></h2>
<blockquote>
<p>返回三个参数</p>
<ol>
<li>对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。</li>
<li>成员的名字。</li>
<li>成员的<em>属性描述符</em>。</li>
</ol>
<p>相当于抽离出来，在类中引用进去，这样可以在不同的类中引用</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="w"></span>
<span class="w">  </span><span class="p">{},</span><span class="w"></span>
<span class="w">  </span><span class="s1">&#39;setParasm&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">Function</span><span class="o">:</span><span class="w"> </span><span class="kt">setParasm</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nx">writable</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">enumerable</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">configurable</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">met</span><span class="o">:</span><span class="kt">MethodDecorator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kd">@met</span><span class="w"></span>
<span class="w">    </span><span class="nx">getName</span><span class="w"> </span><span class="p">()</span><span class="o">:</span><span class="kt">string</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;小满&#39;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="kd">const</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<h2 id="_70">属性装饰器<a class="headerlink" href="#_70" title="Permanent link">&para;</a></h2>
<blockquote>
<p>返回两个参数</p>
<ol>
<li>对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。</li>
<li>属性的名字。</li>
</ol>
<p>[ {}, 'name', undefined ]</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">met</span><span class="o">:</span><span class="kt">PropertyDecorator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">@met</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<h2 id="_71">参数装饰器<a class="headerlink" href="#_71" title="Permanent link">&para;</a></h2>
<p>返回三个参数</p>
<ol>
<li>对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。</li>
<li>成员的名字。</li>
<li>参数在函数参数列表中的索引。</li>
</ol>
<p>[ {}, 'setParasm', 0 ]</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">met</span><span class="o">:</span><span class="kt">ParameterDecorator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">setParasm</span><span class="w"> </span><span class="p">(</span><span class="kd">@met</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;213&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="kd">const</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<h1 id="rolluptsts-21">Rollup构建TS项目(TS -- 21)<a class="headerlink" href="#rolluptsts-21" title="Permanent link">&para;</a></h1>
<blockquote>
<p>由于我使用的是vite打包工具，那这个视频是属于过一遍的程度，本章节内容将直接把小满在CSDN的文章copy过来</p>
</blockquote>
<h2 id="rollup-ts">Rollup 构建 TS 项目<a class="headerlink" href="#rollup-ts" title="Permanent link">&para;</a></h2>
<h3 id="_72">安装依赖<a class="headerlink" href="#_72" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>全局安装 rollup <strong>npm install rollup-g</strong></p>
</li>
<li>
<p>安装 TypeScript  npm install typescript -D</p>
</li>
<li>
<p>安装 TypeScript 转换器 npm install rollup-plugin-typescript2 -D</p>
</li>
<li>安装代码压缩插件 npm install rollup-plugin-terser -D</li>
<li>安装 rollupweb 服务 npm install rollup-plugin-serve -D</li>
<li>安装<a href="https://so.csdn.net/so/search?q=热更新&amp;spm=1001.2101.3001.7020">热更新</a> npm install rollup-plugin-livereload -D</li>
<li>引入外部依赖 npm install rollup-plugin-node-resolve -D</li>
<li>安装配置环境变量用来区分本地和生产 npm install cross-env -D</li>
<li>替换环境变量给浏览器使用 npm install rollup-plugin-replace -D</li>
</ol>
<h3 id="json">配置 json 文件<a class="headerlink" href="#json" title="Permanent link">&para;</a></h3>
<p>npm init -y</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;rollupTs&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;version&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;description&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;main&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;index.js&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;scripts&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;test&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;dev&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;cross-env NODE_ENV=development  rollup -c -w&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;build&quot;</span><span class="o">:</span><span class="s2">&quot;cross-env NODE_ENV=produaction  rollup -c&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;keywords&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;author&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;license&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ISC&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;devDependencies&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;cross-env&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;^7.0.3&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;rollup-plugin-livereload&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;^2.0.5&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;rollup-plugin-node-resolve&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;^5.2.0&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;rollup-plugin-replace&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;^2.2.0&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;rollup-plugin-serve&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;^1.1.0&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;rollup-plugin-terser&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;^7.0.2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;rollup-plugin-typescript2&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;^0.31.1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;typescript&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;^4.5.5&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="rollup">配置 rollup 文件<a class="headerlink" href="#rollup" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">);</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="nx">ts</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rollup-plugin-typescript2&#39;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;path&#39;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="nx">serve</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rollup-plugin-serve&#39;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="nx">livereload</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rollup-plugin-livereload&#39;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">terser</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rollup-plugin-terser&#39;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="nx">resolve</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rollup-plugin-node-resolve&#39;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="nx">repacle</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rollup-plugin-replace&#39;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">isDev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;development&#39;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">input</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./src/main.ts&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">output</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">file</span><span class="o">:</span><span class="w"> </span><span class="kt">path.resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;./lib/index.js&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;umd&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">sourcemap</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>

<span class="w">    </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="nx">ts</span><span class="p">(),</span><span class="w"></span>
<span class="w">        </span><span class="nx">terser</span><span class="p">({</span><span class="w"></span>
<span class="w">            </span><span class="nx">compress</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nx">drop_console</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="nx">isDev</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}),</span><span class="w"></span>
<span class="w">        </span><span class="nx">repacle</span><span class="p">({</span><span class="w"></span>
<span class="w">            </span><span class="s1">&#39;process.env.NODE_ENV&#39;</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}),</span><span class="w"></span>
<span class="w">        </span><span class="nx">resolve</span><span class="p">([</span><span class="s1">&#39;.js&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.ts&#39;</span><span class="p">]),</span><span class="w"></span>
<span class="w">        </span><span class="nx">isDev</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">livereload</span><span class="p">(),</span><span class="w"></span>
<span class="w">        </span><span class="nx">isDev</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">serve</span><span class="p">({</span><span class="w"></span>
<span class="w">            </span><span class="nx">open</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nx">openPage</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/public/index.html&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="tsconfigjson_1">配置 tsconfig.json<a class="headerlink" href="#tsconfigjson_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;compilerOptions&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* Visit https://aka.ms/tsconfig.json to read more about this file */</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Projects */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;incremental&quot;: true,                              /* Enable incremental compilation */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;composite&quot;: true,                                /* Enable constraints that allow a TypeScript project to be used with project references. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;tsBuildInfoFile&quot;: &quot;./&quot;,                          /* Specify the folder for .tsbuildinfo incremental compilation files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;disableSourceOfProjectReferenceRedirect&quot;: true,  /* Disable preferring source files instead of declaration files when referencing composite projects */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;disableSolutionSearching&quot;: true,                 /* Opt a project out of multi-project reference checking when editing. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;disableReferencedProjectLoad&quot;: true,             /* Reduce the number of projects loaded automatically by TypeScript. */</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Language and Environment */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;target&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;es5&quot;</span><span class="p">,</span><span class="w">                                  </span><span class="cm">/* Set the JavaScript language version for emitted JavaScript and include compatible library declarations. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;lib&quot;: [],                                        /* Specify a set of bundled library declaration files that describe the target runtime environment. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;jsx&quot;: &quot;preserve&quot;,                                /* Specify what JSX code is generated. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;experimentalDecorators&quot;: true,                   /* Enable experimental support for TC39 stage 2 draft decorators. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;emitDecoratorMetadata&quot;: true,                    /* Emit design-type metadata for decorated declarations in source files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;jsxFactory&quot;: &quot;&quot;,                                 /* Specify the JSX factory function used when targeting React JSX emit, e.g. &#39;React.createElement&#39; or &#39;h&#39; */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;jsxFragmentFactory&quot;: &quot;&quot;,                         /* Specify the JSX Fragment reference used for fragments when targeting React JSX emit e.g. &#39;React.Fragment&#39; or &#39;Fragment&#39;. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;jsxImportSource&quot;: &quot;&quot;,                            /* Specify module specifier used to import the JSX factory functions when using `jsx: react-jsx*`.` */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;reactNamespace&quot;: &quot;&quot;,                             /* Specify the object invoked for `createElement`. This only applies when targeting `react` JSX emit. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noLib&quot;: true,                                    /* Disable including any library files, including the default lib.d.ts. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;useDefineForClassFields&quot;: true,                  /* Emit ECMAScript-standard-compliant class fields. */</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Modules */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;module&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ES2015&quot;</span><span class="p">,</span><span class="w">                                </span><span class="cm">/* Specify what module code is generated. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;rootDir&quot;: &quot;./&quot;,                                  /* Specify the root folder within your source files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;moduleResolution&quot;: &quot;node&quot;,                       /* Specify how TypeScript looks up a file from a given module specifier. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;baseUrl&quot;: &quot;./&quot;,                                  /* Specify the base directory to resolve non-relative module names. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;paths&quot;: {},                                      /* Specify a set of entries that re-map imports to additional lookup locations. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;rootDirs&quot;: [],                                   /* Allow multiple folders to be treated as one when resolving modules. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;typeRoots&quot;: [],                                  /* Specify multiple folders that act like `./node_modules/@types`. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;types&quot;: [],                                      /* Specify type package names to be included without being referenced in a source file. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;allowUmdGlobalAccess&quot;: true,                     /* Allow accessing UMD globals from modules. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;resolveJsonModule&quot;: true,                        /* Enable importing .json files */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noResolve&quot;: true,                                /* Disallow `import`s, `require`s or `&lt;reference&gt;`s from expanding the number of files TypeScript should add to a project. */</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* JavaScript Support */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;allowJs&quot;: true,                                  /* Allow JavaScript files to be a part of your program. Use the `checkJS` option to get errors from these files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;checkJs&quot;: true,                                  /* Enable error reporting in type-checked JavaScript files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;maxNodeModuleJsDepth&quot;: 1,                        /* Specify the maximum folder depth used for checking JavaScript files from `node_modules`. Only applicable with `allowJs`. */</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Emit */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;declaration&quot;: true,                              /* Generate .d.ts files from TypeScript and JavaScript files in your project. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;declarationMap&quot;: true,                           /* Create sourcemaps for d.ts files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;emitDeclarationOnly&quot;: true,                      /* Only output d.ts files and not JavaScript files. */</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;sourceMap&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                                </span><span class="cm">/* Create source map files for emitted JavaScript files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;outFile&quot;: &quot;./&quot;,                                  /* Specify a file that bundles all outputs into one JavaScript file. If `declaration` is true, also designates a file that bundles all .d.ts output. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;outDir&quot;: &quot;./&quot;,                                   /* Specify an output folder for all emitted files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;removeComments&quot;: true,                           /* Disable emitting comments. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noEmit&quot;: true,                                   /* Disable emitting files from a compilation. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;importHelpers&quot;: true,                            /* Allow importing helper functions from tslib once per project, instead of including them per-file. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;importsNotUsedAsValues&quot;: &quot;remove&quot;,               /* Specify emit/checking behavior for imports that are only used for types */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;downlevelIteration&quot;: true,                       /* Emit more compliant, but verbose and less performant JavaScript for iteration. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;sourceRoot&quot;: &quot;&quot;,                                 /* Specify the root path for debuggers to find the reference source code. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;mapRoot&quot;: &quot;&quot;,                                    /* Specify the location where debugger should locate map files instead of generated locations. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;inlineSourceMap&quot;: true,                          /* Include sourcemap files inside the emitted JavaScript. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;inlineSources&quot;: true,                            /* Include source code in the sourcemaps inside the emitted JavaScript. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;emitBOM&quot;: true,                                  /* Emit a UTF-8 Byte Order Mark (BOM) in the beginning of output files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;newLine&quot;: &quot;crlf&quot;,                                /* Set the newline character for emitting files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;stripInternal&quot;: true,                            /* Disable emitting declarations that have `@internal` in their JSDoc comments. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noEmitHelpers&quot;: true,                            /* Disable generating custom helper functions like `__extends` in compiled output. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noEmitOnError&quot;: true,                            /* Disable emitting files if any type checking errors are reported. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;preserveConstEnums&quot;: true,                       /* Disable erasing `const enum` declarations in generated code. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;declarationDir&quot;: &quot;./&quot;,                           /* Specify the output directory for generated declaration files. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;preserveValueImports&quot;: true,                     /* Preserve unused imported values in the JavaScript output that would otherwise be removed. */</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Interop Constraints */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;isolatedModules&quot;: true,                          /* Ensure that each file can be safely transpiled without relying on other imports. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;allowSyntheticDefaultImports&quot;: true,             /* Allow &#39;import x from y&#39; when a module doesn&#39;t have a default export. */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;esModuleInterop&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                             </span><span class="cm">/* Emit additional JavaScript to ease support for importing CommonJS modules. This enables `allowSyntheticDefaultImports` for type compatibility. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;preserveSymlinks&quot;: true,                         /* Disable resolving symlinks to their realpath. This correlates to the same flag in node. */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;forceConsistentCasingInFileNames&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">            </span><span class="cm">/* Ensure that casing is correct in imports. */</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Type Checking */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;strict&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                                      </span><span class="cm">/* Enable all strict type-checking options. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noImplicitAny&quot;: true,                            /* Enable error reporting for expressions and declarations with an implied `any` type.. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;strictNullChecks&quot;: true,                         /* When type checking, take into account `null` and `undefined`. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;strictFunctionTypes&quot;: true,                      /* When assigning functions, check to ensure parameters and the return values are subtype-compatible. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;strictBindCallApply&quot;: true,                      /* Check that the arguments for `bind`, `call`, and `apply` methods match the original function. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;strictPropertyInitialization&quot;: true,             /* Check for class properties that are declared but not set in the constructor. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noImplicitThis&quot;: true,                           /* Enable error reporting when `this` is given the type `any`. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;useUnknownInCatchVariables&quot;: true,               /* Type catch clause variables as &#39;unknown&#39; instead of &#39;any&#39;. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;alwaysStrict&quot;: true,                             /* Ensure &#39;use strict&#39; is always emitted. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noUnusedLocals&quot;: true,                           /* Enable error reporting when a local variables aren&#39;t read. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noUnusedParameters&quot;: true,                       /* Raise an error when a function parameter isn&#39;t read */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;exactOptionalPropertyTypes&quot;: true,               /* Interpret optional property types as written, rather than adding &#39;undefined&#39;. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noImplicitReturns&quot;: true,                        /* Enable error reporting for codepaths that do not explicitly return in a function. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noFallthroughCasesInSwitch&quot;: true,               /* Enable error reporting for fallthrough cases in switch statements. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noUncheckedIndexedAccess&quot;: true,                 /* Include &#39;undefined&#39; in index signature results */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noImplicitOverride&quot;: true,                       /* Ensure overriding members in derived classes are marked with an override modifier. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;noPropertyAccessFromIndexSignature&quot;: true,       /* Enforces using indexed accessors for keys declared using an indexed type */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;allowUnusedLabels&quot;: true,                        /* Disable error reporting for unused labels. */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;allowUnreachableCode&quot;: true,                     /* Disable error reporting for unreachable code. */</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Completeness */</span><span class="w"></span>
<span class="w">    </span><span class="c1">// &quot;skipDefaultLibCheck&quot;: true,                      /* Skip type checking .d.ts files that are included with TypeScript. */</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;skipLibCheck&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w">                                 </span><span class="cm">/* Skip type checking all .d.ts files. */</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><strong>npm run dev 启动就可以尽情的玩耍了</strong></p>
<h2 id="webpack-ts">webpack 构建 TS 项目<a class="headerlink" href="#webpack-ts" title="Permanent link">&para;</a></h2>
<p>安装依赖</p>
<p>安装 webpack  npm install webpack -D</p>
<p>webpack4 以上需要 npm install webpack-cli -D</p>
<p>编译 TS npm install ts-loader -D</p>
<p>TS 环境 npm install <a href="https://so.csdn.net/so/search?q=typescript&amp;spm=1001.2101.3001.7020">typescript</a> -D</p>
<p>热更新服务 npm install webpack-dev-server -D</p>
<p>HTML 模板 npm install html-webpack-plugin -D</p>
<h3 id="_73"><strong>配置文件</strong><a class="headerlink" href="#_73" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">htmlWebpackPlugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">)</span><span class="w"></span>
<span class="kr">module</span><span class="nx">.exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">entry</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./src/index.ts&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;development&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">output</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="kt">path.resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;./dist&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="nx">filename</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;index.js&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nx">stats</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">resolve</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">extensions</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;.ts&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.js&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">        </span><span class="nx">alias</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="s1">&#39;@&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;./src&#39;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nx">module</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">rules</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nx">test</span><span class="o">:</span><span class="w"> </span><span class="sr">/\.ts$/</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nx">use</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ts-loader&quot;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nx">devServer</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">port</span><span class="o">:</span><span class="w"> </span><span class="kt">1988</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">proxy</span><span class="o">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="ow">new</span><span class="w"> </span><span class="nx">htmlWebpackPlugin</span><span class="p">({</span><span class="w"></span>
<span class="w">            </span><span class="nx">template</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./public/index.html&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><strong>目录结构</strong></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/925/image-20221009090143222.png" alt="image-20221009090143222" style="zoom:50%;" /></p>
<h1 id="tsts-22">实战TS编写发布订阅模式(TS -- 22)<a class="headerlink" href="#tsts-22" title="Permanent link">&para;</a></h1>
<blockquote>
<p>什么是发布订阅模式，其实小伙伴已经用到了发布订阅模式例如 addEventListener，Vue evnetBus</p>
<p>都属于发布订阅模式</p>
<p>简单来说就是 你(小满)要和 大满 二满 三满打球，大满带球，二满带水，三满带球衣。全都准备完成后开始打球。</p>
</blockquote>
<h2 id="_74">思维导图<a class="headerlink" href="#_74" title="Permanent link">&para;</a></h2>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/925/image-20221009095700693.png" alt="image-20221009095700693" style="zoom:50%;" /></p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">Evenet</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">on</span><span class="o">:</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">fn</span><span class="o">:</span><span class="kt">Function</span><span class="p">))</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">emit</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">..args</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">,</span><span class="c1">//派发</span><span class="w"></span>
<span class="w">    </span><span class="nx">off</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">fn</span><span class="o">:</span><span class="kt">Function</span><span class="p">)=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">,</span><span class="c1">//移除</span><span class="w"></span>
<span class="w">    </span><span class="nx">once</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">fn</span><span class="o">:</span><span class="kt">Function</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="c1">//只执行一次</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">List</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">key</span><span class="o">:</span><span class="kt">string</span><span class="p">]</span><span class="o">:</span><span class="nb">Array</span><span class="o">&lt;</span><span class="nb">Function</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Dispatch</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">Event</span><span class="p">{</span><span class="c1">//通过implements来约束这个类(Evenet)</span><span class="w"></span>
<span class="w">    </span><span class="nx">list</span><span class="o">:</span><span class="kt">List</span><span class="w"></span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">(){</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">on</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">fn</span><span class="o">:</span><span class="kt">Function</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">list</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[]</span><span class="c1">//如果有取到值的话那就是一个数组，没有取到值的话就是一个空数组</span><span class="w"></span>
<span class="w">        </span><span class="nx">callback</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span><span class="c1">//因为不管怎么说，callback都是数组，所以我们后面的数组也可以直接添加上去</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">list</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">callback</span><span class="w"></span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">list</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">emit</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">..args</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">evnetName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">list</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="c1">//on监听跟emit派发的时候 name 是需要一样的，不然会出错，所以我们这里要进行一个判断</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">evnetName</span><span class="p">){</span><span class="w"></span>
<span class="w">            </span><span class="nx">eventName</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">fn</span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">                </span><span class="c1">//内容从下面的o.emit()传送上来</span><span class="w"></span>
<span class="w">                </span><span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">args</span><span class="p">)</span><span class="c1">//第一个参数this指向，第二个参数为数组，这里也刚好是一个数组就直接传进去。会将on监听的数据直接打印出来，这里打印出来66 99</span><span class="w"></span>
<span class="w">            </span><span class="p">})</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`名称错误</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">off</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">fn</span><span class="o">:</span><span class="kt">Function</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="c1">//off是删除一个函数，所以我们在下面将创建一个fn函数让他来删一下</span><span class="w"></span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">eventName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">list</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="c1">//跟emit一样的，需要进行判断有没有值，还有就是函数存不存在，不存在的话就没得删了对吧</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">eventName</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">fn</span><span class="p">){</span><span class="w"></span>
<span class="w">            </span><span class="c1">//我们要通过索引来将其删掉</span><span class="w"></span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">eventName</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">fns</span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">fns</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="nx">eventName</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span><span class="mf">1</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">eventName</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`名称错误</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">once</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="nx">fn</span><span class="o">:</span><span class="kt">Function</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">de</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">...args</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;{</span><span class="w"></span>
<span class="w">            </span><span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">args</span><span class="p">)</span><span class="c1">//指向到那个只调用一次函数的那里</span><span class="w"></span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">de</span><span class="p">)</span><span class="c1">//调用完就把它删掉，这就是只能调用一次的原因哈哈</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">de</span><span class="p">)</span><span class="c1">//第一个还是名字，第二个临时函数</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Dispatch</span><span class="p">()</span><span class="c1">//初始化</span><span class="w"></span>

<span class="nx">o</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,()=&gt;{</span><span class="c1">//post作为key</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mf">66</span><span class="p">);</span><span class="w"></span>
<span class="p">})</span><span class="c1">//第一个参数是事件名称，第二个是回调函数</span><span class="w"></span>

<span class="nx">o</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,(</span><span class="nx">...args</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">)=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mf">99</span><span class="p">,</span><span class="nx">args</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="c1">//这里我们对第二个回调函数传入了...args，也就是收到了o.emit除了第一个参数后面那些乱七八糟的东西(因为我们设定了any，对接收的类型并没有限制，所以收到什么乱七八糟的东西都不奇怪)，并在控制台打印了出来</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">...args</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span><span class="mf">2</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">o</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span><span class="nx">fn</span><span class="p">)</span><span class="c1">//没错，这个就是特地创建出来删掉的</span><span class="w"></span>
<span class="nx">o</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span><span class="nx">fn</span><span class="p">)</span><span class="c1">//将fn删掉</span><span class="w"></span>
<span class="c1">//o.on(&#39;post2&#39;,()=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//都会在控制台显示出来</span><span class="w"></span>
<span class="c1">//})</span><span class="w"></span>
<span class="nx">o</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,(</span><span class="nx">...args</span><span class="o">:</span><span class="kt">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">)=&gt;{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span><span class="s1">&#39;once&#39;</span><span class="p">)</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="nx">o</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="kc">false</span><span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小满&quot;</span><span class="p">})</span><span class="c1">//除了第一个参数一样是事件，后面参数是不限制个数的，而且传什么都行</span><span class="w"></span>
<span class="nx">o</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="kc">false</span><span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小满&quot;</span><span class="p">})</span><span class="c1">//这里如果收到就是有问题的，因为我们在上面使用once了，只调用一次</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>上面在off删除中使用到的splice知识点补充</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span><span class="nx">len</span><span class="p">,[</span><span class="nx">item</span><span class="p">])</span><span class="w"></span>

<span class="nx">它也可以用来替换</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">删除</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">添加数组内某一个或者几个值</span><span class="err">（</span><span class="nx">该方法会改变原始数组</span><span class="err">）</span><span class="w"></span>

<span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">数组开始下标</span><span class="w">         </span>
<span class="nx">len</span><span class="o">:</span><span class="w"> </span><span class="kt">替换</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">删除的长度</span><span class="w">       </span>
<span class="nx">item</span><span class="o">:</span><span class="w"> </span><span class="kt">替换的值</span><span class="err">，</span><span class="nx">删除操作的话</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">为空</span><span class="w"></span>

<span class="nx">删除</span><span class="err">：</span><span class="w"></span>
<span class="c1">// 删除起始下标为 1，长度为 1 的一个值 (len 设置 1，如果为 0，则数组不变)</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">];</span><span class="w"></span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">1</span><span class="p">);</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">);</span><span class="w">   </span><span class="c1">//[&#39;a&#39;,&#39;c&#39;,&#39;d&#39;]; </span><span class="w"></span>
<span class="c1">// 删除起始下标为 1，长度为 2 的一个值 (len 设置 2)</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">arr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">]</span><span class="w"> </span><span class="nx">arr2</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">);</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr2</span><span class="p">);</span><span class="w">  </span><span class="c1">//[&#39;a&#39;,&#39;d&#39;]</span><span class="w"></span>

<span class="nx">替换</span><span class="err">：</span><span class="w"></span>
<span class="c1">// 替换起始下标为 1，长度为 1 的一个值为‘ttt’，len 设置的 1</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">];</span><span class="w"></span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="s1">&#39;ttt&#39;</span><span class="p">);</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">);</span><span class="w">         </span><span class="c1">//[&#39;a&#39;,&#39;ttt&#39;,&#39;c&#39;,&#39;d&#39;] </span><span class="w"></span>
<span class="c1">// 替换起始下标为 1，长度为 2 的两个值为‘ttt’，len 设置的 1</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">arr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">];</span><span class="w"></span>
<span class="nx">arr2</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="s1">&#39;ttt&#39;</span><span class="p">);</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr2</span><span class="p">);</span><span class="w">        </span><span class="c1">//[&#39;a&#39;,&#39;ttt&#39;,&#39;d&#39;] </span><span class="w"></span>

<span class="nx">添加</span><span class="err">：</span><span class="w"></span>
<span class="c1">// 在下标为 1 处添加一项 &#39;ttt&#39;</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">];</span><span class="w"></span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">0</span><span class="p">,</span><span class="s1">&#39;ttt&#39;</span><span class="p">);</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">);</span><span class="w">         </span><span class="c1">//[&#39;a&#39;,&#39;ttt&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;] </span><span class="w"></span>
</code></pre></div>
<h1 id="ts-proxy-reflectts-23">TS 进阶用法 proxy &amp; Reflect(TS -- 23)<a class="headerlink" href="#ts-proxy-reflectts-23" title="Permanent link">&para;</a></h1>
<blockquote>
<p>proxy：对象代理(是ES6新增的对象拦截器，能够监听到一个对象的变化)</p>
<p>Reflect：配合proxy来操作对象</p>
</blockquote>
<h2 id="proxy">Proxy<a class="headerlink" href="#proxy" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong>Proxy</strong> 对象用于创建一个对象的代理，从而实现基本操作的拦截和自定义（如属性查找、赋值、枚举、函数调用等）</p>
<p><strong><code>target</code></strong></p>
<p>要使用 <code>Proxy</code> 包装的目标对象（可以是任何类型的对象，包括原生数组，函数，甚至另一个代理）。</p>
<p><strong><code>handler</code></strong></p>
<p>一个通常以函数作为属性的对象，各属性中的函数分别定义了在执行各种操作时代理 <code>p</code> 的行为。</p>
<p><code>handler.get()</code>本次使用的 get</p>
<p>属性读取操作的捕捉器。</p>
<p><code>handler.set()</code>本次使用的 set</p>
<p>属性设置操作的捕捉器。</p>
</blockquote>
<h2 id="reflect">Reflect<a class="headerlink" href="#reflect" title="Permanent link">&para;</a></h2>
<blockquote>
<p>与大多数全局对象不同 <code>Reflect</code> 并非一个构造函数，所以不能通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new">new 运算符</a>对其进行调用，或者将 <code>Reflect</code> 对象作为一个函数来调用。<code>Reflect</code> 的所有属性和方法都是静态的（就像 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math">Math</a> 对象）</p>
<h3 id="reflectgettarget-name-receiver">Reflect.get(target, name, receiver)<a class="headerlink" href="#reflectgettarget-name-receiver" title="Permanent link">&para;</a></h3>
<p><code>Reflect.get</code> 方法查找并返回 <code>target</code> 对象的 <code>name</code> 属性，如果没有该属性返回 undefined</p>
<h3 id="reflectsettarget-namevalue-receiver">Reflect.set(target, name,value, receiver)<a class="headerlink" href="#reflectsettarget-namevalue-receiver" title="Permanent link">&para;</a></h3>
<p><code>Reflect.set</code> 方法设置 <code>target</code> 对象的 <code>name</code> 属性等于 <code>value</code>。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Person</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">proxy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">object</span><span class="o">:</span><span class="kt">any</span><span class="p">,</span><span class="nx">key</span><span class="o">:</span><span class="kt">any</span><span class="p">)=&gt;{</span><span class="c1">//我们要自己实现proxy啦</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Proxy</span><span class="p">(</span><span class="nx">object</span><span class="p">,{</span><span class="w"></span>
<span class="w">        </span><span class="nx">get</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">prop</span><span class="p">,</span><span class="nx">receiver</span><span class="p">){</span><span class="w"></span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;================&gt;get&#39;</span><span class="p">,</span><span class="nx">prop</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="c1">//prop就是一个key，target就是地下那个man的对象，receiver是跟target一样的值，防止上下文错误的</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Reflect</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">prop</span><span class="p">,</span><span class="nx">receiver</span><span class="p">)</span><span class="c1">//这里刚好对应的也是这三个参数</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nx">set</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">prop</span><span class="p">,</span><span class="nx">value</span><span class="p">,</span><span class="nx">receiver</span><span class="p">){</span><span class="c1">//多了一个value，因为我们要设置值</span><span class="w"></span>
<span class="w">        </span><span class="c1">//日志</span><span class="w"></span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;================&gt;set&#39;</span><span class="p">,</span><span class="nx">prop</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Reflect</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="nx">prop</span><span class="p">,</span><span class="nx">value</span><span class="p">,</span><span class="nx">receiver</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">//日志监听函数</span><span class="w"></span>
<span class="c1">//由于我们要监听man里面的内容，所以这里可以使用联合类型</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">logAccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">object</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="p">,</span><span class="nx">key</span><span class="o">:</span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;age&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">T</span><span class="w"> </span><span class="p">=&gt;{</span><span class="c1">//为了使其灵活度高一点，我们不使其object等于Person，而是为泛型T，使用的时候再去设置</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">proxy</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span><span class="nx">key</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">man</span><span class="o">:</span><span class="kt">Person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小满&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">22</span><span class="w"></span>
<span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="s2">&quot;三秒真男人&quot;</span><span class="w"></span>
<span class="p">},</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">man2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">logAccess</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小余&quot;</span><span class="w"></span>
<span class="p">},</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="w"></span>

<span class="nx">man</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">30</span><span class="c1">//走set</span><span class="w"></span>
<span class="nx">man</span><span class="p">.</span><span class="nx">age</span><span class="c1">//走get</span><span class="w"></span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">man</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>泛型优化</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">logAccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">object</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="p">,</span><span class="nx">key</span><span class="o">:</span><span class="kt">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">)</span><span class="o">:</span><span class="nx">T</span><span class="w"> </span><span class="p">=&gt;{</span><span class="c1">//为了使其灵活度高一点，我们不使其object等于Person，而是为泛型T，使用的时候再去设置。key也不固定死，而是使用keyof，将我们传入的对象推断为联合类型</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">proxy</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span><span class="nx">key</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">man2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">logAccess</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小余&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="kt">925</span><span class="w"></span>
<span class="p">},</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="c1">//就可以动态的去约束类型</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">man2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">logAccess</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小余&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="kt">925</span><span class="w"></span>
<span class="p">},</span><span class="s1">&#39;id2&#39;</span><span class="p">)</span><span class="c1">//报错，因为我们类型里没有id2</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>优化完整版</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="kd">const</span><span class="w"> </span><span class="nx">proxy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">object</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">,</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Proxy</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">get</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="w"> </span><span class="nx">prop</span><span class="p">,</span><span class="w"> </span><span class="nx">receiver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`get key======&gt;</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Reflect</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="w"> </span><span class="nx">prop</span><span class="p">,</span><span class="w"> </span><span class="nx">receiver</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>

<span class="w">        </span><span class="nx">set</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="w"> </span><span class="nx">prop</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">receiver</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`set key======&gt;</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Reflect</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span><span class="w"> </span><span class="nx">prop</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">receiver</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="kd">const</span><span class="w"> </span><span class="nx">logAccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">object</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">,</span><span class="w"> </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="kt">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">proxy</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span><span class="w"> </span><span class="nx">key</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">man</span><span class="o">:</span><span class="w"> </span><span class="kt">Person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">logAccess</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;小满&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;我的很小&quot;</span><span class="w"></span>
<span class="p">},</span><span class="w"> </span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="w"></span>


<span class="kd">let</span><span class="w"> </span><span class="nx">man2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">logAccess</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="kt">1</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小满2&quot;</span><span class="w"></span>
<span class="p">},</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="w"></span>

<span class="nx">man</span><span class="p">.</span><span class="nx">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">30</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">man</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-partial-pickts-24">TS 进阶用法 Partial &amp; Pick(TS -- 24)<a class="headerlink" href="#ts-partial-pickts-24" title="Permanent link">&para;</a></h1>
<blockquote>
<p>TypeScript内置高级类型Partial Pick</p>
</blockquote>
<h2 id="partial_1">Partial<a class="headerlink" href="#partial_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>源码</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Make all properties in T optional</span>
<span class="cm">  将T中的所有属性设置为可选</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">Partial</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="nx">?</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">[</span><span class="nx">P</span><span class="p">];</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>手写实现</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Person</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">//keyof：将一个接口对象的全部属性取出来变成联合类型</span><span class="w"></span>
<span class="c1">//keyof的作用就是把我们的属性变成联合类型，在底下就相当于&quot;name&quot;|&quot;age&quot;|&quot;text&quot;。而 in 就是为遍历这个联合类型的每一项，然后放到这个P里(所以P里就是name、age、text)，然后使其变成`?`可选的</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">Par</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="c1">//这个T就是我们传过来的Person，所以T[P]就是Person里面name、age、text的内容(string那些啥的)</span><span class="w"></span>
<span class="w">    </span><span class="c1">//小满对T[P]的形容方式：通过索引取值的方式</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="nx">?</span><span class="o">:</span><span class="kt">T</span><span class="p">[</span><span class="nx">P</span><span class="p">]</span><span class="c1">//所以你在看这个肯定能看懂</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Partial</span><span class="o">&lt;</span><span class="nx">Person</span><span class="o">&gt;</span><span class="c1">//这个时候，我们会发现p上面的属性，name、age、text都变成可选的了</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>使用前(范例)</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Partial</span><span class="o">&lt;</span><span class="nx">Person</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>使用后(范例)</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">age?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h2 id="pick_1"><strong>Pick</strong><a class="headerlink" href="#pick_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>从类型定义 T 的属性中，选取指定一组属性，返回一个新的类型定义。</p>
<p>源码</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * From T, pick a set of properties whose keys are in the union K</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">Pick</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">K</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">P</span><span class="p">];</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>手写实现</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">address</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">Ex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;age&quot;</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Pick</span><span class="o">&lt;</span><span class="nx">Person</span><span class="p">,</span><span class="nx">Ex</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>分析(需要结合手写的内容看)</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Pick</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="c1">//T跟K都是泛型,T相当于我们的Person，K就相当于我们传的联合类型，然后同样也经历了keyof的洗礼，使其变成联合类型，K通过extends被约束了这点，使其只能为T，也就是Person内的值</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">K</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">P</span><span class="p">];</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Pick</span><span class="o">&lt;</span><span class="nx">Person</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="o">|</span><span class="s1">&#39;name&#39;</span><span class="o">&gt;</span><span class="c1">//这里的Person请参考手写实现的Person</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-record-readonlyts-25">TS 进阶用法 Record &amp; Readonly(TS -- 25)<a class="headerlink" href="#ts-record-readonlyts-25" title="Permanent link">&para;</a></h1>
<h2 id="readonly_1">Readonly<a class="headerlink" href="#readonly_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>和 Partial 很像是吧？只是将Partial替换成了 Readonly</p>
<p>源码</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Readonly</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">readonly</span><span class="w"> </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">P</span><span class="p">];</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>手写实现</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Readonly</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">readonly</span><span class="w"> </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">T</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="nx">P</span><span class="p">];</span><span class="c1">//keyof还是那样，转化为联合类型，in去遍历选项。T[P]通过索引取值的方式</span><span class="w"></span>
<span class="w">    </span><span class="c1">//然后为里面每个内容都加上只读属性</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">man</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">R</span><span class="o">&lt;</span><span class="nx">Person</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<h2 id="record_1">Record<a class="headerlink" href="#record_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>1 keyof any 返回 string number symbol 的联合类型</p>
<p>2 in 我们可以理解成 for in P 就是 key 遍历 keyof any 就是 string number symbol 类型的每一项</p>
<p>3 extends 来约束我们的类型</p>
<p>4 T 直接返回类型</p>
<p>做到了约束 对象的 key 同时约束了 value</p>
<p>源码</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Record</span><span class="o">&lt;</span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">any</span><span class="p">,</span><span class="w"> </span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">K</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>手写实现</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Rec</span><span class="o">&lt;</span><span class="nx">K</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">any</span><span class="p">,</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="c1">//T是泛型，传什么在这里并没有限制</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="nx">P</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">K</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="c1">//keyof返回联合类型</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="kt">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">symbol</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="o">=</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="kt">number.</span><span class="w"></span>
<span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="kt">string</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A&quot;</span><span class="o">|</span><span class="s2">&quot;B&quot;</span><span class="o">|</span><span class="s2">&quot;C&quot;</span><span class="c1">//因为我们在这里定义了K，所以let B才只能使用A、B、C，如果这里换成1、2、3，那底下也只能使用1、2、3而不是A、B、C</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Rec</span><span class="o">&lt;</span><span class="nx">K</span><span class="p">,</span><span class="nx">Person</span><span class="o">&gt;</span><span class="c1">//这里会返回成type B = {A:Person;B:Person;C:Person;}的形式</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="nx">obj</span><span class="o">:</span><span class="kt">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">A</span><span class="o">:</span><span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小满&quot;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">3</span><span class="p">,</span><span class="nx">text</span><span class="o">:</span><span class="s2">&quot;三秒真男人&quot;</span><span class="p">}</span><span class="c1">//这里值的类型需要是Person的类型，因为在type B中已经定义了</span><span class="w"></span>
<span class="w">    </span><span class="nx">B</span><span class="o">:</span><span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;小余&quot;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">18</span><span class="p">,</span><span class="nx">text</span><span class="o">:</span><span class="s2">&quot;三小时真男人&quot;</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">C</span><span class="o">:</span><span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;狗洛&quot;</span><span class="p">,</span><span class="nx">age</span><span class="o">:</span><span class="kt">1</span><span class="p">,</span><span class="nx">text</span><span class="o">:</span><span class="s2">&quot;零点三秒真男人&quot;</span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h1 id="ts-inferts-26">TS 进阶用法 infer(TS -- 26)<a class="headerlink" href="#ts-inferts-26" title="Permanent link">&para;</a></h1>
<blockquote>
<p>infer 是 TypeScript新增到的关键字 充当占位符</p>
<p>我们来实现一个条件类型推断的例子</p>
<p>定义一个类型 如果是数组类型 就返回 数组元素的类型 否则 就传入什么类型 就返回什么类型</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">TYPE</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="nx">entends</span><span class="w"> </span><span class="nb">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">T</span><span class="p">[</span><span class="kt">number</span><span class="p">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TYPE</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">[]</span><span class="o">&gt;</span><span class="c1">//会返回type A = string</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TYPE</span><span class="o">&lt;</span><span class="p">(</span><span class="kt">string</span><span class="o">|</span><span class="kt">number</span><span class="p">)[]</span><span class="o">&gt;</span><span class="c1">//会返回type B = string|number</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TYPE</span><span class="o">&lt;</span><span class="kt">boolean</span><span class="o">&gt;</span><span class="c1">//返回type C = boolean</span><span class="w"></span>
</code></pre></div>
<h2 id="infer">infer<a class="headerlink" href="#infer" title="Permanent link">&para;</a></h2>
<blockquote>
<p>使用 inter 修改</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">TYPE</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="nx">entends</span><span class="w"> </span><span class="nb">Array</span><span class="o">&lt;</span><span class="nx">infer</span><span class="w"> </span><span class="nx">U</span><span class="o">&gt;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">U</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="c1">//U不是泛型，而是充当占位符使用，读取Array类型然后进行返回</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">TYPE</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="nx">entends</span><span class="w"> </span><span class="nb">Array</span><span class="o">&lt;</span><span class="nx">infer</span><span class="w"> </span><span class="nx">U</span><span class="o">&gt;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">U</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">never</span><span class="c1">//限制只能传type T这个元组类型，其他都不能传</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TYPE</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">[]</span><span class="o">&gt;</span><span class="c1">//会返回type A = string</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TYPE</span><span class="o">&lt;</span><span class="p">(</span><span class="kt">string</span><span class="o">|</span><span class="kt">number</span><span class="p">)[]</span><span class="o">&gt;</span><span class="c1">//会返回type B = string|number</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="kt">string</span><span class="p">,</span><span class="kt">number</span><span class="p">]</span><span class="w"></span>
<span class="c1">//使其变成联合类型(小技巧)</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">uni</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TYPE</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="c1">//返回联合类型type uni = string|number</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">uni</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">TYPE</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="c1">//返回type uni = never。因为我们进行了限制</span><span class="w"></span>
</code></pre></div>
<h1 id="infer-ts-27">infer 类型提取(TS -- 27)<a class="headerlink" href="#infer-ts-27" title="Permanent link">&para;</a></h1>
<h3 id="_75">提取头部元素<a class="headerlink" href="#_75" title="Permanent link">&para;</a></h3>
<blockquote>
<p><code>T extends any[]</code>：对T进行泛型约束，一个any类型的数组</p>
<p><code>type First&lt;T extends any[]&gt; = T extends [infer one,infer two,infer three]</code>? one:[]：对T进行泛型约束为数组类型，用infer提取，提取的变量名对应着Arr的a、b、c。然后决定返回one，也就是第一个元素还是空数组</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">First</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">any</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">[</span><span class="nx">infer</span><span class="w"> </span><span class="nx">one</span><span class="p">,</span><span class="nx">infer</span><span class="w"> </span><span class="nx">two</span><span class="p">,</span><span class="nx">infer</span><span class="w"> </span><span class="nx">three</span><span class="p">]</span><span class="o">?</span><span class="w"> </span><span class="nx">one</span><span class="o">:</span><span class="p">[]</span><span class="w"></span>
<span class="c1">//ES6进阶版</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">First</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">any</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">[</span><span class="nx">infer</span><span class="w"> </span><span class="nx">First</span><span class="p">,...</span><span class="nx">any</span><span class="p">[]]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">First</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="c1">//1 ... </span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">First</span><span class="o">&lt;</span><span class="nx">Arr</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<h3 id="_76">提取尾部元素<a class="headerlink" href="#_76" title="Permanent link">&para;</a></h3>
<blockquote>
<p>将头尾反过来了</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="p">]</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">Last</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">any</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">[...</span><span class="nx">any</span><span class="p">[],</span><span class="w"> </span><span class="nx">infer</span><span class="w"> </span><span class="nx">Last</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">Last</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="c1">//... 尾部</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Last</span><span class="o">&lt;</span><span class="nx">Arr</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<h3 id="shift">剔除第一个元素 Shift<a class="headerlink" href="#shift" title="Permanent link">&para;</a></h3>
<blockquote>
<p>将除了第一个之外的其他通过ES6语法提取出来</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">First</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">any</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">[</span><span class="nx">unknown</span><span class="p">,...</span><span class="nx">infer</span><span class="w"> </span><span class="nx">Rest</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">Rest</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">First</span><span class="o">&lt;</span><span class="nx">Arr</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<h3 id="pop">剔除尾部元素 pop<a class="headerlink" href="#pop" title="Permanent link">&para;</a></h3>
<blockquote>
<p>将除了第最后一个之外的其他通过ES6语法提取出来</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">First</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">any</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">[...</span><span class="nx">infer</span><span class="w"> </span><span class="nx">Rest</span><span class="p">,</span><span class="nx">unknown</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">Rest</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">First</span><span class="o">&lt;</span><span class="nx">Arr</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<h1 id="infer-ts-28">infer 递归(TS -- 28)<a class="headerlink" href="#infer-ts-28" title="Permanent link">&para;</a></h1>
<blockquote>
<p>需求：</p>
<p>有这么一个类型</p>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">]</span><span class="w"></span>
</code></pre></div>
<p>希望通过一个 ts 工具变成</p>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">4</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span><span class="w"></span>
</code></pre></div>
<p>具体思路 首先使用泛型约束 约束只能传入数组类型的东西 然后从数组中提取第一个，放入新数组的末尾，反复此操作，形成递归 满足结束条件返回该类型</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kr">type</span><span class="w"> </span><span class="nx">Arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="mf">4</span><span class="p">]</span><span class="w"></span>
<span class="c1">//先来一个泛型约束(对T)，这是通过不断递归拿到最后一个元素(也就是问好后面的那个First)填到最前面，直到没有元素为止(三元表达式)</span><span class="w"></span>
<span class="c1">//</span><span class="w"></span>
<span class="kr">type</span><span class="w"> </span><span class="nx">ReverArr</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">any</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="p">[</span><span class="nx">infer</span><span class="w"> </span><span class="nx">First</span><span class="p">,...</span><span class="nx">infer</span><span class="w"> </span><span class="nx">rest</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">[...</span><span class="nx">ReverArr</span><span class="o">&lt;</span><span class="nx">rest</span><span class="o">&gt;</span><span class="p">,</span><span class="nx">First</span><span class="p">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"></span>

<span class="kr">type</span><span class="w"> </span><span class="nx">Arrb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ReverArr</span><span class="o">&lt;</span><span class="nx">Arr</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="../JS/" class="md-footer__link md-footer__link--prev" aria-label="上一页: javaScript" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              javaScript
            </div>
          </div>
        </a>
      
      
        
        <a href="../Node.js/" class="md-footer__link md-footer__link--next" aria-label="下一页: nodejs" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              nodejs
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 韩永琰
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://space.bilibili.com/358218864" target="_blank" rel="noopener" title="Bilibili | 愿你决定" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0s16.1 2.868 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0c8.8 0 16.1 2.868 21.9 8.603 5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1zm-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8 6.3-6.5 9.7-14.3 10.1-23.5V173.8zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5-9.6 0-17.5-3.2-23.6-9.5-6.1-6.3-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2 6.3-6.3 13.2-9.6 23.3-10 9.2.4 17 3.7 23.3 10zm191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.1 6.3-14 9.5-23.6 9.5-9.6 0-17.4-3.2-23.6-9.5-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2 6.3-6.3 14.1-9.6 23.3-10 9.2.4 17 3.7 23.3 10z"/></svg>
    </a>
  
    
    
    <a href="https://github.com/hanyongyan" target="_blank" rel="noopener" title="GitHub | hanyongyan" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.top", "navigation.indexes", "navigation.expand", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../../../mkdocs/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
    
  </body>
</html>